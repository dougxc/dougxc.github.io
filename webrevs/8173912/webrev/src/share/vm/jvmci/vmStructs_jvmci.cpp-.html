<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta charset="utf-8">
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
a.print { font-size: x-small; }

</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>Old src/share/vm/jvmci/vmStructs_jvmci.cpp</title>
<body id="SUNWwebrev">
<pre>
   1 /*
   2  * Copyright (c) 2015, 2016, Oracle and/or its affiliates. All rights reserved.
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
  23  */
  24 
  25 #include "precompiled.hpp"
  26 #include "code/codeBlob.hpp"
  27 #include "compiler/abstractCompiler.hpp"
  28 #include "compiler/compileBroker.hpp"
  29 #include "jvmci/jvmciCodeInstaller.hpp"
  30 #include "jvmci/jvmciCompilerToVM.hpp"
  31 #include "jvmci/jvmciEnv.hpp"
  32 #include "jvmci/jvmciRuntime.hpp"
  33 #include "jvmci/vmStructs_compiler_runtime.hpp"
  34 #include "jvmci/vmStructs_jvmci.hpp"
  35 #include "oops/oop.hpp"
  36 #include "oops/objArrayKlass.hpp"
  37 #include "runtime/globals.hpp"
  38 #include "runtime/sharedRuntime.hpp"
  39 #include "runtime/thread.hpp"
  40 #include "runtime/vm_version.hpp"
  41 
  42 #if INCLUDE_ALL_GCS
  43 #include "gc/g1/g1SATBCardTableModRefBS.hpp"
  44 #include "gc/g1/heapRegion.hpp"
  45 #endif
  46 
  47 #define VM_STRUCTS(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field) \
  48   static_field(CompilerToVM::Data,             Klass_vtable_start_offset,              int)                                          \
  49   static_field(CompilerToVM::Data,             Klass_vtable_length_offset,             int)                                          \
  50                                                                                                                                      \
  51   static_field(CompilerToVM::Data,             Method_extra_stack_entries,             int)                                          \
  52                                                                                                                                      \
  53   static_field(CompilerToVM::Data,             SharedRuntime_ic_miss_stub,             address)                                      \
  54   static_field(CompilerToVM::Data,             SharedRuntime_handle_wrong_method_stub, address)                                      \
  55   static_field(CompilerToVM::Data,             SharedRuntime_deopt_blob_unpack,        address)                                      \
  56   static_field(CompilerToVM::Data,             SharedRuntime_deopt_blob_uncommon_trap, address)                                      \
  57                                                                                                                                      \
  58   static_field(CompilerToVM::Data,             ThreadLocalAllocBuffer_alignment_reserve, size_t)                                     \
  59                                                                                                                                      \
  60   static_field(CompilerToVM::Data,             Universe_collectedHeap,                 CollectedHeap*)                               \
  61   static_field(CompilerToVM::Data,             Universe_base_vtable_size,              int)                                          \
  62   static_field(CompilerToVM::Data,             Universe_narrow_oop_base,               address)                                      \
  63   static_field(CompilerToVM::Data,             Universe_narrow_oop_shift,              int)                                          \
  64   static_field(CompilerToVM::Data,             Universe_narrow_klass_base,             address)                                      \
  65   static_field(CompilerToVM::Data,             Universe_narrow_klass_shift,            int)                                          \
  66   static_field(CompilerToVM::Data,             Universe_non_oop_bits,                  void*)                                        \
  67   static_field(CompilerToVM::Data,             Universe_verify_oop_mask,               uintptr_t)                                    \
  68   static_field(CompilerToVM::Data,             Universe_verify_oop_bits,               uintptr_t)                                    \
  69                                                                                                                                      \
  70   static_field(CompilerToVM::Data,             _supports_inline_contig_alloc,          bool)                                         \
  71   static_field(CompilerToVM::Data,             _heap_end_addr,                         HeapWord**)                                   \
  72   static_field(CompilerToVM::Data,             _heap_top_addr,                         HeapWord* volatile*)                          \
  73                                                                                                                                      \
  74   static_field(CompilerToVM::Data,             _max_oop_map_stack_offset,              int)                                          \
  75                                                                                                                                      \
  76   static_field(CompilerToVM::Data,             cardtable_start_address,                jbyte*)                                       \
  77   static_field(CompilerToVM::Data,             cardtable_shift,                        int)                                          \
  78                                                                                                                                      \
  79   static_field(CompilerToVM::Data,             vm_page_size,                           int)                                          \
  80                                                                                                                                      \
  81   static_field(CompilerToVM::Data,             dsin,                                   address)                                      \
  82   static_field(CompilerToVM::Data,             dcos,                                   address)                                      \
  83   static_field(CompilerToVM::Data,             dtan,                                   address)                                      \
  84   static_field(CompilerToVM::Data,             dexp,                                   address)                                      \
  85   static_field(CompilerToVM::Data,             dlog,                                   address)                                      \
  86   static_field(CompilerToVM::Data,             dlog10,                                 address)                                      \
  87   static_field(CompilerToVM::Data,             dpow,                                   address)                                      \
  88                                                                                                                                      \
  89   static_field(Abstract_VM_Version,            _features,                              uint64_t)                                     \
  90                                                                                                                                      \
  91   nonstatic_field(Array&lt;int&gt;,                  _length,                                int)                                          \
  92   unchecked_nonstatic_field(Array&lt;u1&gt;,         _data,                                  sizeof(u1))                                   \
  93   unchecked_nonstatic_field(Array&lt;u2&gt;,         _data,                                  sizeof(u2))                                   \
  94   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                int)                                          \
  95   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                               Klass*)                                       \
  96                                                                                                                                      \
  97   volatile_nonstatic_field(BasicLock,          _displaced_header,                      markOop)                                      \
  98                                                                                                                                      \
  99   static_field(CodeCache,                      _low_bound,                             address)                                      \
 100   static_field(CodeCache,                      _high_bound,                            address)                                      \
 101                                                                                                                                      \
 102   nonstatic_field(CollectedHeap,               _total_collections,                     unsigned int)                                 \
 103                                                                                                                                      \
 104   nonstatic_field(CompileTask,                 _num_inlined_bytecodes,                 int)                                          \
 105                                                                                                                                      \
 106   nonstatic_field(ConstantPool,                _tags,                                  Array&lt;u1&gt;*)                                   \
 107   nonstatic_field(ConstantPool,                _pool_holder,                           InstanceKlass*)                               \
 108   nonstatic_field(ConstantPool,                _length,                                int)                                          \
 109                                                                                                                                      \
 110   nonstatic_field(ConstMethod,                 _constants,                             ConstantPool*)                                \
 111   nonstatic_field(ConstMethod,                 _flags,                                 u2)                                           \
 112   nonstatic_field(ConstMethod,                 _code_size,                             u2)                                           \
 113   nonstatic_field(ConstMethod,                 _name_index,                            u2)                                           \
 114   nonstatic_field(ConstMethod,                 _signature_index,                       u2)                                           \
 115   nonstatic_field(ConstMethod,                 _max_stack,                             u2)                                           \
 116   nonstatic_field(ConstMethod,                 _max_locals,                            u2)                                           \
 117                                                                                                                                      \
 118   nonstatic_field(DataLayout,                  _header._struct._tag,                   u1)                                           \
 119   nonstatic_field(DataLayout,                  _header._struct._flags,                 u1)                                           \
 120   nonstatic_field(DataLayout,                  _header._struct._bci,                   u2)                                           \
 121   nonstatic_field(DataLayout,                  _cells[0],                              intptr_t)                                     \
 122                                                                                                                                      \
 123   nonstatic_field(Deoptimization::UnrollBlock, _size_of_deoptimized_frame,             int)                                          \
 124   nonstatic_field(Deoptimization::UnrollBlock, _caller_adjustment,                     int)                                          \
 125   nonstatic_field(Deoptimization::UnrollBlock, _number_of_frames,                      int)                                          \
 126   nonstatic_field(Deoptimization::UnrollBlock, _total_frame_sizes,                     int)                                          \
 127   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                           intptr_t*)                                    \
 128   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                             address*)                                     \
 129   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                          intptr_t)                                     \
 130   nonstatic_field(Deoptimization::UnrollBlock, _unpack_kind,                           int)                                          \
 131                                                                                                                                      \
 132   nonstatic_field(ExceptionTableElement,       start_pc,                                       u2)                                   \
 133   nonstatic_field(ExceptionTableElement,       end_pc,                                         u2)                                   \
 134   nonstatic_field(ExceptionTableElement,       handler_pc,                                     u2)                                   \
 135   nonstatic_field(ExceptionTableElement,       catch_type_index,                               u2)                                   \
 136                                                                                                                                      \
 137   nonstatic_field(Flag,                        _type,                                          const char*)                          \
 138   nonstatic_field(Flag,                        _name,                                          const char*)                          \
 139   unchecked_nonstatic_field(Flag,              _addr,                                          sizeof(void*))                        \
 140   nonstatic_field(Flag,                        _flags,                                         Flag::Flags)                          \
 141   static_field(Flag,                           flags,                                          Flag*)                                \
 142                                                                                                                                      \
 143   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 144   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 145   nonstatic_field(InstanceKlass,               _source_file_name_index,                       u2)                                    \
 146   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
 147                                                                                                                                      \
 148   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 149   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 150                                                                                                                                      \
 151   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
 152   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 153   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 154   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 155   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 156   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
 157   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 158   nonstatic_field(JavaThread,                  _satb_mark_queue,                              SATBMarkQueue)                         \
 159   nonstatic_field(JavaThread,                  _dirty_card_queue,                             DirtyCardQueue)                        \
 160   nonstatic_field(JavaThread,                  _pending_deoptimization,                       int)                                   \
 161   nonstatic_field(JavaThread,                  _pending_failed_speculation,                   oop)                                   \
 162   nonstatic_field(JavaThread,                  _pending_transfer_to_interpreter,              bool)                                  \
 163   nonstatic_field(JavaThread,                  _jvmci_counters,                               jlong*)                                \
 164   nonstatic_field(JavaThread,                  _reserved_stack_activation,                    address)                               \
 165                                                                                                                                      \
 166   static_field(java_lang_Class,                _klass_offset,                                 int)                                   \
 167   static_field(java_lang_Class,                _array_klass_offset,                           int)                                   \
 168                                                                                                                                      \
 169   nonstatic_field(JVMCIEnv,                    _task,                                         CompileTask*)                          \
 170   nonstatic_field(JVMCIEnv,                    _jvmti_can_hotswap_or_post_breakpoint,         bool)                                  \
 171                                                                                                                                      \
 172   nonstatic_field(InvocationCounter,           _counter,                                      unsigned int)                          \
 173                                                                                                                                      \
 174   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 175   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 176   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 177   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 178   nonstatic_field(Klass,                       _subklass,                                     Klass*)                                \
 179   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 180   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 181   nonstatic_field(Klass,                       _prototype_header,                             markOop)                               \
 182   nonstatic_field(Klass,                       _next_sibling,                                 Klass*)                                \
 183   nonstatic_field(Klass,                       _java_mirror,                                  oop)                                   \
 184   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 185   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
 186                                                                                                                                      \
 187   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 188   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 189   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 190   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 191   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 192   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 193                                                                                                                                      \
 194   nonstatic_field(Method,                      _constMethod,                                  ConstMethod*)                          \
 195   nonstatic_field(Method,                      _method_data,                                  MethodData*)                           \
 196   nonstatic_field(Method,                      _method_counters,                              MethodCounters*)                       \
 197   nonstatic_field(Method,                      _access_flags,                                 AccessFlags)                           \
 198   nonstatic_field(Method,                      _vtable_index,                                 int)                                   \
 199   nonstatic_field(Method,                      _intrinsic_id,                                 u2)                                    \
 200   nonstatic_field(Method,                      _flags,                                        u2)                                    \
 201   volatile_nonstatic_field(Method,             _code,                                         CompiledMethod*)                       \
 202   volatile_nonstatic_field(Method,             _from_compiled_entry,                          address)                               \
 203                                                                                                                                      \
 204   nonstatic_field(MethodCounters,              _nmethod_age,                                  int)                                   \
 205   nonstatic_field(MethodCounters,              _interpreter_invocation_limit,                 int)                                   \
 206   nonstatic_field(MethodCounters,              _interpreter_backward_branch_limit,            int)                                   \
 207   nonstatic_field(MethodCounters,              _interpreter_profile_limit,                    int)                                   \
 208   nonstatic_field(MethodCounters,              _invoke_mask,                                  int)                                   \
 209   nonstatic_field(MethodCounters,              _backedge_mask,                                int)                                   \
 210   nonstatic_field(MethodCounters,              _interpreter_invocation_count,                 int)                                   \
 211   nonstatic_field(MethodCounters,              _interpreter_throwout_count,                   u2)                                    \
 212   JVMTI_ONLY(nonstatic_field(MethodCounters,   _number_of_breakpoints,                        u2))                                   \
 213   nonstatic_field(MethodCounters,              _invocation_counter,                           InvocationCounter)                     \
 214   nonstatic_field(MethodCounters,              _backedge_counter,                             InvocationCounter)                     \
 215                                                                                                                                      \
 216   nonstatic_field(MethodData,                  _size,                                         int)                                   \
 217   nonstatic_field(MethodData,                  _method,                                       Method*)                               \
 218   nonstatic_field(MethodData,                  _data_size,                                    int)                                   \
 219   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 220   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 221   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 222   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 223   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 224   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 225   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 226   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 227   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 228   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 229   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 230   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
 231   nonstatic_field(MethodData,                  _backedge_mask,                                int)                                   \
 232   nonstatic_field(MethodData,                  _jvmci_ir_size,                                int)                                   \
 233                                                                                                                                      \
 234   nonstatic_field(nmethod,                     _verified_entry_point,                         address)                               \
 235   nonstatic_field(nmethod,                     _comp_level,                                   int)                                   \
 236                                                                                                                                      \
 237   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 238                                                                                                                                      \
 239   volatile_nonstatic_field(oopDesc,            _mark,                                         markOop)                               \
 240   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 241                                                                                                                                      \
 242   static_field(os,                             _polling_page,                                 address)                               \
 243                                                                                                                                      \
 244   volatile_nonstatic_field(OSThread,           _interrupted,                                  jint)                                  \
 245                                                                                                                                      \
 246   static_field(StubRoutines,                _verify_oop_count,                                jint)                                  \
 247                                                                                                                                      \
 248   static_field(StubRoutines,                _throw_delayed_StackOverflowError_entry,          address)                               \
 249                                                                                                                                      \
 250   static_field(StubRoutines,                _jbyte_arraycopy,                                 address)                               \
 251   static_field(StubRoutines,                _jshort_arraycopy,                                address)                               \
 252   static_field(StubRoutines,                _jint_arraycopy,                                  address)                               \
 253   static_field(StubRoutines,                _jlong_arraycopy,                                 address)                               \
 254   static_field(StubRoutines,                _oop_arraycopy,                                   address)                               \
 255   static_field(StubRoutines,                _oop_arraycopy_uninit,                            address)                               \
 256   static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                        address)                               \
 257   static_field(StubRoutines,                _jshort_disjoint_arraycopy,                       address)                               \
 258   static_field(StubRoutines,                _jint_disjoint_arraycopy,                         address)                               \
 259   static_field(StubRoutines,                _jlong_disjoint_arraycopy,                        address)                               \
 260   static_field(StubRoutines,                _oop_disjoint_arraycopy,                          address)                               \
 261   static_field(StubRoutines,                _oop_disjoint_arraycopy_uninit,                   address)                               \
 262   static_field(StubRoutines,                _arrayof_jbyte_arraycopy,                         address)                               \
 263   static_field(StubRoutines,                _arrayof_jshort_arraycopy,                        address)                               \
 264   static_field(StubRoutines,                _arrayof_jint_arraycopy,                          address)                               \
 265   static_field(StubRoutines,                _arrayof_jlong_arraycopy,                         address)                               \
 266   static_field(StubRoutines,                _arrayof_oop_arraycopy,                           address)                               \
 267   static_field(StubRoutines,                _arrayof_oop_arraycopy_uninit,                    address)                               \
 268   static_field(StubRoutines,                _arrayof_jbyte_disjoint_arraycopy,                address)                               \
 269   static_field(StubRoutines,                _arrayof_jshort_disjoint_arraycopy,               address)                               \
 270   static_field(StubRoutines,                _arrayof_jint_disjoint_arraycopy,                 address)                               \
 271   static_field(StubRoutines,                _arrayof_jlong_disjoint_arraycopy,                address)                               \
 272   static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy,                  address)                               \
 273   static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy_uninit,           address)                               \
 274   static_field(StubRoutines,                _checkcast_arraycopy,                             address)                               \
 275   static_field(StubRoutines,                _checkcast_arraycopy_uninit,                      address)                               \
 276   static_field(StubRoutines,                _unsafe_arraycopy,                                address)                               \
 277   static_field(StubRoutines,                _generic_arraycopy,                               address)                               \
 278                                                                                                                                      \
 279   static_field(StubRoutines,                _aescrypt_encryptBlock,                           address)                               \
 280   static_field(StubRoutines,                _aescrypt_decryptBlock,                           address)                               \
 281   static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,             address)                               \
 282   static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,             address)                               \
 283   static_field(StubRoutines,                _counterMode_AESCrypt,                            address)                               \
 284   static_field(StubRoutines,                _ghash_processBlocks,                             address)                               \
 285   static_field(StubRoutines,                _sha1_implCompress,                               address)                               \
 286   static_field(StubRoutines,                _sha1_implCompressMB,                             address)                               \
 287   static_field(StubRoutines,                _sha256_implCompress,                             address)                               \
 288   static_field(StubRoutines,                _sha256_implCompressMB,                           address)                               \
 289   static_field(StubRoutines,                _sha512_implCompress,                             address)                               \
 290   static_field(StubRoutines,                _sha512_implCompressMB,                           address)                               \
 291   static_field(StubRoutines,                _updateBytesCRC32,                                address)                               \
 292   static_field(StubRoutines,                _crc_table_adr,                                   address)                               \
 293   static_field(StubRoutines,                _crc32c_table_addr,                               address)                               \
 294   static_field(StubRoutines,                _updateBytesCRC32C,                               address)                               \
 295   static_field(StubRoutines,                _updateBytesAdler32,                              address)                               \
 296   static_field(StubRoutines,                _multiplyToLen,                                   address)                               \
 297   static_field(StubRoutines,                _squareToLen,                                     address)                               \
 298   static_field(StubRoutines,                _mulAdd,                                          address)                               \
 299   static_field(StubRoutines,                _montgomeryMultiply,                              address)                               \
 300   static_field(StubRoutines,                _montgomerySquare,                                address)                               \
 301   static_field(StubRoutines,                _vectorizedMismatch,                              address)                               \
 302                                                                                                                                      \
 303   nonstatic_field(Thread,                   _tlab,                                            ThreadLocalAllocBuffer)                \
 304   nonstatic_field(Thread,                   _allocated_bytes,                                 jlong)                                 \
 305                                                                                                                                      \
 306   nonstatic_field(ThreadLocalAllocBuffer,   _start,                                           HeapWord*)                             \
 307   nonstatic_field(ThreadLocalAllocBuffer,   _top,                                             HeapWord*)                             \
 308   nonstatic_field(ThreadLocalAllocBuffer,   _end,                                             HeapWord*)                             \
 309   nonstatic_field(ThreadLocalAllocBuffer,   _pf_top,                                          HeapWord*)                             \
 310   nonstatic_field(ThreadLocalAllocBuffer,   _desired_size,                                    size_t)                                \
 311   nonstatic_field(ThreadLocalAllocBuffer,   _refill_waste_limit,                              size_t)                                \
 312   nonstatic_field(ThreadLocalAllocBuffer,   _number_of_refills,                               unsigned)                              \
 313   nonstatic_field(ThreadLocalAllocBuffer,   _fast_refill_waste,                               unsigned)                              \
 314   nonstatic_field(ThreadLocalAllocBuffer,   _slow_allocations,                                unsigned)                              \
 315                                                                                                                                      \
 316   nonstatic_field(ThreadShadow,             _pending_exception,                               oop)                                   \
 317                                                                                                                                      \
 318   static_field(vmSymbols,                   _symbols[0],                                      Symbol*)                               \
 319                                                                                                                                      \
 320   nonstatic_field(vtableEntry,              _method,                                          Method*)                               \
 321 
 322 #define VM_TYPES(declare_type, declare_toplevel_type, declare_integer_type, declare_unsigned_integer_type) \
 323   declare_integer_type(bool)                                              \
 324   declare_unsigned_integer_type(size_t)                                   \
 325   declare_integer_type(intx)                                              \
 326   declare_unsigned_integer_type(uintx)                                    \
 327                                                                           \
 328   declare_toplevel_type(BasicLock)                                        \
 329   declare_toplevel_type(CompilerToVM)                                     \
 330   declare_toplevel_type(ExceptionTableElement)                            \
 331   declare_toplevel_type(Flag)                                             \
 332   declare_toplevel_type(Flag*)                                            \
 333   declare_toplevel_type(InvocationCounter)                                \
 334   declare_toplevel_type(JVMCIEnv)                                         \
 335   declare_toplevel_type(LocalVariableTableElement)                        \
 336   declare_toplevel_type(narrowKlass)                                      \
 337   declare_toplevel_type(Symbol*)                                          \
 338   declare_toplevel_type(vtableEntry)                                      \
 339                                                                           \
 340   declare_toplevel_type(oopDesc)                                          \
 341     declare_type(arrayOopDesc, oopDesc)                                   \
 342                                                                           \
 343   declare_toplevel_type(MetaspaceObj)                                     \
 344     declare_type(Metadata, MetaspaceObj)                                  \
 345     declare_type(Klass, Metadata)                                         \
 346       declare_type(InstanceKlass, Klass)                                  \
 347     declare_type(ConstantPool, Metadata)                                  \
 348 
 349 #define VM_INT_CONSTANTS(declare_constant, declare_constant_with_value, declare_preprocessor_constant) \
 350   declare_preprocessor_constant("ASSERT", DEBUG_ONLY(1) NOT_DEBUG(0))     \
 351   declare_preprocessor_constant("FIELDINFO_TAG_SIZE", FIELDINFO_TAG_SIZE) \
 352   declare_preprocessor_constant("STACK_BIAS", STACK_BIAS)                 \
 353                                                                           \
 354   declare_constant(CompLevel_none)                                        \
 355   declare_constant(CompLevel_simple)                                      \
 356   declare_constant(CompLevel_limited_profile)                             \
 357   declare_constant(CompLevel_full_profile)                                \
 358   declare_constant(CompLevel_full_optimization)                           \
 359   declare_constant(HeapWordSize)                                          \
 360   declare_constant(InvocationEntryBci)                                    \
 361   declare_constant(LogKlassAlignmentInBytes)                              \
 362                                                                           \
 363   declare_constant(JVM_ACC_WRITTEN_FLAGS)                                 \
 364   declare_constant(JVM_ACC_MONITOR_MATCH)                                 \
 365   declare_constant(JVM_ACC_HAS_MONITOR_BYTECODES)                         \
 366   declare_constant(JVM_ACC_HAS_FINALIZER)                                 \
 367   declare_constant(JVM_ACC_IS_CLONEABLE_FAST)                             \
 368   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
 369   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
 370   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
 371   declare_preprocessor_constant("JVM_ACC_VARARGS", JVM_ACC_VARARGS)       \
 372   declare_preprocessor_constant("JVM_ACC_BRIDGE", JVM_ACC_BRIDGE)         \
 373   declare_preprocessor_constant("JVM_ACC_ANNOTATION", JVM_ACC_ANNOTATION) \
 374   declare_preprocessor_constant("JVM_ACC_ENUM", JVM_ACC_ENUM)             \
 375   declare_preprocessor_constant("JVM_ACC_SYNTHETIC", JVM_ACC_SYNTHETIC)   \
 376                                                                           \
 377   declare_constant(JVM_CONSTANT_Utf8)                                     \
 378   declare_constant(JVM_CONSTANT_Unicode)                                  \
 379   declare_constant(JVM_CONSTANT_Integer)                                  \
 380   declare_constant(JVM_CONSTANT_Float)                                    \
 381   declare_constant(JVM_CONSTANT_Long)                                     \
 382   declare_constant(JVM_CONSTANT_Double)                                   \
 383   declare_constant(JVM_CONSTANT_Class)                                    \
 384   declare_constant(JVM_CONSTANT_String)                                   \
 385   declare_constant(JVM_CONSTANT_Fieldref)                                 \
 386   declare_constant(JVM_CONSTANT_Methodref)                                \
 387   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
 388   declare_constant(JVM_CONSTANT_NameAndType)                              \
 389   declare_constant(JVM_CONSTANT_MethodHandle)                             \
 390   declare_constant(JVM_CONSTANT_MethodType)                               \
 391   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \
 392   declare_constant(JVM_CONSTANT_ExternalMax)                              \
 393                                                                           \
 394   declare_constant(JVM_CONSTANT_Invalid)                                  \
 395   declare_constant(JVM_CONSTANT_InternalMin)                              \
 396   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
 397   declare_constant(JVM_CONSTANT_ClassIndex)                               \
 398   declare_constant(JVM_CONSTANT_StringIndex)                              \
 399   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
 400   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
 401   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
 402   declare_constant(JVM_CONSTANT_InternalMax)                              \
 403                                                                           \
 404   declare_constant(ArrayData::array_len_off_set)                          \
 405   declare_constant(ArrayData::array_start_off_set)                        \
 406                                                                           \
 407   declare_constant(BitData::exception_seen_flag)                          \
 408   declare_constant(BitData::null_seen_flag)                               \
 409   declare_constant(BranchData::not_taken_off_set)                         \
 410                                                                           \
 411   declare_constant_with_value("CardTableModRefBS::dirty_card", CardTableModRefBS::dirty_card_val()) \
 412                                                                           \
 413   declare_constant(CodeInstaller::VERIFIED_ENTRY)                         \
 414   declare_constant(CodeInstaller::UNVERIFIED_ENTRY)                       \
 415   declare_constant(CodeInstaller::OSR_ENTRY)                              \
 416   declare_constant(CodeInstaller::EXCEPTION_HANDLER_ENTRY)                \
 417   declare_constant(CodeInstaller::DEOPT_HANDLER_ENTRY)                    \
 418   declare_constant(CodeInstaller::INVOKEINTERFACE)                        \
 419   declare_constant(CodeInstaller::INVOKEVIRTUAL)                          \
 420   declare_constant(CodeInstaller::INVOKESTATIC)                           \
 421   declare_constant(CodeInstaller::INVOKESPECIAL)                          \
 422   declare_constant(CodeInstaller::INLINE_INVOKE)                          \
 423   declare_constant(CodeInstaller::POLL_NEAR)                              \
 424   declare_constant(CodeInstaller::POLL_RETURN_NEAR)                       \
 425   declare_constant(CodeInstaller::POLL_FAR)                               \
 426   declare_constant(CodeInstaller::POLL_RETURN_FAR)                        \
 427   declare_constant(CodeInstaller::CARD_TABLE_SHIFT)                       \
 428   declare_constant(CodeInstaller::CARD_TABLE_ADDRESS)                     \
 429   declare_constant(CodeInstaller::HEAP_TOP_ADDRESS)                       \
 430   declare_constant(CodeInstaller::HEAP_END_ADDRESS)                       \
 431   declare_constant(CodeInstaller::NARROW_KLASS_BASE_ADDRESS)              \
 432   declare_constant(CodeInstaller::NARROW_OOP_BASE_ADDRESS)                \
 433   declare_constant(CodeInstaller::CRC_TABLE_ADDRESS)                      \
 434   declare_constant(CodeInstaller::LOG_OF_HEAP_REGION_GRAIN_BYTES)         \
 435   declare_constant(CodeInstaller::INLINE_CONTIGUOUS_ALLOCATION_SUPPORTED) \
 436   declare_constant(CodeInstaller::INVOKE_INVALID)                         \
 437                                                                           \
 438   declare_constant(ConstantPool::CPCACHE_INDEX_TAG)                       \
 439                                                                           \
 440   declare_constant(ConstMethod::_has_linenumber_table)                    \
 441   declare_constant(ConstMethod::_has_localvariable_table)                 \
 442   declare_constant(ConstMethod::_has_exception_table)                     \
 443                                                                           \
 444   declare_constant(CounterData::count_off)                                \
 445                                                                           \
 446   declare_constant(DataLayout::cell_size)                                 \
 447   declare_constant(DataLayout::no_tag)                                    \
 448   declare_constant(DataLayout::bit_data_tag)                              \
 449   declare_constant(DataLayout::counter_data_tag)                          \
 450   declare_constant(DataLayout::jump_data_tag)                             \
 451   declare_constant(DataLayout::receiver_type_data_tag)                    \
 452   declare_constant(DataLayout::virtual_call_data_tag)                     \
 453   declare_constant(DataLayout::ret_data_tag)                              \
 454   declare_constant(DataLayout::branch_data_tag)                           \
 455   declare_constant(DataLayout::multi_branch_data_tag)                     \
 456   declare_constant(DataLayout::arg_info_data_tag)                         \
 457   declare_constant(DataLayout::call_type_data_tag)                        \
 458   declare_constant(DataLayout::virtual_call_type_data_tag)                \
 459   declare_constant(DataLayout::parameters_type_data_tag)                  \
 460   declare_constant(DataLayout::speculative_trap_data_tag)                 \
 461                                                                           \
 462   declare_constant(Deoptimization::Unpack_deopt)                          \
 463   declare_constant(Deoptimization::Unpack_exception)                      \
 464   declare_constant(Deoptimization::Unpack_uncommon_trap)                  \
 465   declare_constant(Deoptimization::Unpack_reexecute)                      \
 466                                                                           \
 467   declare_constant(Deoptimization::_action_bits)                          \
 468   declare_constant(Deoptimization::_reason_bits)                          \
 469   declare_constant(Deoptimization::_debug_id_bits)                        \
 470   declare_constant(Deoptimization::_action_shift)                         \
 471   declare_constant(Deoptimization::_reason_shift)                         \
 472   declare_constant(Deoptimization::_debug_id_shift)                       \
 473                                                                           \
 474   declare_constant(Deoptimization::Action_none)                           \
 475   declare_constant(Deoptimization::Action_maybe_recompile)                \
 476   declare_constant(Deoptimization::Action_reinterpret)                    \
 477   declare_constant(Deoptimization::Action_make_not_entrant)               \
 478   declare_constant(Deoptimization::Action_make_not_compilable)            \
 479                                                                           \
 480   declare_constant(Deoptimization::Reason_none)                           \
 481   declare_constant(Deoptimization::Reason_null_check)                     \
 482   declare_constant(Deoptimization::Reason_range_check)                    \
 483   declare_constant(Deoptimization::Reason_class_check)                    \
 484   declare_constant(Deoptimization::Reason_array_check)                    \
 485   declare_constant(Deoptimization::Reason_unreached0)                     \
 486   declare_constant(Deoptimization::Reason_constraint)                     \
 487   declare_constant(Deoptimization::Reason_div0_check)                     \
 488   declare_constant(Deoptimization::Reason_loop_limit_check)               \
 489   declare_constant(Deoptimization::Reason_type_checked_inlining)          \
 490   declare_constant(Deoptimization::Reason_optimized_type_check)           \
 491   declare_constant(Deoptimization::Reason_aliasing)                       \
 492   declare_constant(Deoptimization::Reason_transfer_to_interpreter)        \
 493   declare_constant(Deoptimization::Reason_not_compiled_exception_handler) \
 494   declare_constant(Deoptimization::Reason_unresolved)                     \
 495   declare_constant(Deoptimization::Reason_jsr_mismatch)                   \
 496   declare_constant(Deoptimization::Reason_LIMIT)                          \
 497                                                                           \
 498   declare_constant_with_value("dirtyCardQueueBufferOffset", in_bytes(DirtyCardQueue::byte_offset_of_buf())) \
 499   declare_constant_with_value("dirtyCardQueueIndexOffset", in_bytes(DirtyCardQueue::byte_offset_of_index())) \
 500                                                                           \
 501   declare_constant(FieldInfo::access_flags_offset)                        \
 502   declare_constant(FieldInfo::name_index_offset)                          \
 503   declare_constant(FieldInfo::signature_index_offset)                     \
 504   declare_constant(FieldInfo::initval_index_offset)                       \
 505   declare_constant(FieldInfo::low_packed_offset)                          \
 506   declare_constant(FieldInfo::high_packed_offset)                         \
 507   declare_constant(FieldInfo::field_slots)                                \
 508                                                                           \
 509   declare_constant(InstanceKlass::linked)                                 \
 510   declare_constant(InstanceKlass::fully_initialized)                      \
 511                                                                           \
 512   declare_constant(JumpData::taken_off_set)                               \
 513   declare_constant(JumpData::displacement_off_set)                        \
 514                                                                           \
 515   declare_constant(JVMCIEnv::ok)                                          \
 516   declare_constant(JVMCIEnv::dependencies_failed)                         \
 517   declare_constant(JVMCIEnv::dependencies_invalid)                        \
 518   declare_constant(JVMCIEnv::cache_full)                                  \
 519   declare_constant(JVMCIEnv::code_too_large)                              \
 520   declare_constant(JVMCIRuntime::none)                                    \
 521   declare_constant(JVMCIRuntime::by_holder)                               \
 522   declare_constant(JVMCIRuntime::by_full_signature)                       \
 523                                                                           \
 524   declare_constant(Klass::_lh_neutral_value)                              \
 525   declare_constant(Klass::_lh_instance_slow_path_bit)                     \
 526   declare_constant(Klass::_lh_log2_element_size_shift)                    \
 527   declare_constant(Klass::_lh_log2_element_size_mask)                     \
 528   declare_constant(Klass::_lh_element_type_shift)                         \
 529   declare_constant(Klass::_lh_element_type_mask)                          \
 530   declare_constant(Klass::_lh_header_size_shift)                          \
 531   declare_constant(Klass::_lh_header_size_mask)                           \
 532   declare_constant(Klass::_lh_array_tag_shift)                            \
 533   declare_constant(Klass::_lh_array_tag_type_value)                       \
 534   declare_constant(Klass::_lh_array_tag_obj_value)                        \
 535                                                                           \
 536   declare_constant(markOopDesc::no_hash)                                  \
 537                                                                           \
 538   declare_constant(Method::_caller_sensitive)                             \
 539   declare_constant(Method::_force_inline)                                 \
 540   declare_constant(Method::_dont_inline)                                  \
 541   declare_constant(Method::_hidden)                                       \
 542   declare_constant(Method::_intrinsic_candidate)                          \
 543   declare_constant(Method::_reserved_stack_access)                        \
 544                                                                           \
 545   declare_constant(Method::nonvirtual_vtable_index)                       \
 546   declare_constant(Method::invalid_vtable_index)                          \
 547                                                                           \
 548   declare_constant(MultiBranchData::per_case_cell_count)                  \
 549                                                                           \
 550   declare_constant(ReceiverTypeData::nonprofiled_count_off_set)           \
 551   declare_constant(ReceiverTypeData::receiver_type_row_cell_count)        \
 552   declare_constant(ReceiverTypeData::receiver0_offset)                    \
 553   declare_constant(ReceiverTypeData::count0_offset)                       \
 554                                                                           \
 555   declare_constant_with_value("satbMarkQueueBufferOffset", in_bytes(SATBMarkQueue::byte_offset_of_buf())) \
 556   declare_constant_with_value("satbMarkQueueIndexOffset", in_bytes(SATBMarkQueue::byte_offset_of_index())) \
 557   declare_constant_with_value("satbMarkQueueActiveOffset", in_bytes(SATBMarkQueue::byte_offset_of_active())) \
 558                                                                           \
 559   declare_constant(vmIntrinsics::_invokeBasic)                            \
 560   declare_constant(vmIntrinsics::_linkToVirtual)                          \
 561   declare_constant(vmIntrinsics::_linkToStatic)                           \
 562   declare_constant(vmIntrinsics::_linkToSpecial)                          \
 563   declare_constant(vmIntrinsics::_linkToInterface)                        \
 564                                                                           \
 565   declare_constant(vmSymbols::FIRST_SID)                                  \
 566   declare_constant(vmSymbols::SID_LIMIT)                                  \
 567 
 568 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant) \
 569   declare_constant(InvocationCounter::count_increment)                    \
 570   declare_constant(InvocationCounter::count_shift)                        \
 571                                                                           \
 572   declare_constant(markOopDesc::hash_shift)                               \
 573                                                                           \
 574   declare_constant(markOopDesc::biased_lock_mask_in_place)                \
 575   declare_constant(markOopDesc::age_mask_in_place)                        \
 576   declare_constant(markOopDesc::epoch_mask_in_place)                      \
 577   declare_constant(markOopDesc::hash_mask)                                \
 578   declare_constant(markOopDesc::hash_mask_in_place)                       \
 579                                                                           \
 580   declare_constant(markOopDesc::unlocked_value)                           \
 581   declare_constant(markOopDesc::biased_lock_pattern)                      \
 582                                                                           \
 583   declare_constant(markOopDesc::no_hash_in_place)                         \
 584   declare_constant(markOopDesc::no_lock_in_place)                         \
 585 
 586 #define VM_ADDRESSES(declare_address, declare_preprocessor_address, declare_function) \
 587   declare_function(SharedRuntime::register_finalizer)                     \
 588   declare_function(SharedRuntime::exception_handler_for_return_address)   \
 589   declare_function(SharedRuntime::OSR_migration_end)                      \
 590   declare_function(SharedRuntime::enable_stack_reserved_zone)             \
 591   declare_function(SharedRuntime::frem)                                   \
 592   declare_function(SharedRuntime::drem)                                   \
 593                                                                           \
 594   declare_function(os::dll_load)                                          \
 595   declare_function(os::dll_lookup)                                        \
 596   declare_function(os::javaTimeMillis)                                    \
 597   declare_function(os::javaTimeNanos)                                     \
 598                                                                           \
 599   declare_function(Deoptimization::fetch_unroll_info)                     \
 600   declare_function(Deoptimization::uncommon_trap)                         \
 601   declare_function(Deoptimization::unpack_frames)                         \
 602                                                                           \
 603   declare_function(JVMCIRuntime::new_instance) \
 604   declare_function(JVMCIRuntime::new_array) \
 605   declare_function(JVMCIRuntime::new_multi_array) \
 606   declare_function(JVMCIRuntime::dynamic_new_array) \
 607   declare_function(JVMCIRuntime::dynamic_new_instance) \
 608   \
 609   declare_function(JVMCIRuntime::thread_is_interrupted) \
 610   declare_function(JVMCIRuntime::vm_message) \
 611   declare_function(JVMCIRuntime::identity_hash_code) \
 612   declare_function(JVMCIRuntime::exception_handler_for_pc) \
 613   declare_function(JVMCIRuntime::monitorenter) \
 614   declare_function(JVMCIRuntime::monitorexit) \
 615   declare_function(JVMCIRuntime::throw_and_post_jvmti_exception) \
 616   declare_function(JVMCIRuntime::throw_klass_external_name_exception) \
 617   declare_function(JVMCIRuntime::throw_class_cast_exception) \
 618   declare_function(JVMCIRuntime::log_primitive) \
 619   declare_function(JVMCIRuntime::log_object) \
 620   declare_function(JVMCIRuntime::log_printf) \
 621   declare_function(JVMCIRuntime::vm_error) \
 622   declare_function(JVMCIRuntime::load_and_clear_exception) \
 623   declare_function(JVMCIRuntime::write_barrier_pre) \
 624   declare_function(JVMCIRuntime::write_barrier_post) \
 625   declare_function(JVMCIRuntime::validate_object) \
 626   \
 627   declare_function(JVMCIRuntime::test_deoptimize_call_int)
 628 
 629 
 630 #if INCLUDE_ALL_GCS
 631 
 632 #define VM_STRUCTS_G1(nonstatic_field, static_field) \
 633   static_field(HeapRegion, LogOfHRGrainBytes, int)
 634 
 635 #define VM_INT_CONSTANTS_G1(declare_constant, declare_constant_with_value, declare_preprocessor_constant) \
 636   declare_constant_with_value("G1SATBCardTableModRefBS::g1_young_gen", G1SATBCardTableModRefBS::g1_young_card_val())
 637 
 638 #endif // INCLUDE_ALL_GCS
 639 
 640 
 641 #ifdef LINUX
 642 
 643 #define VM_ADDRESSES_OS(declare_address, declare_preprocessor_address, declare_function) \
 644   declare_preprocessor_address("RTLD_DEFAULT", RTLD_DEFAULT)
 645 
 646 #endif
 647 
 648 
 649 #ifdef BSD
 650 
 651 #define VM_ADDRESSES_OS(declare_address, declare_preprocessor_address, declare_function) \
 652   declare_preprocessor_address("RTLD_DEFAULT", RTLD_DEFAULT)
 653 
 654 #endif
 655 
 656 // AARCH64 is defined in closed port, too. TARGET_ARCH_aarch64 is not.
 657 #ifdef TARGET_ARCH_aarch64
 658 
 659 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field) \
 660   volatile_nonstatic_field(JavaFrameAnchor, _last_Java_fp, intptr_t*)
 661 
 662 #endif
 663 
 664 
 665 #ifdef X86
 666 
 667 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field) \
 668   volatile_nonstatic_field(JavaFrameAnchor, _last_Java_fp, intptr_t*)
 669 
 670 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 671   LP64_ONLY(declare_constant(frame::arg_reg_save_area_bytes))       \
 672   declare_constant(frame::interpreter_frame_sender_sp_offset)       \
 673   declare_constant(frame::interpreter_frame_last_sp_offset)         \
 674   declare_constant(VM_Version::CPU_CX8)                             \
 675   declare_constant(VM_Version::CPU_CMOV)                            \
 676   declare_constant(VM_Version::CPU_FXSR)                            \
 677   declare_constant(VM_Version::CPU_HT)                              \
 678   declare_constant(VM_Version::CPU_MMX)                             \
 679   declare_constant(VM_Version::CPU_3DNOW_PREFETCH)                  \
 680   declare_constant(VM_Version::CPU_SSE)                             \
 681   declare_constant(VM_Version::CPU_SSE2)                            \
 682   declare_constant(VM_Version::CPU_SSE3)                            \
 683   declare_constant(VM_Version::CPU_SSSE3)                           \
 684   declare_constant(VM_Version::CPU_SSE4A)                           \
 685   declare_constant(VM_Version::CPU_SSE4_1)                          \
 686   declare_constant(VM_Version::CPU_SSE4_2)                          \
 687   declare_constant(VM_Version::CPU_POPCNT)                          \
 688   declare_constant(VM_Version::CPU_LZCNT)                           \
 689   declare_constant(VM_Version::CPU_TSC)                             \
 690   declare_constant(VM_Version::CPU_TSCINV)                          \
 691   declare_constant(VM_Version::CPU_AVX)                             \
 692   declare_constant(VM_Version::CPU_AVX2)                            \
 693   declare_constant(VM_Version::CPU_AES)                             \
 694   declare_constant(VM_Version::CPU_ERMS)                            \
 695   declare_constant(VM_Version::CPU_CLMUL)                           \
 696   declare_constant(VM_Version::CPU_BMI1)                            \
 697   declare_constant(VM_Version::CPU_BMI2)                            \
 698   declare_constant(VM_Version::CPU_RTM)                             \
 699   declare_constant(VM_Version::CPU_ADX)                             \
 700   declare_constant(VM_Version::CPU_AVX512F)                         \
 701   declare_constant(VM_Version::CPU_AVX512DQ)                        \
 702   declare_constant(VM_Version::CPU_AVX512PF)                        \
 703   declare_constant(VM_Version::CPU_AVX512ER)                        \
 704   declare_constant(VM_Version::CPU_AVX512CD)
 705 
 706 #define VM_LONG_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 707   declare_preprocessor_constant("VM_Version::CPU_AVX512BW", CPU_AVX512BW) \
 708   declare_preprocessor_constant("VM_Version::CPU_AVX512VL", CPU_AVX512VL) \
 709   declare_preprocessor_constant("VM_Version::CPU_SHA", CPU_SHA)           \
 710   declare_preprocessor_constant("VM_Version::CPU_FMA", CPU_FMA)
 711 
 712 #endif
 713 
 714 
 715 #ifdef SPARC
 716 
 717 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field) \
 718   volatile_nonstatic_field(JavaFrameAnchor, _flags, int)
 719 
 720 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 721   declare_constant(VM_Version::vis1_instructions_m)                       \
 722   declare_constant(VM_Version::vis2_instructions_m)                       \
 723   declare_constant(VM_Version::vis3_instructions_m)                       \
 724   declare_constant(VM_Version::cbcond_instructions_m)                     \
 725   declare_constant(VM_Version::v8_instructions_m)                         \
 726   declare_constant(VM_Version::hardware_mul32_m)                          \
 727   declare_constant(VM_Version::hardware_div32_m)                          \
 728   declare_constant(VM_Version::hardware_fsmuld_m)                         \
 729   declare_constant(VM_Version::hardware_popc_m)                           \
 730   declare_constant(VM_Version::v9_instructions_m)                         \
 731   declare_constant(VM_Version::sun4v_m)                                   \
 732   declare_constant(VM_Version::blk_init_instructions_m)                   \
 733   declare_constant(VM_Version::fmaf_instructions_m)                       \
 734   declare_constant(VM_Version::sparc64_family_m)                          \
 735   declare_constant(VM_Version::M_family_m)                                \
 736   declare_constant(VM_Version::T_family_m)                                \
 737   declare_constant(VM_Version::T1_model_m)                                \
 738   declare_constant(VM_Version::sparc5_instructions_m)                     \
 739   declare_constant(VM_Version::aes_instructions_m)                        \
 740   declare_constant(VM_Version::sha1_instruction_m)                        \
 741   declare_constant(VM_Version::sha256_instruction_m)                      \
 742   declare_constant(VM_Version::sha512_instruction_m)
 743 
 744 #endif
 745 
 746 
 747 /*
 748  * Dummy defines for architectures that don't use these.
 749  */
 750 #ifndef VM_STRUCTS_CPU
 751 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field)
 752 #endif
 753 
 754 #ifndef VM_TYPES_CPU
 755 #define VM_TYPES_CPU(declare_type, declare_toplevel_type, declare_oop_type, declare_integer_type, declare_unsigned_integer_type, declare_c1_toplevel_type, declare_c2_type, declare_c2_toplevel_type)
 756 #endif
 757 
 758 #ifndef VM_INT_CONSTANTS_CPU
 759 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant)
 760 #endif
 761 
 762 #ifndef VM_LONG_CONSTANTS_CPU
 763 #define VM_LONG_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant)
 764 #endif
 765 
 766 #ifndef VM_STRUCTS_OS
 767 #define VM_STRUCTS_OS(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field)
 768 #endif
 769 
 770 #ifndef VM_TYPES_OS
 771 #define VM_TYPES_OS(declare_type, declare_toplevel_type, declare_oop_type, declare_integer_type, declare_unsigned_integer_type, declare_c1_toplevel_type, declare_c2_type, declare_c2_toplevel_type)
 772 #endif
 773 
 774 #ifndef VM_INT_CONSTANTS_OS
 775 #define VM_INT_CONSTANTS_OS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant)
 776 #endif
 777 
 778 #ifndef VM_LONG_CONSTANTS_OS
 779 #define VM_LONG_CONSTANTS_OS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant)
 780 #endif
 781 
 782 #ifndef VM_ADDRESSES_OS
 783 #define VM_ADDRESSES_OS(declare_address, declare_preprocessor_address, declare_function)
 784 #endif
 785 
 786 
 787 //
 788 // Instantiation of VMStructEntries, VMTypeEntries and VMIntConstantEntries
 789 //
 790 
 791 // These initializers are allowed to access private fields in classes
 792 // as long as class VMStructs is a friend
 793 VMStructEntry JVMCIVMStructs::localHotSpotVMStructs[] = {
 794   VM_STRUCTS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 795              GENERATE_STATIC_VM_STRUCT_ENTRY,
 796              GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
 797              GENERATE_NONSTATIC_VM_STRUCT_ENTRY)
 798 
 799   VM_STRUCTS_OS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 800                 GENERATE_STATIC_VM_STRUCT_ENTRY,
 801                 GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
 802                 GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 803                 GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
 804                 GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
 805                 GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
 806                 GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
 807 
 808   VM_STRUCTS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 809                  GENERATE_STATIC_VM_STRUCT_ENTRY,
 810                  GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
 811                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 812                  GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
 813                  GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
 814                  GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
 815                  GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
 816 
 817 #if INCLUDE_ALL_GCS
 818   VM_STRUCTS_G1(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 819                 GENERATE_STATIC_VM_STRUCT_ENTRY)
 820 #endif
 821 
 822   GENERATE_VM_STRUCT_LAST_ENTRY()
 823 };
 824 
 825 VMTypeEntry JVMCIVMStructs::localHotSpotVMTypes[] = {
 826   VM_TYPES(GENERATE_VM_TYPE_ENTRY,
 827            GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
 828            GENERATE_INTEGER_VM_TYPE_ENTRY,
 829            GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY)
 830 
 831   VM_TYPES_OS(GENERATE_VM_TYPE_ENTRY,
 832               GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
 833               GENERATE_OOP_VM_TYPE_ENTRY,
 834               GENERATE_INTEGER_VM_TYPE_ENTRY,
 835               GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
 836               GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
 837               GENERATE_C2_VM_TYPE_ENTRY,
 838               GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
 839 
 840   VM_TYPES_CPU(GENERATE_VM_TYPE_ENTRY,
 841                GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
 842                GENERATE_OOP_VM_TYPE_ENTRY,
 843                GENERATE_INTEGER_VM_TYPE_ENTRY,
 844                GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
 845                GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
 846                GENERATE_C2_VM_TYPE_ENTRY,
 847                GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
 848 
 849   GENERATE_VM_TYPE_LAST_ENTRY()
 850 };
 851 
 852 VMIntConstantEntry JVMCIVMStructs::localHotSpotVMIntConstants[] = {
 853   VM_INT_CONSTANTS(GENERATE_VM_INT_CONSTANT_ENTRY,
 854                    GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY,
 855                    GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
 856 
 857   VM_INT_CONSTANTS_OS(GENERATE_VM_INT_CONSTANT_ENTRY,
 858                       GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
 859                       GENERATE_C1_VM_INT_CONSTANT_ENTRY,
 860                       GENERATE_C2_VM_INT_CONSTANT_ENTRY,
 861                       GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
 862 
 863   VM_INT_CONSTANTS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
 864                        GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
 865                        GENERATE_C1_VM_INT_CONSTANT_ENTRY,
 866                        GENERATE_C2_VM_INT_CONSTANT_ENTRY,
 867                        GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
 868 
 869 #if INCLUDE_ALL_GCS
 870   VM_INT_CONSTANTS_G1(GENERATE_VM_INT_CONSTANT_ENTRY,
 871                       GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY,
 872                       GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
 873 #endif
 874 
 875   GENERATE_VM_INT_CONSTANT_LAST_ENTRY()
 876 };
 877 
 878 VMLongConstantEntry JVMCIVMStructs::localHotSpotVMLongConstants[] = {
 879   VM_LONG_CONSTANTS(GENERATE_VM_LONG_CONSTANT_ENTRY,
 880                     GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
 881 
 882   VM_LONG_CONSTANTS_OS(GENERATE_VM_LONG_CONSTANT_ENTRY,
 883                        GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
 884                        GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
 885                        GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
 886                        GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
 887 
 888   VM_LONG_CONSTANTS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
 889                         GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
 890                         GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
 891                         GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
 892                         GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
 893 
 894   GENERATE_VM_LONG_CONSTANT_LAST_ENTRY()
 895 };
 896 
 897 VMAddressEntry JVMCIVMStructs::localHotSpotVMAddresses[] = {
 898   VM_ADDRESSES(GENERATE_VM_ADDRESS_ENTRY,
 899                GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
 900                GENERATE_VM_FUNCTION_ENTRY)
 901   VM_ADDRESSES_COMPILER_RUNTIME(GENERATE_VM_ADDRESS_ENTRY,
 902                GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
 903                GENERATE_VM_FUNCTION_ENTRY)
 904   VM_ADDRESSES_OS(GENERATE_VM_ADDRESS_ENTRY,
 905                   GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
 906                   GENERATE_VM_FUNCTION_ENTRY)
 907 
 908   GENERATE_VM_ADDRESS_LAST_ENTRY()
 909 };
 910 
 911 int JVMCIVMStructs::localHotSpotVMStructs_count() {
 912   // Ignore sentinel entry at the end
 913   return (sizeof(localHotSpotVMStructs) / sizeof(VMStructEntry)) - 1;
 914 }
 915 int JVMCIVMStructs::localHotSpotVMTypes_count() {
 916   // Ignore sentinel entry at the end
 917   return (sizeof(localHotSpotVMTypes) / sizeof(VMTypeEntry)) - 1;
 918 }
 919 int JVMCIVMStructs::localHotSpotVMIntConstants_count() {
 920   // Ignore sentinel entry at the end
 921   return (sizeof(localHotSpotVMIntConstants) / sizeof(VMIntConstantEntry)) - 1;
 922 }
 923 int JVMCIVMStructs::localHotSpotVMLongConstants_count() {
 924   // Ignore sentinel entry at the end
 925   return (sizeof(localHotSpotVMLongConstants) / sizeof(VMLongConstantEntry)) - 1;
 926 }
 927 int JVMCIVMStructs::localHotSpotVMAddresses_count() {
 928   // Ignore sentinel entry at the end
 929   return (sizeof(localHotSpotVMAddresses) / sizeof(VMAddressEntry)) - 1;
 930 }
 931 
 932 extern "C" {
 933 JNIEXPORT VMStructEntry* jvmciHotSpotVMStructs = JVMCIVMStructs::localHotSpotVMStructs;
 934 JNIEXPORT VMTypeEntry* jvmciHotSpotVMTypes = JVMCIVMStructs::localHotSpotVMTypes;
 935 JNIEXPORT VMIntConstantEntry* jvmciHotSpotVMIntConstants = JVMCIVMStructs::localHotSpotVMIntConstants;
 936 JNIEXPORT VMLongConstantEntry* jvmciHotSpotVMLongConstants = JVMCIVMStructs::localHotSpotVMLongConstants;
 937 JNIEXPORT VMAddressEntry* jvmciHotSpotVMAddresses = JVMCIVMStructs::localHotSpotVMAddresses;
 938 }
</pre></body></html>
