<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
a.print { font-size: x-small; }

</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>hotspot Cdiff src/jdk.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/HotSpotMethodData.java</title>
</head>
<body id="SUNWwebrev">
<h2>src/jdk.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/HotSpotMethodData.java</h2>
        <a class="print" href="javascript:print()">Print this page</a>
<pre></pre>
        <pre>
<hr /><span class="oldmarker">*** 411,421 ****</span>
      private static class CounterData extends BitData {
  
          private static final int COUNTER_DATA_SIZE = cellIndexToOffset(1);
          private static final int COUNTER_DATA_COUNT_OFFSET = cellIndexToOffset(config.methodDataCountOffset);
  
<span class="changed">!         public CounterData() {</span>
              super(Tag.CounterData, COUNTER_DATA_SIZE);
          }
  
          protected CounterData(Tag tag, int staticSize) {
              super(tag, staticSize);
<span class="newmarker">--- 411,421 ----</span>
      private static class CounterData extends BitData {
  
          private static final int COUNTER_DATA_SIZE = cellIndexToOffset(1);
          private static final int COUNTER_DATA_COUNT_OFFSET = cellIndexToOffset(config.methodDataCountOffset);
  
<span class="changed">!         CounterData() {</span>
              super(Tag.CounterData, COUNTER_DATA_SIZE);
          }
  
          protected CounterData(Tag tag, int staticSize) {
              super(tag, staticSize);
<hr /><span class="oldmarker">*** 440,450 ****</span>
  
          private static final int JUMP_DATA_SIZE = cellIndexToOffset(2);
          protected static final int TAKEN_COUNT_OFFSET = cellIndexToOffset(config.jumpDataTakenOffset);
          protected static final int TAKEN_DISPLACEMENT_OFFSET = cellIndexToOffset(config.jumpDataDisplacementOffset);
  
<span class="changed">!         public JumpData() {</span>
              super(Tag.JumpData, JUMP_DATA_SIZE);
          }
  
          protected JumpData(Tag tag, int staticSize) {
              super(tag, staticSize);
<span class="newmarker">--- 440,450 ----</span>
  
          private static final int JUMP_DATA_SIZE = cellIndexToOffset(2);
          protected static final int TAKEN_COUNT_OFFSET = cellIndexToOffset(config.jumpDataTakenOffset);
          protected static final int TAKEN_DISPLACEMENT_OFFSET = cellIndexToOffset(config.jumpDataDisplacementOffset);
  
<span class="changed">!         JumpData() {</span>
              super(Tag.JumpData, JUMP_DATA_SIZE);
          }
  
          protected JumpData(Tag tag, int staticSize) {
              super(tag, staticSize);
<hr /><span class="oldmarker">*** 474,484 ****</span>
          final int entries;
          final T[] items;
          final long[] counts;
          final long totalCount;
  
<span class="changed">!         public RawItemProfile(int entries, T[] items, long[] counts, long totalCount) {</span>
              this.entries = entries;
              this.items = items;
              this.counts = counts;
              this.totalCount = totalCount;
          }
<span class="newmarker">--- 474,484 ----</span>
          final int entries;
          final T[] items;
          final long[] counts;
          final long totalCount;
  
<span class="changed">!         RawItemProfile(int entries, T[] items, long[] counts, long totalCount) {</span>
              this.entries = entries;
              this.items = items;
              this.counts = counts;
              this.totalCount = totalCount;
          }
<hr /><span class="oldmarker">*** 585,595 ****</span>
  
      private static class ReceiverTypeData extends AbstractTypeData {
  
          private static final int TYPE_CHECK_DATA_SIZE = cellIndexToOffset(2) + TYPE_DATA_ROW_SIZE * config.typeProfileWidth;
  
<span class="changed">!         public ReceiverTypeData() {</span>
              super(Tag.ReceiverTypeData, TYPE_CHECK_DATA_SIZE);
          }
  
          protected ReceiverTypeData(Tag tag, int staticSize) {
              super(tag, staticSize);
<span class="newmarker">--- 585,595 ----</span>
  
      private static class ReceiverTypeData extends AbstractTypeData {
  
          private static final int TYPE_CHECK_DATA_SIZE = cellIndexToOffset(2) + TYPE_DATA_ROW_SIZE * config.typeProfileWidth;
  
<span class="changed">!         ReceiverTypeData() {</span>
              super(Tag.ReceiverTypeData, TYPE_CHECK_DATA_SIZE);
          }
  
          protected ReceiverTypeData(Tag tag, int staticSize) {
              super(tag, staticSize);
<hr /><span class="oldmarker">*** 610,620 ****</span>
  
          private static final int VIRTUAL_CALL_DATA_SIZE = cellIndexToOffset(2) + TYPE_DATA_ROW_SIZE * (config.typeProfileWidth + config.methodProfileWidth);
          private static final int VIRTUAL_CALL_DATA_FIRST_METHOD_OFFSET = TYPE_DATA_FIRST_TYPE_OFFSET + TYPE_DATA_ROW_SIZE * config.typeProfileWidth;
          private static final int VIRTUAL_CALL_DATA_FIRST_METHOD_COUNT_OFFSET = TYPE_DATA_FIRST_TYPE_COUNT_OFFSET + TYPE_DATA_ROW_SIZE * config.typeProfileWidth;
  
<span class="changed">!         public VirtualCallData() {</span>
              super(Tag.VirtualCallData, VIRTUAL_CALL_DATA_SIZE);
          }
  
          protected VirtualCallData(Tag tag, int staticSize) {
              super(tag, staticSize);
<span class="newmarker">--- 610,620 ----</span>
  
          private static final int VIRTUAL_CALL_DATA_SIZE = cellIndexToOffset(2) + TYPE_DATA_ROW_SIZE * (config.typeProfileWidth + config.methodProfileWidth);
          private static final int VIRTUAL_CALL_DATA_FIRST_METHOD_OFFSET = TYPE_DATA_FIRST_TYPE_OFFSET + TYPE_DATA_ROW_SIZE * config.typeProfileWidth;
          private static final int VIRTUAL_CALL_DATA_FIRST_METHOD_COUNT_OFFSET = TYPE_DATA_FIRST_TYPE_COUNT_OFFSET + TYPE_DATA_ROW_SIZE * config.typeProfileWidth;
  
<span class="changed">!         VirtualCallData() {</span>
              super(Tag.VirtualCallData, VIRTUAL_CALL_DATA_SIZE);
          }
  
          protected VirtualCallData(Tag tag, int staticSize) {
              super(tag, staticSize);
<hr /><span class="oldmarker">*** 712,722 ****</span>
          }
      }
  
      private static class VirtualCallTypeData extends VirtualCallData {
  
<span class="changed">!         public VirtualCallTypeData() {</span>
              super(Tag.VirtualCallTypeData, 0);
          }
  
          @Override
          protected int getDynamicSize(HotSpotMethodData data, int position) {
<span class="newmarker">--- 712,722 ----</span>
          }
      }
  
      private static class VirtualCallTypeData extends VirtualCallData {
  
<span class="changed">!         VirtualCallTypeData() {</span>
              super(Tag.VirtualCallTypeData, 0);
          }
  
          @Override
          protected int getDynamicSize(HotSpotMethodData data, int position) {
<hr /><span class="oldmarker">*** 728,748 ****</span>
      private static class RetData extends CounterData {
  
          private static final int RET_DATA_ROW_SIZE = cellsToBytes(3);
          private static final int RET_DATA_SIZE = cellIndexToOffset(1) + RET_DATA_ROW_SIZE * config.bciProfileWidth;
  
<span class="changed">!         public RetData() {</span>
              super(Tag.RetData, RET_DATA_SIZE);
          }
      }
  
      private static class BranchData extends JumpData {
  
          private static final int BRANCH_DATA_SIZE = cellIndexToOffset(3);
          private static final int NOT_TAKEN_COUNT_OFFSET = cellIndexToOffset(config.branchDataNotTakenOffset);
  
<span class="changed">!         public BranchData() {</span>
              super(Tag.BranchData, BRANCH_DATA_SIZE);
          }
  
          @Override
          public double getBranchTakenProbability(HotSpotMethodData data, int position) {
<span class="newmarker">--- 728,748 ----</span>
      private static class RetData extends CounterData {
  
          private static final int RET_DATA_ROW_SIZE = cellsToBytes(3);
          private static final int RET_DATA_SIZE = cellIndexToOffset(1) + RET_DATA_ROW_SIZE * config.bciProfileWidth;
  
<span class="changed">!         RetData() {</span>
              super(Tag.RetData, RET_DATA_SIZE);
          }
      }
  
      private static class BranchData extends JumpData {
  
          private static final int BRANCH_DATA_SIZE = cellIndexToOffset(3);
          private static final int NOT_TAKEN_COUNT_OFFSET = cellIndexToOffset(config.branchDataNotTakenOffset);
  
<span class="changed">!         BranchData() {</span>
              super(Tag.BranchData, BRANCH_DATA_SIZE);
          }
  
          @Override
          public double getBranchTakenProbability(HotSpotMethodData data, int position) {
<hr /><span class="oldmarker">*** 771,781 ****</span>
      private static class ArrayData extends AbstractMethodData {
  
          private static final int ARRAY_DATA_LENGTH_OFFSET = cellIndexToOffset(config.arrayDataArrayLenOffset);
          protected static final int ARRAY_DATA_START_OFFSET = cellIndexToOffset(config.arrayDataArrayStartOffset);
  
<span class="changed">!         public ArrayData(Tag tag, int staticSize) {</span>
              super(tag, staticSize);
          }
  
          @Override
          protected int getDynamicSize(HotSpotMethodData data, int position) {
<span class="newmarker">--- 771,781 ----</span>
      private static class ArrayData extends AbstractMethodData {
  
          private static final int ARRAY_DATA_LENGTH_OFFSET = cellIndexToOffset(config.arrayDataArrayLenOffset);
          protected static final int ARRAY_DATA_START_OFFSET = cellIndexToOffset(config.arrayDataArrayStartOffset);
  
<span class="changed">!         ArrayData(Tag tag, int staticSize) {</span>
              super(tag, staticSize);
          }
  
          @Override
          protected int getDynamicSize(HotSpotMethodData data, int position) {
<hr /><span class="oldmarker">*** 798,808 ****</span>
          private static final int MULTI_BRANCH_DATA_ROW_SIZE_IN_CELLS = config.multiBranchDataPerCaseCellCount;
          private static final int MULTI_BRANCH_DATA_ROW_SIZE = cellsToBytes(MULTI_BRANCH_DATA_ROW_SIZE_IN_CELLS);
          private static final int MULTI_BRANCH_DATA_FIRST_COUNT_OFFSET = ARRAY_DATA_START_OFFSET + cellsToBytes(0);
          private static final int MULTI_BRANCH_DATA_FIRST_DISPLACEMENT_OFFSET = ARRAY_DATA_START_OFFSET + cellsToBytes(1);
  
<span class="changed">!         public MultiBranchData() {</span>
              super(Tag.MultiBranchData, MULTI_BRANCH_DATA_SIZE);
          }
  
          @Override
          public double[] getSwitchProbabilities(HotSpotMethodData data, int position) {
<span class="newmarker">--- 798,808 ----</span>
          private static final int MULTI_BRANCH_DATA_ROW_SIZE_IN_CELLS = config.multiBranchDataPerCaseCellCount;
          private static final int MULTI_BRANCH_DATA_ROW_SIZE = cellsToBytes(MULTI_BRANCH_DATA_ROW_SIZE_IN_CELLS);
          private static final int MULTI_BRANCH_DATA_FIRST_COUNT_OFFSET = ARRAY_DATA_START_OFFSET + cellsToBytes(0);
          private static final int MULTI_BRANCH_DATA_FIRST_DISPLACEMENT_OFFSET = ARRAY_DATA_START_OFFSET + cellsToBytes(1);
  
<span class="changed">!         MultiBranchData() {</span>
              super(Tag.MultiBranchData, MULTI_BRANCH_DATA_SIZE);
          }
  
          @Override
          public double[] getSwitchProbabilities(HotSpotMethodData data, int position) {
<hr /><span class="oldmarker">*** 880,896 ****</span>
  
      private static class ArgInfoData extends ArrayData {
  
          private static final int ARG_INFO_DATA_SIZE = cellIndexToOffset(1);
  
<span class="changed">!         public ArgInfoData() {</span>
              super(Tag.ArgInfoData, ARG_INFO_DATA_SIZE);
          }
      }
  
      private static class UnknownProfileData extends AbstractMethodData {
<span class="changed">!         public UnknownProfileData(Tag tag) {</span>
              super(tag, 0);
          }
  
          @Override
          protected int getDynamicSize(HotSpotMethodData data, int position) {
<span class="newmarker">--- 880,896 ----</span>
  
      private static class ArgInfoData extends ArrayData {
  
          private static final int ARG_INFO_DATA_SIZE = cellIndexToOffset(1);
  
<span class="changed">!         ArgInfoData() {</span>
              super(Tag.ArgInfoData, ARG_INFO_DATA_SIZE);
          }
      }
  
      private static class UnknownProfileData extends AbstractMethodData {
<span class="changed">!         UnknownProfileData(Tag tag) {</span>
              super(tag, 0);
          }
  
          @Override
          protected int getDynamicSize(HotSpotMethodData data, int position) {
</pre></body></html>

