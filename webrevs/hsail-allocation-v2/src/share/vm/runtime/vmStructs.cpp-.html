<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
a.print { font-size: x-small; }

</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>Old src/share/vm/runtime/vmStructs.cpp</title>
<body id="SUNWwebrev">
<pre>
   1 /*
   2  * Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
  23  */
  24 
  25 #include "precompiled.hpp"
  26 #include "classfile/dictionary.hpp"
  27 #include "classfile/javaClasses.hpp"
  28 #include "classfile/loaderConstraints.hpp"
  29 #include "classfile/placeholders.hpp"
  30 #include "classfile/systemDictionary.hpp"
  31 #include "ci/ciField.hpp"
  32 #include "ci/ciInstance.hpp"
  33 #include "ci/ciObjArrayKlass.hpp"
  34 #include "ci/ciMethodData.hpp"
  35 #include "ci/ciSymbol.hpp"
  36 #include "code/codeBlob.hpp"
  37 #include "code/codeCache.hpp"
  38 #include "code/compressedStream.hpp"
  39 #include "code/location.hpp"
  40 #include "code/nmethod.hpp"
  41 #include "code/pcDesc.hpp"
  42 #include "code/stubs.hpp"
  43 #include "code/vmreg.hpp"
  44 #include "compiler/oopMap.hpp"
  45 #include "compiler/compileBroker.hpp"
  46 #include "gc_implementation/shared/immutableSpace.hpp"
  47 #include "gc_implementation/shared/markSweep.hpp"
  48 #include "gc_implementation/shared/mutableSpace.hpp"
  49 #include "gc_interface/collectedHeap.hpp"
  50 #include "interpreter/bytecodeInterpreter.hpp"
  51 #include "interpreter/bytecodes.hpp"
  52 #include "interpreter/interpreter.hpp"
  53 #include "memory/allocation.hpp"
  54 #include "memory/cardTableRS.hpp"
  55 #include "memory/defNewGeneration.hpp"
  56 #include "memory/freeBlockDictionary.hpp"
  57 #include "memory/genCollectedHeap.hpp"
  58 #include "memory/generation.hpp"
  59 #include "memory/generationSpec.hpp"
  60 #include "memory/heap.hpp"
  61 #include "memory/metachunk.hpp"
  62 #include "memory/referenceType.hpp"
  63 #include "memory/space.hpp"
  64 #include "memory/tenuredGeneration.hpp"
  65 #include "memory/universe.hpp"
  66 #include "memory/watermark.hpp"
  67 #include "oops/arrayKlass.hpp"
  68 #include "oops/arrayOop.hpp"
  69 #include "oops/compiledICHolder.hpp"
  70 #include "oops/constMethod.hpp"
  71 #include "oops/constantPool.hpp"
  72 #include "oops/cpCache.hpp"
  73 #include "oops/instanceClassLoaderKlass.hpp"
  74 #include "oops/instanceKlass.hpp"
  75 #include "oops/instanceMirrorKlass.hpp"
  76 #include "oops/instanceOop.hpp"
  77 #include "oops/klass.hpp"
  78 #include "oops/markOop.hpp"
  79 #include "oops/methodData.hpp"
  80 #include "oops/methodCounters.hpp"
  81 #include "oops/method.hpp"
  82 #include "oops/objArrayKlass.hpp"
  83 #include "oops/objArrayOop.hpp"
  84 #include "oops/oop.inline.hpp"
  85 #include "oops/symbol.hpp"
  86 #include "oops/typeArrayKlass.hpp"
  87 #include "oops/typeArrayOop.hpp"
  88 #include "prims/jvmtiAgentThread.hpp"
  89 #include "runtime/arguments.hpp"
  90 #include "runtime/deoptimization.hpp"
  91 #include "runtime/vframeArray.hpp"
  92 #include "runtime/globals.hpp"
  93 #include "runtime/gpu.hpp"
  94 #include "runtime/java.hpp"
  95 #include "runtime/javaCalls.hpp"
  96 #include "runtime/perfMemory.hpp"
  97 #include "runtime/serviceThread.hpp"
  98 #include "runtime/sharedRuntime.hpp"
  99 #include "runtime/stubRoutines.hpp"
 100 #include "runtime/thread.inline.hpp"
 101 #include "runtime/virtualspace.hpp"
 102 #include "runtime/vmStructs.hpp"
 103 #include "utilities/array.hpp"
 104 #include "utilities/globalDefinitions.hpp"
 105 #include "utilities/hashtable.hpp"
 106 #include "utilities/macros.hpp"
 107 #ifdef GRAAL
 108 # include "graal/vmStructs_graal.hpp"
 109 #endif
 110 #ifdef TARGET_ARCH_x86
 111 # include "vmStructs_x86.hpp"
 112 #endif
 113 #ifdef TARGET_ARCH_sparc
 114 # include "vmStructs_sparc.hpp"
 115 #endif
 116 #ifdef TARGET_ARCH_zero
 117 # include "vmStructs_zero.hpp"
 118 #endif
 119 #ifdef TARGET_ARCH_arm
 120 # include "vmStructs_arm.hpp"
 121 #endif
 122 #ifdef TARGET_ARCH_ppc
 123 # include "vmStructs_ppc.hpp"
 124 #endif
 125 #ifdef TARGET_OS_ARCH_linux_x86
 126 # include "vmStructs_linux_x86.hpp"
 127 #endif
 128 #ifdef TARGET_OS_ARCH_linux_sparc
 129 # include "vmStructs_linux_sparc.hpp"
 130 #endif
 131 #ifdef TARGET_OS_ARCH_linux_zero
 132 # include "vmStructs_linux_zero.hpp"
 133 #endif
 134 #ifdef TARGET_OS_ARCH_solaris_x86
 135 # include "vmStructs_solaris_x86.hpp"
 136 #endif
 137 #ifdef TARGET_OS_ARCH_solaris_sparc
 138 # include "vmStructs_solaris_sparc.hpp"
 139 #endif
 140 #ifdef TARGET_OS_ARCH_windows_x86
 141 # include "vmStructs_windows_x86.hpp"
 142 #endif
 143 #ifdef TARGET_OS_ARCH_linux_arm
 144 # include "vmStructs_linux_arm.hpp"
 145 #endif
 146 #ifdef TARGET_OS_ARCH_linux_ppc
 147 # include "vmStructs_linux_ppc.hpp"
 148 #endif
 149 #ifdef TARGET_OS_ARCH_bsd_x86
 150 # include "vmStructs_bsd_x86.hpp"
 151 #endif
 152 #ifdef TARGET_OS_ARCH_bsd_zero
 153 # include "vmStructs_bsd_zero.hpp"
 154 #endif
 155 
 156 #include "hsail/vm/vmStructs_hsail.hpp"
 157 
 158 #if INCLUDE_ALL_GCS
 159 #include "gc_implementation/concurrentMarkSweep/compactibleFreeListSpace.hpp"
 160 #include "gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.hpp"
 161 #include "gc_implementation/concurrentMarkSweep/concurrentMarkSweepThread.hpp"
 162 #include "gc_implementation/concurrentMarkSweep/vmStructs_cms.hpp"
 163 #include "gc_implementation/parNew/parNewGeneration.hpp"
 164 #include "gc_implementation/parNew/vmStructs_parNew.hpp"
 165 #include "gc_implementation/parallelScavenge/asPSOldGen.hpp"
 166 #include "gc_implementation/parallelScavenge/asPSYoungGen.hpp"
 167 #include "gc_implementation/parallelScavenge/parallelScavengeHeap.hpp"
 168 #include "gc_implementation/parallelScavenge/psOldGen.hpp"
 169 #include "gc_implementation/parallelScavenge/psVirtualspace.hpp"
 170 #include "gc_implementation/parallelScavenge/psYoungGen.hpp"
 171 #include "gc_implementation/parallelScavenge/vmStructs_parallelgc.hpp"
 172 #include "gc_implementation/g1/vmStructs_g1.hpp"
 173 #endif // INCLUDE_ALL_GCS
 174 #ifdef COMPILER2
 175 #include "opto/addnode.hpp"
 176 #include "opto/block.hpp"
 177 #include "opto/callnode.hpp"
 178 #include "opto/cfgnode.hpp"
 179 #include "opto/chaitin.hpp"
 180 #include "opto/divnode.hpp"
 181 #include "opto/locknode.hpp"
 182 #include "opto/loopnode.hpp"
 183 #include "opto/machnode.hpp"
 184 #include "opto/matcher.hpp"
 185 #include "opto/mathexactnode.hpp"
 186 #include "opto/mulnode.hpp"
 187 #include "opto/phaseX.hpp"
 188 #include "opto/parse.hpp"
 189 #include "opto/regalloc.hpp"
 190 #include "opto/rootnode.hpp"
 191 #include "opto/subnode.hpp"
 192 #include "opto/vectornode.hpp"
 193 #ifdef TARGET_ARCH_MODEL_x86_32
 194 # include "adfiles/adGlobals_x86_32.hpp"
 195 #endif
 196 #ifdef TARGET_ARCH_MODEL_x86_64
 197 # include "adfiles/adGlobals_x86_64.hpp"
 198 #endif
 199 #ifdef TARGET_ARCH_MODEL_sparc
 200 # include "adfiles/adGlobals_sparc.hpp"
 201 #endif
 202 #ifdef TARGET_ARCH_MODEL_zero
 203 # include "adfiles/adGlobals_zero.hpp"
 204 #endif
 205 #ifdef TARGET_ARCH_MODEL_arm
 206 # include "adfiles/adGlobals_arm.hpp"
 207 #endif
 208 #ifdef TARGET_ARCH_MODEL_ppc
 209 # include "adfiles/adGlobals_ppc.hpp"
 210 #endif
 211 #endif
 212 
 213 // Note: the cross-product of (c1, c2, product, nonproduct, ...),
 214 // (nonstatic, static), and (unchecked, checked) has not been taken.
 215 // Only the macros currently needed have been defined.
 216 
 217 // A field whose type is not checked is given a null string as the
 218 // type name, indicating an "opaque" type to the serviceability agent.
 219 
 220 // NOTE: there is an interdependency between this file and
 221 // HotSpotTypeDataBase.java, which parses the type strings.
 222 
 223 #ifndef REG_COUNT
 224   #define REG_COUNT 0
 225 #endif
 226 // whole purpose of this function is to work around bug c++/27724 in gcc 4.1.1
 227 // with optimization turned on it doesn't affect produced code
 228 static inline uint64_t cast_uint64_t(size_t x)
 229 {
 230   return x;
 231 }
 232 
 233 #if INCLUDE_JVMTI
 234   #define JVMTI_STRUCTS(static_field) \
 235     static_field(JvmtiExport,                     _can_access_local_variables,                  bool)                                  \
 236     static_field(JvmtiExport,                     _can_hotswap_or_post_breakpoint,              bool)                                  \
 237     static_field(JvmtiExport,                     _can_post_on_exceptions,                      bool)                                  \
 238     static_field(JvmtiExport,                     _can_walk_any_space,                          bool)
 239 #else
 240   #define JVMTI_STRUCTS(static_field)
 241 #endif // INCLUDE_JVMTI
 242 
 243 typedef HashtableEntry&lt;intptr_t, mtInternal&gt;  IntptrHashtableEntry;
 244 typedef Hashtable&lt;intptr_t, mtInternal&gt;       IntptrHashtable;
 245 typedef Hashtable&lt;Symbol*, mtSymbol&gt;          SymbolHashtable;
 246 typedef HashtableEntry&lt;Symbol*, mtClass&gt;      SymbolHashtableEntry;
 247 typedef Hashtable&lt;oop, mtSymbol&gt;              StringHashtable;
 248 typedef TwoOopHashtable&lt;Klass*, mtClass&gt;      KlassTwoOopHashtable;
 249 typedef Hashtable&lt;Klass*, mtClass&gt;            KlassHashtable;
 250 typedef HashtableEntry&lt;Klass*, mtClass&gt;       KlassHashtableEntry;
 251 typedef TwoOopHashtable&lt;Symbol*, mtClass&gt;     SymbolTwoOopHashtable;
 252 typedef BinaryTreeDictionary&lt;Metablock, FreeList&gt; MetablockTreeDictionary;
 253 
 254 //--------------------------------------------------------------------------------
 255 // VM_STRUCTS
 256 //
 257 // This list enumerates all of the fields the serviceability agent
 258 // needs to know about. Be sure to see also the type table below this one.
 259 // NOTE that there are platform-specific additions to this table in
 260 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
 261 
 262 #define VM_STRUCTS(nonstatic_field, \
 263                    static_field, \
 264                    unchecked_nonstatic_field, \
 265                    volatile_nonstatic_field, \
 266                    nonproduct_nonstatic_field, \
 267                    c1_nonstatic_field, \
 268                    c2_nonstatic_field, \
 269                    unchecked_c1_static_field, \
 270                    unchecked_c2_static_field) \
 271                                                                                                                                      \
 272   /******************************************************************/                                                               \
 273   /* OopDesc and Klass hierarchies (NOTE: MethodData* incomplete) */                                                                 \
 274   /******************************************************************/                                                               \
 275                                                                                                                                      \
 276   volatile_nonstatic_field(oopDesc,            _mark,                                         markOop)                               \
 277   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 278   volatile_nonstatic_field(oopDesc,            _metadata._compressed_klass,                   narrowOop)                             \
 279      static_field(oopDesc,                     _bs,                                           BarrierSet*)                           \
 280   nonstatic_field(ArrayKlass,                  _dimension,                                    int)                                   \
 281   volatile_nonstatic_field(ArrayKlass,         _higher_dimension,                             Klass*)                                \
 282   volatile_nonstatic_field(ArrayKlass,         _lower_dimension,                              Klass*)                                \
 283   nonstatic_field(ArrayKlass,                  _vtable_len,                                   int)                                   \
 284   nonstatic_field(ArrayKlass,                  _component_mirror,                             oop)                                   \
 285   nonstatic_field(CompiledICHolder,     _holder_method,                                Method*)                               \
 286   nonstatic_field(CompiledICHolder,     _holder_klass,                                 Klass*)                                \
 287   nonstatic_field(ConstantPool,         _tags,                                         Array&lt;u1&gt;*)                            \
 288   nonstatic_field(ConstantPool,         _cache,                                        ConstantPoolCache*)                    \
 289   nonstatic_field(ConstantPool,         _pool_holder,                                  InstanceKlass*)                        \
 290   nonstatic_field(ConstantPool,         _operands,                                     Array&lt;u2&gt;*)                            \
 291   nonstatic_field(ConstantPool,         _length,                                       int)                                   \
 292   nonstatic_field(ConstantPool,         _resolved_references,                          jobject)                               \
 293   nonstatic_field(ConstantPool,         _reference_map,                                Array&lt;u2&gt;*)                            \
 294   nonstatic_field(ConstantPoolCache,    _length,                                       int)                                   \
 295   nonstatic_field(ConstantPoolCache,    _constant_pool,                                ConstantPool*)                         \
 296   nonstatic_field(InstanceKlass,               _array_klasses,                                Klass*)                                \
 297   nonstatic_field(InstanceKlass,               _methods,                                      Array&lt;Method*&gt;*)                       \
 298   nonstatic_field(InstanceKlass,               _default_methods,                              Array&lt;Method*&gt;*)                       \
 299   nonstatic_field(InstanceKlass,               _local_interfaces,                             Array&lt;Klass*&gt;*)                        \
 300   nonstatic_field(InstanceKlass,               _transitive_interfaces,                        Array&lt;Klass*&gt;*)                        \
 301   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 302   nonstatic_field(InstanceKlass,               _java_fields_count,                            u2)                                    \
 303   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 304   nonstatic_field(InstanceKlass,               _class_loader_data,                            ClassLoaderData*)                      \
 305   nonstatic_field(InstanceKlass,               _source_file_name_index,                            u2)                               \
 306   nonstatic_field(InstanceKlass,               _source_debug_extension,                       char*)                                 \
 307   nonstatic_field(InstanceKlass,               _inner_classes,                               Array&lt;jushort&gt;*)                       \
 308   nonstatic_field(InstanceKlass,               _nonstatic_field_size,                         int)                                   \
 309   nonstatic_field(InstanceKlass,               _static_field_size,                            int)                                   \
 310   nonstatic_field(InstanceKlass,               _static_oop_field_count,                       u2)                                   \
 311   nonstatic_field(InstanceKlass,               _nonstatic_oop_map_size,                       int)                                   \
 312   nonstatic_field(InstanceKlass,               _is_marked_dependent,                          bool)                                  \
 313   nonstatic_field(InstanceKlass,               _minor_version,                                u2)                                    \
 314   nonstatic_field(InstanceKlass,               _major_version,                                u2)                                    \
 315   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
 316   nonstatic_field(InstanceKlass,               _init_thread,                                  Thread*)                               \
 317   nonstatic_field(InstanceKlass,               _vtable_len,                                   int)                                   \
 318   nonstatic_field(InstanceKlass,               _itable_len,                                   int)                                   \
 319   nonstatic_field(InstanceKlass,               _reference_type,                               u1)                                    \
 320   volatile_nonstatic_field(InstanceKlass,      _oop_map_cache,                                OopMapCache*)                          \
 321   nonstatic_field(InstanceKlass,               _jni_ids,                                      JNIid*)                                \
 322   nonstatic_field(InstanceKlass,               _osr_nmethods_head,                            nmethod*)                              \
 323   nonstatic_field(InstanceKlass,               _breakpoints,                                  BreakpointInfo*)                       \
 324   nonstatic_field(InstanceKlass,               _generic_signature_index,                           u2)                               \
 325   nonstatic_field(InstanceKlass,               _methods_jmethod_ids,                          jmethodID*)                            \
 326   volatile_nonstatic_field(InstanceKlass,      _idnum_allocated_count,                        u2)                                    \
 327   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 328   nonstatic_field(InstanceKlass,               _dependencies,                                 nmethodBucket*)                        \
 329   nonstatic_field(nmethodBucket,               _nmethod,                                      nmethod*)                              \
 330   nonstatic_field(nmethodBucket,               _count,                                        int)                                   \
 331   nonstatic_field(nmethodBucket,               _next,                                         nmethodBucket*)                        \
 332   nonstatic_field(InstanceKlass,               _method_ordering,                              Array&lt;int&gt;*)                           \
 333   nonstatic_field(InstanceKlass,               _default_vtable_indices,                       Array&lt;int&gt;*)                           \
 334   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 335   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 336   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 337   nonstatic_field(Klass,                       _primary_supers[0],                            Klass*)                                \
 338   nonstatic_field(Klass,                       _java_mirror,                                  oop)                                   \
 339   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 340   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 341   nonstatic_field(Klass,                       _subklass,                                     Klass*)                                \
 342   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 343   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 344   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
 345   nonstatic_field(Klass,                       _prototype_header,                             markOop)                               \
 346   nonstatic_field(Klass,                       _next_sibling,                                 Klass*)                                \
 347   nonstatic_field(vtableEntry,                 _method,                                       Method*)                               \
 348   nonstatic_field(MethodData,           _size,                                         int)                                   \
 349   nonstatic_field(MethodData,           _method,                                       Method*)                               \
 350   nonstatic_field(MethodData,           _data_size,                                    int)                                   \
 351   nonstatic_field(MethodData,           _data[0],                                      intptr_t)                              \
 352   nonstatic_field(MethodData,           _nof_decompiles,                               uint)                                  \
 353   nonstatic_field(MethodData,           _nof_overflow_recompiles,                      uint)                                  \
 354   nonstatic_field(MethodData,           _nof_overflow_traps,                           uint)                                  \
 355   nonstatic_field(MethodData,           _trap_hist._array[0],                          u1)                                    \
 356   nonstatic_field(MethodData,           _eflags,                                       intx)                                  \
 357   nonstatic_field(MethodData,           _arg_local,                                    intx)                                  \
 358   nonstatic_field(MethodData,           _arg_stack,                                    intx)                                  \
 359   nonstatic_field(MethodData,           _arg_returned,                                 intx)                                  \
 360   nonstatic_field(DataLayout,           _header._struct._tag,                          u1)                                    \
 361   nonstatic_field(DataLayout,           _header._struct._flags,                        u1)                                    \
 362   nonstatic_field(DataLayout,           _header._struct._bci,                          u2)                                    \
 363   nonstatic_field(DataLayout,           _cells[0],                                     intptr_t)                              \
 364   nonstatic_field(MethodCounters,       _interpreter_invocation_count,                 int)                                   \
 365   nonstatic_field(MethodCounters,       _interpreter_throwout_count,                   u2)                                    \
 366   nonstatic_field(MethodCounters,       _number_of_breakpoints,                        u2)                                    \
 367   nonstatic_field(MethodCounters,       _invocation_counter,                           InvocationCounter)                     \
 368   nonstatic_field(MethodCounters,       _backedge_counter,                             InvocationCounter)                     \
 369   nonstatic_field(Method,               _constMethod,                                  ConstMethod*)                          \
 370   nonstatic_field(Method,               _method_data,                                  MethodData*)                           \
 371   nonstatic_field(Method,               _method_counters,                              MethodCounters*)                       \
 372   nonstatic_field(Method,               _access_flags,                                 AccessFlags)                           \
 373   nonstatic_field(Method,               _vtable_index,                                 int)                                   \
 374   nonstatic_field(Method,               _method_size,                                  u2)                                    \
 375   nonstatic_field(Method,               _intrinsic_id,                                 u1)                                    \
 376   nonstatic_field(Method,               _flags,                                        u1)                                    \
 377   nonproduct_nonstatic_field(Method,    _compiled_invocation_count,                    int)                                   \
 378   volatile_nonstatic_field(Method,      _code,                                         nmethod*)                              \
 379   nonstatic_field(Method,               _i2i_entry,                                    address)                               \
 380   nonstatic_field(Method,               _adapter,                                      AdapterHandlerEntry*)                  \
 381   volatile_nonstatic_field(Method,      _from_compiled_entry,                          address)                               \
 382   volatile_nonstatic_field(Method,      _from_interpreted_entry,                       address)                               \
 383   volatile_nonstatic_field(ConstMethod, _fingerprint,                                  uint64_t)                              \
 384   nonstatic_field(ConstMethod,          _constants,                                    ConstantPool*)                         \
 385   nonstatic_field(ConstMethod,          _stackmap_data,                                Array&lt;u1&gt;*)                            \
 386   nonstatic_field(ConstMethod,          _constMethod_size,                             int)                                   \
 387   nonstatic_field(ConstMethod,          _flags,                                        u2)                                    \
 388   nonstatic_field(ConstMethod,          _code_size,                                    u2)                                    \
 389   nonstatic_field(ConstMethod,          _name_index,                                   u2)                                    \
 390   nonstatic_field(ConstMethod,          _signature_index,                              u2)                                    \
 391   nonstatic_field(ConstMethod,          _method_idnum,                                 u2)                                    \
 392   nonstatic_field(ConstMethod,          _max_stack,                                    u2)                                    \
 393   nonstatic_field(ConstMethod,          _max_locals,                                   u2)                                    \
 394   nonstatic_field(ConstMethod,          _size_of_parameters,                           u2)                                    \
 395   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 396   nonstatic_field(ObjArrayKlass,               _bottom_klass,                                 Klass*)                                \
 397   volatile_nonstatic_field(Symbol,             _refcount,                                     short)                                 \
 398   nonstatic_field(Symbol,                      _length,                                       unsigned short)                        \
 399   nonstatic_field(Symbol,                      _identity_hash,                                int)                                   \
 400   unchecked_nonstatic_field(Symbol,            _body,                                         sizeof(jbyte)) /* NOTE: no type */     \
 401   nonstatic_field(Symbol,                      _body[0],                                      jbyte)                                 \
 402   nonstatic_field(TypeArrayKlass,              _max_length,                                   int)                                   \
 403                                                                                                                                      \
 404   /***********************/                                                                                                          \
 405   /* Constant Pool Cache */                                                                                                          \
 406   /***********************/                                                                                                          \
 407                                                                                                                                      \
 408   volatile_nonstatic_field(ConstantPoolCacheEntry,      _indices,                                      intx)                         \
 409   nonstatic_field(ConstantPoolCacheEntry,               _f1,                                           volatile Metadata*)           \
 410   volatile_nonstatic_field(ConstantPoolCacheEntry,      _f2,                                           intx)                         \
 411   volatile_nonstatic_field(ConstantPoolCacheEntry,      _flags,                                        intx)                         \
 412                                                                                                                                      \
 413   /********************************/                                                                                                 \
 414   /* MethodOop-related structures */                                                                                                 \
 415   /********************************/                                                                                                 \
 416                                                                                                                                      \
 417   nonstatic_field(CheckedExceptionElement,     class_cp_index,                                u2)                                    \
 418   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 419   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 420   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 421   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 422   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 423   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 424   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 425   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 426   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 427   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 428   nonstatic_field(BreakpointInfo,              _orig_bytecode,                                Bytecodes::Code)                       \
 429   nonstatic_field(BreakpointInfo,              _bci,                                          int)                                   \
 430   nonstatic_field(BreakpointInfo,              _name_index,                                   u2)                                    \
 431   nonstatic_field(BreakpointInfo,              _signature_index,                              u2)                                    \
 432   nonstatic_field(BreakpointInfo,              _next,                                         BreakpointInfo*)                       \
 433   /***********/                                                                                                                      \
 434   /* JNI IDs */                                                                                                                      \
 435   /***********/                                                                                                                      \
 436                                                                                                                                      \
 437   nonstatic_field(JNIid,                       _holder,                                       Klass*)                                \
 438   nonstatic_field(JNIid,                       _next,                                         JNIid*)                                \
 439   nonstatic_field(JNIid,                       _offset,                                       int)                                   \
 440   /************/                                                                                                                     \
 441   /* Universe */                                                                                                                     \
 442   /************/                                                                                                                     \
 443                                                                                                                                      \
 444      static_field(Universe,                    _boolArrayKlassObj,                            Klass*)                                \
 445      static_field(Universe,                    _byteArrayKlassObj,                            Klass*)                                \
 446      static_field(Universe,                    _charArrayKlassObj,                            Klass*)                                \
 447      static_field(Universe,                    _intArrayKlassObj,                             Klass*)                                \
 448      static_field(Universe,                    _shortArrayKlassObj,                           Klass*)                                \
 449      static_field(Universe,                    _longArrayKlassObj,                            Klass*)                                \
 450      static_field(Universe,                    _singleArrayKlassObj,                          Klass*)                                \
 451      static_field(Universe,                    _doubleArrayKlassObj,                          Klass*)                                \
 452      static_field(Universe,                    _mirrors[0],                                   oop)                                   \
 453      static_field(Universe,                    _main_thread_group,                            oop)                                   \
 454      static_field(Universe,                    _system_thread_group,                          oop)                                   \
 455      static_field(Universe,                    _the_empty_class_klass_array,                  objArrayOop)                           \
 456      static_field(Universe,                    _null_ptr_exception_instance,                  oop)                                   \
 457      static_field(Universe,                    _arithmetic_exception_instance,                oop)                                   \
 458      static_field(Universe,                    _vm_exception,                                 oop)                                   \
 459      static_field(Universe,                    _collectedHeap,                                CollectedHeap*)                        \
 460      static_field(Universe,                    _base_vtable_size,                             int)                                   \
 461      static_field(Universe,                    _bootstrapping,                                bool)                                  \
 462      static_field(Universe,                    _fully_initialized,                            bool)                                  \
 463      static_field(Universe,                    _verify_count,                                 int)                                   \
 464      static_field(Universe,                    _non_oop_bits,                                 intptr_t)                              \
 465      static_field(Universe,                    _narrow_oop._base,                             address)                               \
 466      static_field(Universe,                    _narrow_oop._shift,                            int)                                   \
 467      static_field(Universe,                    _narrow_oop._use_implicit_null_checks,         bool)                                  \
 468      static_field(Universe,                    _narrow_klass._base,                           address)                               \
 469      static_field(Universe,                    _narrow_klass._shift,                          int)                                   \
 470                                                                                                                                      \
 471   /******/                                                                                                                           \
 472   /* os */                                                                                                                           \
 473   /******/                                                                                                                           \
 474                                                                                                                                      \
 475      static_field(os,                          _polling_page,                                 address)                               \
 476                                                                                                                                      \
 477   /**********************************************************************************/                                               \
 478   /* Generation and Space hierarchies                                               */                                               \
 479   /**********************************************************************************/                                               \
 480                                                                                                                                      \
 481   unchecked_nonstatic_field(ageTable,          sizes,                                         sizeof(ageTable::sizes))               \
 482                                                                                                                                      \
 483   nonstatic_field(BarrierSet,                  _max_covered_regions,                          int)                                   \
 484   nonstatic_field(BarrierSet,                  _kind,                                         BarrierSet::Name)                      \
 485   nonstatic_field(BlockOffsetTable,            _bottom,                                       HeapWord*)                             \
 486   nonstatic_field(BlockOffsetTable,            _end,                                          HeapWord*)                             \
 487                                                                                                                                      \
 488   nonstatic_field(BlockOffsetSharedArray,      _reserved,                                     MemRegion)                             \
 489   nonstatic_field(BlockOffsetSharedArray,      _end,                                          HeapWord*)                             \
 490   nonstatic_field(BlockOffsetSharedArray,      _vs,                                           VirtualSpace)                          \
 491   nonstatic_field(BlockOffsetSharedArray,      _offset_array,                                 u_char*)                               \
 492                                                                                                                                      \
 493   nonstatic_field(BlockOffsetArray,            _array,                                        BlockOffsetSharedArray*)               \
 494   nonstatic_field(BlockOffsetArray,            _sp,                                           Space*)                                \
 495   nonstatic_field(BlockOffsetArrayContigSpace, _next_offset_threshold,                        HeapWord*)                             \
 496   nonstatic_field(BlockOffsetArrayContigSpace, _next_offset_index,                            size_t)                                \
 497                                                                                                                                      \
 498   nonstatic_field(BlockOffsetArrayNonContigSpace, _unallocated_block,                         HeapWord*)                             \
 499                                                                                                                                      \
 500   nonstatic_field(CardGeneration,              _rs,                                           GenRemSet*)                            \
 501   nonstatic_field(CardGeneration,              _bts,                                          BlockOffsetSharedArray*)               \
 502   nonstatic_field(CardGeneration,              _shrink_factor,                                size_t)                                \
 503   nonstatic_field(CardGeneration,              _capacity_at_prologue,                         size_t)                                \
 504   nonstatic_field(CardGeneration,              _used_at_prologue,                             size_t)                                \
 505                                                                                                                                      \
 506   nonstatic_field(CardTableModRefBS,           _whole_heap,                                   const MemRegion)                       \
 507   nonstatic_field(CardTableModRefBS,           _guard_index,                                  const size_t)                          \
 508   nonstatic_field(CardTableModRefBS,           _last_valid_index,                             const size_t)                          \
 509   nonstatic_field(CardTableModRefBS,           _page_size,                                    const size_t)                          \
 510   nonstatic_field(CardTableModRefBS,           _byte_map_size,                                const size_t)                          \
 511   nonstatic_field(CardTableModRefBS,           _byte_map,                                     jbyte*)                                \
 512   nonstatic_field(CardTableModRefBS,           _cur_covered_regions,                          int)                                   \
 513   nonstatic_field(CardTableModRefBS,           _covered,                                      MemRegion*)                            \
 514   nonstatic_field(CardTableModRefBS,           _committed,                                    MemRegion*)                            \
 515   nonstatic_field(CardTableModRefBS,           _guard_region,                                 MemRegion)                             \
 516   nonstatic_field(CardTableModRefBS,           byte_map_base,                                 jbyte*)                                \
 517                                                                                                                                      \
 518   nonstatic_field(CardTableRS,                 _ct_bs,                                        CardTableModRefBSForCTRS*)             \
 519                                                                                                                                      \
 520   nonstatic_field(CollectedHeap,               _reserved,                                     MemRegion)                             \
 521   nonstatic_field(CollectedHeap,               _barrier_set,                                  BarrierSet*)                           \
 522   nonstatic_field(CollectedHeap,               _defer_initial_card_mark,                      bool)                                  \
 523   nonstatic_field(CollectedHeap,               _is_gc_active,                                 bool)                                  \
 524   nonstatic_field(CollectedHeap,               _total_collections,                            unsigned int)                          \
 525   nonstatic_field(CompactibleSpace,            _compaction_top,                               HeapWord*)                             \
 526   nonstatic_field(CompactibleSpace,            _first_dead,                                   HeapWord*)                             \
 527   nonstatic_field(CompactibleSpace,            _end_of_live,                                  HeapWord*)                             \
 528                                                                                                                                      \
 529                                                                                                                                      \
 530   nonstatic_field(ContiguousSpace,             _top,                                          HeapWord*)                             \
 531   nonstatic_field(ContiguousSpace,             _concurrent_iteration_safe_limit,              HeapWord*)                             \
 532   nonstatic_field(ContiguousSpace,             _saved_mark_word,                              HeapWord*)                             \
 533                                                                                                                                      \
 534   nonstatic_field(DefNewGeneration,            _next_gen,                                     Generation*)                           \
 535   nonstatic_field(DefNewGeneration,            _tenuring_threshold,                           uint)                                  \
 536   nonstatic_field(DefNewGeneration,            _age_table,                                    ageTable)                              \
 537   nonstatic_field(DefNewGeneration,            _eden_space,                                   EdenSpace*)                            \
 538   nonstatic_field(DefNewGeneration,            _from_space,                                   ContiguousSpace*)                      \
 539   nonstatic_field(DefNewGeneration,            _to_space,                                     ContiguousSpace*)                      \
 540                                                                                                                                      \
 541   nonstatic_field(EdenSpace,                   _gen,                                          DefNewGeneration*)                     \
 542                                                                                                                                      \
 543   nonstatic_field(Generation,                  _reserved,                                     MemRegion)                             \
 544   nonstatic_field(Generation,                  _virtual_space,                                VirtualSpace)                          \
 545   nonstatic_field(Generation,                  _level,                                        int)                                   \
 546   nonstatic_field(Generation,                  _stat_record,                                  Generation::StatRecord)                \
 547                                                                                                                                      \
 548   nonstatic_field(Generation::StatRecord,      invocations,                                   int)                                   \
 549   nonstatic_field(Generation::StatRecord,      accumulated_time,                              elapsedTimer)                          \
 550                                                                                                                                      \
 551   nonstatic_field(GenerationSpec,              _name,                                         Generation::Name)                      \
 552   nonstatic_field(GenerationSpec,              _init_size,                                    size_t)                                \
 553   nonstatic_field(GenerationSpec,              _max_size,                                     size_t)                                \
 554                                                                                                                                      \
 555     static_field(GenCollectedHeap,             _gch,                                          GenCollectedHeap*)                     \
 556  nonstatic_field(GenCollectedHeap,             _n_gens,                                       int)                                   \
 557  unchecked_nonstatic_field(GenCollectedHeap,   _gens,                                         sizeof(GenCollectedHeap::_gens)) /* NOTE: no type */ \
 558   nonstatic_field(GenCollectedHeap,            _gen_specs,                                    GenerationSpec**)                      \
 559                                                                                                                                      \
 560   nonstatic_field(HeapWord,                    i,                                             char*)                                 \
 561                                                                                                                                      \
 562   nonstatic_field(MemRegion,                   _start,                                        HeapWord*)                             \
 563   nonstatic_field(MemRegion,                   _word_size,                                    size_t)                                \
 564                                                                                                                                      \
 565   nonstatic_field(OffsetTableContigSpace,      _offsets,                                      BlockOffsetArray)                      \
 566                                                                                                                                      \
 567   nonstatic_field(OneContigSpaceCardGeneration, _min_heap_delta_bytes,                        size_t)                                \
 568   nonstatic_field(OneContigSpaceCardGeneration, _the_space,                                   ContiguousSpace*)                      \
 569   nonstatic_field(OneContigSpaceCardGeneration, _last_gc,                                     WaterMark)                             \
 570                                                                                                                                      \
 571                                                                                                                                      \
 572                                                                                                                                      \
 573   nonstatic_field(Space,                       _bottom,                                       HeapWord*)                             \
 574   nonstatic_field(Space,                       _end,                                          HeapWord*)                             \
 575                                                                                                                                      \
 576   nonstatic_field(ThreadLocalAllocBuffer,      _start,                                        HeapWord*)                             \
 577   nonstatic_field(ThreadLocalAllocBuffer,      _top,                                          HeapWord*)                             \
 578   nonstatic_field(ThreadLocalAllocBuffer,      _end,                                          HeapWord*)                             \
 579   nonstatic_field(ThreadLocalAllocBuffer,      _desired_size,                                 size_t)                                \
 580   nonstatic_field(ThreadLocalAllocBuffer,      _refill_waste_limit,                           size_t)                                \
 581      static_field(ThreadLocalAllocBuffer,      _target_refills,                               unsigned)                              \
 582   nonstatic_field(ThreadLocalAllocBuffer,      _number_of_refills,                            unsigned)                              \
 583   nonstatic_field(ThreadLocalAllocBuffer,      _fast_refill_waste,                            unsigned)                              \
 584   nonstatic_field(ThreadLocalAllocBuffer,      _slow_refill_waste,                            unsigned)                              \
 585   nonstatic_field(ThreadLocalAllocBuffer,      _gc_waste,                                     unsigned)                              \
 586   nonstatic_field(ThreadLocalAllocBuffer,      _slow_allocations,                             unsigned)                              \
 587   nonstatic_field(VirtualSpace,                _low_boundary,                                 char*)                                 \
 588   nonstatic_field(VirtualSpace,                _high_boundary,                                char*)                                 \
 589   nonstatic_field(VirtualSpace,                _low,                                          char*)                                 \
 590   nonstatic_field(VirtualSpace,                _high,                                         char*)                                 \
 591   nonstatic_field(VirtualSpace,                _lower_high,                                   char*)                                 \
 592   nonstatic_field(VirtualSpace,                _middle_high,                                  char*)                                 \
 593   nonstatic_field(VirtualSpace,                _upper_high,                                   char*)                                 \
 594   nonstatic_field(WaterMark,                   _point,                                        HeapWord*)                             \
 595   nonstatic_field(WaterMark,                   _space,                                        Space*)                                \
 596                                                                                                                                      \
 597   /************************/                                                                                                         \
 598   /* PerfMemory - jvmstat */                                                                                                         \
 599   /************************/                                                                                                         \
 600                                                                                                                                      \
 601   nonstatic_field(PerfDataPrologue,            magic,                                         jint)                                  \
 602   nonstatic_field(PerfDataPrologue,            byte_order,                                    jbyte)                                 \
 603   nonstatic_field(PerfDataPrologue,            major_version,                                 jbyte)                                 \
 604   nonstatic_field(PerfDataPrologue,            minor_version,                                 jbyte)                                 \
 605   nonstatic_field(PerfDataPrologue,            accessible,                                    jbyte)                                 \
 606   nonstatic_field(PerfDataPrologue,            used,                                          jint)                                  \
 607   nonstatic_field(PerfDataPrologue,            overflow,                                      jint)                                  \
 608   nonstatic_field(PerfDataPrologue,            mod_time_stamp,                                jlong)                                 \
 609   nonstatic_field(PerfDataPrologue,            entry_offset,                                  jint)                                  \
 610   nonstatic_field(PerfDataPrologue,            num_entries,                                   jint)                                  \
 611                                                                                                                                      \
 612   nonstatic_field(PerfDataEntry,               entry_length,                                  jint)                                  \
 613   nonstatic_field(PerfDataEntry,               name_offset,                                   jint)                                  \
 614   nonstatic_field(PerfDataEntry,               vector_length,                                 jint)                                  \
 615   nonstatic_field(PerfDataEntry,               data_type,                                     jbyte)                                 \
 616   nonstatic_field(PerfDataEntry,               flags,                                         jbyte)                                 \
 617   nonstatic_field(PerfDataEntry,               data_units,                                    jbyte)                                 \
 618   nonstatic_field(PerfDataEntry,               data_variability,                              jbyte)                                 \
 619   nonstatic_field(PerfDataEntry,               data_offset,                                   jint)                                  \
 620                                                                                                                                      \
 621      static_field(PerfMemory,                  _start,                                        char*)                                 \
 622      static_field(PerfMemory,                  _end,                                          char*)                                 \
 623      static_field(PerfMemory,                  _top,                                          char*)                                 \
 624      static_field(PerfMemory,                  _capacity,                                     size_t)                                \
 625      static_field(PerfMemory,                  _prologue,                                     PerfDataPrologue*)                     \
 626      static_field(PerfMemory,                  _initialized,                                  jint)                                  \
 627                                                                                                                                      \
 628   /***************/                                                                                                                  \
 629   /* SymbolTable */                                                                                                                  \
 630   /***************/                                                                                                                  \
 631                                                                                                                                      \
 632      static_field(SymbolTable,                  _the_table,                                   SymbolTable*)                          \
 633                                                                                                                                      \
 634   /***************/                                                                                                                  \
 635   /* StringTable */                                                                                                                  \
 636   /***************/                                                                                                                  \
 637                                                                                                                                      \
 638      static_field(StringTable,                  _the_table,                                   StringTable*)                          \
 639                                                                                                                                      \
 640   /********************/                                                                                                             \
 641   /* SystemDictionary */                                                                                                             \
 642   /********************/                                                                                                             \
 643                                                                                                                                      \
 644       static_field(SystemDictionary,            _dictionary,                                   Dictionary*)                          \
 645       static_field(SystemDictionary,            _placeholders,                                 PlaceholderTable*)                    \
 646       static_field(SystemDictionary,            _shared_dictionary,                            Dictionary*)                          \
 647       static_field(SystemDictionary,            _system_loader_lock_obj,                       oop)                                  \
 648       static_field(SystemDictionary,            _loader_constraints,                           LoaderConstraintTable*)               \
 649       static_field(SystemDictionary,            WK_KLASS(Object_klass),                        Klass*)                               \
 650       static_field(SystemDictionary,            WK_KLASS(String_klass),                        Klass*)                               \
 651       static_field(SystemDictionary,            WK_KLASS(Class_klass),                         Klass*)                               \
 652       static_field(SystemDictionary,            WK_KLASS(Cloneable_klass),                     Klass*)                               \
 653       static_field(SystemDictionary,            WK_KLASS(ClassLoader_klass),                   Klass*)                               \
 654       static_field(SystemDictionary,            WK_KLASS(Serializable_klass),                  Klass*)                               \
 655       static_field(SystemDictionary,            WK_KLASS(System_klass),                        Klass*)                               \
 656       static_field(SystemDictionary,            WK_KLASS(Throwable_klass),                     Klass*)                               \
 657       static_field(SystemDictionary,            WK_KLASS(ThreadDeath_klass),                   Klass*)                               \
 658       static_field(SystemDictionary,            WK_KLASS(Error_klass),                         Klass*)                               \
 659       static_field(SystemDictionary,            WK_KLASS(Exception_klass),                     Klass*)                               \
 660       static_field(SystemDictionary,            WK_KLASS(RuntimeException_klass),              Klass*)                               \
 661       static_field(SystemDictionary,            WK_KLASS(ClassNotFoundException_klass),        Klass*)                               \
 662       static_field(SystemDictionary,            WK_KLASS(NoClassDefFoundError_klass),          Klass*)                               \
 663       static_field(SystemDictionary,            WK_KLASS(LinkageError_klass),                  Klass*)                               \
 664       static_field(SystemDictionary,            WK_KLASS(ClassCastException_klass),            Klass*)                               \
 665       static_field(SystemDictionary,            WK_KLASS(ArrayStoreException_klass),           Klass*)                               \
 666       static_field(SystemDictionary,            WK_KLASS(VirtualMachineError_klass),           Klass*)                               \
 667       static_field(SystemDictionary,            WK_KLASS(OutOfMemoryError_klass),              Klass*)                               \
 668       static_field(SystemDictionary,            WK_KLASS(StackOverflowError_klass),            Klass*)                               \
 669       static_field(SystemDictionary,            WK_KLASS(ProtectionDomain_klass),              Klass*)                               \
 670       static_field(SystemDictionary,            WK_KLASS(AccessControlContext_klass),          Klass*)                               \
 671       static_field(SystemDictionary,            WK_KLASS(Reference_klass),                     Klass*)                               \
 672       static_field(SystemDictionary,            WK_KLASS(SoftReference_klass),                 Klass*)                               \
 673       static_field(SystemDictionary,            WK_KLASS(WeakReference_klass),                 Klass*)                               \
 674       static_field(SystemDictionary,            WK_KLASS(FinalReference_klass),                Klass*)                               \
 675       static_field(SystemDictionary,            WK_KLASS(PhantomReference_klass),              Klass*)                               \
 676       static_field(SystemDictionary,            WK_KLASS(Finalizer_klass),                     Klass*)                               \
 677       static_field(SystemDictionary,            WK_KLASS(Thread_klass),                        Klass*)                               \
 678       static_field(SystemDictionary,            WK_KLASS(ThreadGroup_klass),                   Klass*)                               \
 679       static_field(SystemDictionary,            WK_KLASS(Properties_klass),                    Klass*)                               \
 680       static_field(SystemDictionary,            WK_KLASS(StringBuffer_klass),                  Klass*)                               \
 681       static_field(SystemDictionary,            WK_KLASS(MethodHandle_klass),                  Klass*)                               \
 682       static_field(SystemDictionary,            _box_klasses[0],                               Klass*)                               \
 683       static_field(SystemDictionary,            _java_system_loader,                           oop)                                  \
 684                                                                                                                                      \
 685   /*************/                                                                                                                    \
 686   /* vmSymbols */                                                                                                                    \
 687   /*************/                                                                                                                    \
 688                                                                                                                                      \
 689       static_field(vmSymbols,                   _symbols[0],                                  Symbol*)                               \
 690                                                                                                                                      \
 691   /*******************/                                                                                                              \
 692   /* HashtableBucket */                                                                                                              \
 693   /*******************/                                                                                                              \
 694                                                                                                                                      \
 695   nonstatic_field(HashtableBucket&lt;mtInternal&gt;,  _entry,                                        BasicHashtableEntry&lt;mtInternal&gt;*)     \
 696                                                                                                                                      \
 697   /******************/                                                                                                               \
 698   /* HashtableEntry */                                                                                                               \
 699   /******************/                                                                                                               \
 700                                                                                                                                      \
 701   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _next,                                     BasicHashtableEntry&lt;mtInternal&gt;*)      \
 702   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _hash,                                     unsigned int)                          \
 703   nonstatic_field(IntptrHashtableEntry,            _literal,                                  intptr_t)                              \
 704                                                                                                                                      \
 705   /*************/                                                                                                                    \
 706   /* Hashtable */                                                                                                                    \
 707   /*************/                                                                                                                    \
 708                                                                                                                                      \
 709   nonstatic_field(BasicHashtable&lt;mtInternal&gt;, _table_size,                                   int)                                   \
 710   nonstatic_field(BasicHashtable&lt;mtInternal&gt;, _buckets,                                      HashtableBucket&lt;mtInternal&gt;*)          \
 711   nonstatic_field(BasicHashtable&lt;mtInternal&gt;, _free_list,                                    BasicHashtableEntry&lt;mtInternal&gt;*)      \
 712   nonstatic_field(BasicHashtable&lt;mtInternal&gt;, _first_free_entry,                             char*)                                 \
 713   nonstatic_field(BasicHashtable&lt;mtInternal&gt;, _end_block,                                    char*)                                 \
 714   nonstatic_field(BasicHashtable&lt;mtInternal&gt;, _entry_size,                                   int)                                   \
 715                                                                                                                                      \
 716   /*******************/                                                                                                              \
 717   /* DictionaryEntry */                                                                                                              \
 718   /*******************/                                                                                                              \
 719                                                                                                                                      \
 720   nonstatic_field(DictionaryEntry,             _loader_data,                                  ClassLoaderData*)                      \
 721   nonstatic_field(DictionaryEntry,             _pd_set,                                       ProtectionDomainEntry*)                \
 722                                                                                                                                      \
 723   /********************/                                                                                                             \
 724                                                                                                                                      \
 725   nonstatic_field(PlaceholderEntry,            _loader_data,                                  ClassLoaderData*)                      \
 726                                                                                                                                      \
 727   /**************************/                                                                                                       \
 728   /* ProtectionDomainEntry  */                                                                                                       \
 729   /**************************/                                                                                                       \
 730                                                                                                                                      \
 731   nonstatic_field(ProtectionDomainEntry,       _next,                                         ProtectionDomainEntry*)                \
 732   nonstatic_field(ProtectionDomainEntry,       _pd_cache,                                     ProtectionDomainCacheEntry*)           \
 733                                                                                                                                      \
 734   /*******************************/                                                                                                  \
 735   /* ProtectionDomainCacheEntry  */                                                                                                  \
 736   /*******************************/                                                                                                  \
 737                                                                                                                                      \
 738   nonstatic_field(ProtectionDomainCacheEntry,  _literal,                                      oop)                                   \
 739                                                                                                                                      \
 740   /*************************/                                                                                                        \
 741   /* LoaderConstraintEntry */                                                                                                        \
 742   /*************************/                                                                                                        \
 743                                                                                                                                      \
 744   nonstatic_field(LoaderConstraintEntry,       _name,                                         Symbol*)                               \
 745   nonstatic_field(LoaderConstraintEntry,       _num_loaders,                                  int)                                   \
 746   nonstatic_field(LoaderConstraintEntry,       _max_loaders,                                  int)                                   \
 747   nonstatic_field(LoaderConstraintEntry,       _loaders,                                      ClassLoaderData**)                     \
 748                                                                                                                                      \
 749   nonstatic_field(ClassLoaderData,             _class_loader,                                 oop)                                   \
 750   nonstatic_field(ClassLoaderData,             _next,                                         ClassLoaderData*)                      \
 751                                                                                                                                      \
 752   static_field(ClassLoaderDataGraph,           _head,                                         ClassLoaderData*)                      \
 753                                                                                                                                      \
 754   /**********/                                                                                                                       \
 755   /* Arrays */                                                                                                                       \
 756   /**********/                                                                                                                       \
 757                                                                                                                                      \
 758   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                       int)                                   \
 759   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                                      Klass*)                                \
 760                                                                                                                                      \
 761   /*******************/                                                                                                              \
 762   /* GrowableArrays  */                                                                                                              \
 763   /*******************/                                                                                                              \
 764                                                                                                                                      \
 765   nonstatic_field(GenericGrowableArray,        _len,                                          int)                                   \
 766   nonstatic_field(GenericGrowableArray,        _max,                                          int)                                   \
 767   nonstatic_field(GenericGrowableArray,        _arena,                                        Arena*)                                \
 768   nonstatic_field(GrowableArray&lt;int&gt;,          _data,                                         int*)                                  \
 769                                                                                                                                      \
 770   /********************************/                                                                                                 \
 771   /* CodeCache (NOTE: incomplete) */                                                                                                 \
 772   /********************************/                                                                                                 \
 773                                                                                                                                      \
 774      static_field(CodeCache,                   _heap,                                         CodeHeap*)                             \
 775      static_field(CodeCache,                   _scavenge_root_nmethods,                       nmethod*)                              \
 776                                                                                                                                      \
 777   /*******************************/                                                                                                  \
 778   /* CodeHeap (NOTE: incomplete) */                                                                                                  \
 779   /*******************************/                                                                                                  \
 780                                                                                                                                      \
 781   nonstatic_field(CodeHeap,                    _memory,                                       VirtualSpace)                          \
 782   nonstatic_field(CodeHeap,                    _segmap,                                       VirtualSpace)                          \
 783   nonstatic_field(CodeHeap,                    _log2_segment_size,                            int)                                   \
 784   nonstatic_field(HeapBlock,                   _header,                                       HeapBlock::Header)                     \
 785   nonstatic_field(HeapBlock::Header,           _length,                                       size_t)                                \
 786   nonstatic_field(HeapBlock::Header,           _used,                                         bool)                                  \
 787                                                                                                                                      \
 788   /**********************************/                                                                                               \
 789   /* Interpreter (NOTE: incomplete) */                                                                                               \
 790   /**********************************/                                                                                               \
 791                                                                                                                                      \
 792      static_field(AbstractInterpreter,         _code,                                         StubQueue*)                            \
 793                                                                                                                                      \
 794   /****************************/                                                                                                     \
 795   /* Stubs (NOTE: incomplete) */                                                                                                     \
 796   /****************************/                                                                                                     \
 797                                                                                                                                      \
 798   nonstatic_field(StubQueue,                   _stub_buffer,                                  address)                               \
 799   nonstatic_field(StubQueue,                   _buffer_limit,                                 int)                                   \
 800   nonstatic_field(StubQueue,                   _queue_begin,                                  int)                                   \
 801   nonstatic_field(StubQueue,                   _queue_end,                                    int)                                   \
 802   nonstatic_field(StubQueue,                   _number_of_stubs,                              int)                                   \
 803   nonstatic_field(InterpreterCodelet,          _size,                                         int)                                   \
 804   nonstatic_field(InterpreterCodelet,          _description,                                  const char*)                           \
 805   nonstatic_field(InterpreterCodelet,          _bytecode,                                     Bytecodes::Code)                       \
 806                                                                                                                                      \
 807   /***********************************/                                                                                              \
 808   /* StubRoutines (NOTE: incomplete) */                                                                                              \
 809   /***********************************/                                                                                              \
 810                                                                                                                                      \
 811      static_field(StubRoutines,                _verify_oop_count,                             jint)                                  \
 812      static_field(StubRoutines,                _call_stub_return_address,                     address)                               \
 813      static_field(StubRoutines,                _aescrypt_encryptBlock,                        address)                               \
 814      static_field(StubRoutines,                _aescrypt_decryptBlock,                        address)                               \
 815      static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,          address)                               \
 816      static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,          address)                               \
 817      static_field(StubRoutines,                _updateBytesCRC32,                             address)                               \
 818      static_field(StubRoutines,                _crc_table_adr,                                address)                               \
 819      static_field(StubRoutines,                _jbyte_arraycopy,                              address)                               \
 820      static_field(StubRoutines,                _jshort_arraycopy,                             address)                               \
 821      static_field(StubRoutines,                _jint_arraycopy,                               address)                               \
 822      static_field(StubRoutines,                _jlong_arraycopy,                              address)                               \
 823      static_field(StubRoutines,                _oop_arraycopy,                                address)                               \
 824      static_field(StubRoutines,                _oop_arraycopy_uninit,                         address)                               \
 825      static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                     address)                               \
 826      static_field(StubRoutines,                _jshort_disjoint_arraycopy,                    address)                               \
 827      static_field(StubRoutines,                _jint_disjoint_arraycopy,                      address)                               \
 828      static_field(StubRoutines,                _jlong_disjoint_arraycopy,                     address)                               \
 829      static_field(StubRoutines,                _oop_disjoint_arraycopy,                       address)                               \
 830      static_field(StubRoutines,                _oop_disjoint_arraycopy_uninit,                address)                               \
 831      static_field(StubRoutines,                _arrayof_jbyte_arraycopy,                      address)                               \
 832      static_field(StubRoutines,                _arrayof_jshort_arraycopy,                     address)                               \
 833      static_field(StubRoutines,                _arrayof_jint_arraycopy,                       address)                               \
 834      static_field(StubRoutines,                _arrayof_jlong_arraycopy,                      address)                               \
 835      static_field(StubRoutines,                _arrayof_oop_arraycopy,                        address)                               \
 836      static_field(StubRoutines,                _arrayof_oop_arraycopy_uninit,                 address)                               \
 837      static_field(StubRoutines,                _arrayof_jbyte_disjoint_arraycopy,             address)                               \
 838      static_field(StubRoutines,                _arrayof_jshort_disjoint_arraycopy,            address)                               \
 839      static_field(StubRoutines,                _arrayof_jint_disjoint_arraycopy,              address)                               \
 840      static_field(StubRoutines,                _arrayof_jlong_disjoint_arraycopy,             address)                               \
 841      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy,               address)                               \
 842      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy_uninit,        address)                               \
 843      static_field(StubRoutines,                _checkcast_arraycopy,                          address)                               \
 844      static_field(StubRoutines,                _checkcast_arraycopy_uninit,                   address)                               \
 845      static_field(StubRoutines,                _unsafe_arraycopy,                             address)                               \
 846      static_field(StubRoutines,                _generic_arraycopy,                            address)                               \
 847                                                                                                                                      \
 848   /*****************/                                                                                                                \
 849   /* SharedRuntime */                                                                                                                \
 850   /*****************/                                                                                                                \
 851                                                                                                                                      \
 852      static_field(SharedRuntime,               _ic_miss_blob,                                 RuntimeStub*)                          \
 853                                                                                                                                      \
 854   /***************************************/                                                                                          \
 855   /* PcDesc and other compiled code info */                                                                                          \
 856   /***************************************/                                                                                          \
 857                                                                                                                                      \
 858   nonstatic_field(PcDesc,                      _pc_offset,                                    int)                                   \
 859   nonstatic_field(PcDesc,                      _scope_decode_offset,                          int)                                   \
 860   nonstatic_field(PcDesc,                      _obj_decode_offset,                            int)                                   \
 861   nonstatic_field(PcDesc,                      _flags,                                        int)                                   \
 862                                                                                                                                      \
 863   /***************************************************/                                                                              \
 864   /* CodeBlobs (NOTE: incomplete, but only a little) */                                                                              \
 865   /***************************************************/                                                                              \
 866                                                                                                                                      \
 867   nonstatic_field(CodeBlob,                    _name,                                         const char*)                           \
 868   nonstatic_field(CodeBlob,                    _size,                                         int)                                   \
 869   nonstatic_field(CodeBlob,                    _header_size,                                  int)                                   \
 870   nonstatic_field(CodeBlob,                    _relocation_size,                              int)                                   \
 871   nonstatic_field(CodeBlob,                    _content_offset,                               int)                                   \
 872   nonstatic_field(CodeBlob,                    _code_offset,                                  int)                                   \
 873   nonstatic_field(CodeBlob,                    _frame_complete_offset,                        int)                                   \
 874   nonstatic_field(CodeBlob,                    _data_offset,                                  int)                                   \
 875   nonstatic_field(CodeBlob,                    _frame_size,                                   int)                                   \
 876   nonstatic_field(CodeBlob,                    _oop_maps,                                     OopMapSet*)                            \
 877                                                                                                                                      \
 878   nonstatic_field(RuntimeStub,                 _caller_must_gc_arguments,                     bool)                                  \
 879                                                                                                                                      \
 880   /**************************************************/                                                                               \
 881   /* NMethods (NOTE: incomplete, but only a little) */                                                                               \
 882   /**************************************************/                                                                               \
 883                                                                                                                                      \
 884   nonstatic_field(nmethod,             _method,                                       Method*)                        \
 885   nonstatic_field(nmethod,             _entry_bci,                                    int)                                   \
 886   nonstatic_field(nmethod,             _osr_link,                                     nmethod*)                              \
 887   nonstatic_field(nmethod,             _scavenge_root_link,                           nmethod*)                              \
 888   nonstatic_field(nmethod,             _scavenge_root_state,                          jbyte)                                 \
 889   nonstatic_field(nmethod,             _state,                                        volatile unsigned char)                \
 890   nonstatic_field(nmethod,             _exception_offset,                             int)                                   \
 891   nonstatic_field(nmethod,             _deoptimize_offset,                            int)                                   \
 892   nonstatic_field(nmethod,             _deoptimize_mh_offset,                         int)                                   \
 893   nonstatic_field(nmethod,             _orig_pc_offset,                               int)                                   \
 894   nonstatic_field(nmethod,             _stub_offset,                                  int)                                   \
 895   nonstatic_field(nmethod,             _consts_offset,                                int)                                   \
 896   nonstatic_field(nmethod,             _oops_offset,                                  int)                                   \
 897   nonstatic_field(nmethod,             _metadata_offset,                              int)                                   \
 898   nonstatic_field(nmethod,             _scopes_data_offset,                           int)                                   \
 899   nonstatic_field(nmethod,             _scopes_pcs_offset,                            int)                                   \
 900   nonstatic_field(nmethod,             _dependencies_offset,                          int)                                   \
 901   nonstatic_field(nmethod,             _handler_table_offset,                         int)                                   \
 902   nonstatic_field(nmethod,             _nul_chk_table_offset,                         int)                                   \
 903   nonstatic_field(nmethod,             _nmethod_end_offset,                           int)                                   \
 904   nonstatic_field(nmethod,             _entry_point,                                  address)                               \
 905   nonstatic_field(nmethod,             _verified_entry_point,                         address)                               \
 906   nonstatic_field(nmethod,             _osr_entry_point,                              address)                               \
 907   nonstatic_field(nmethod,             _lock_count,                                   jint)                                  \
 908   nonstatic_field(nmethod,             _stack_traversal_mark,                         long)                                  \
 909   nonstatic_field(nmethod,             _compile_id,                                   int)                                   \
 910   nonstatic_field(nmethod,             _comp_level,                                   int)                                   \
 911   nonstatic_field(nmethod,             _exception_cache,                              ExceptionCache*)                       \
 912   nonstatic_field(nmethod,             _marked_for_deoptimization,                    bool)                                  \
 913                                                                                                                              \
 914   unchecked_c2_static_field(Deoptimization, _trap_reason_name,                        void*)                                 \
 915                                                                                                                              \
 916   nonstatic_field(Deoptimization::UnrollBlock, _size_of_deoptimized_frame,            int)                                   \
 917   nonstatic_field(Deoptimization::UnrollBlock, _caller_adjustment,                    int)                                   \
 918   nonstatic_field(Deoptimization::UnrollBlock, _number_of_frames,                     int)                                   \
 919   nonstatic_field(Deoptimization::UnrollBlock, _total_frame_sizes,                    int)                                   \
 920   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                          intptr_t*)                             \
 921   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                            address*)                              \
 922   nonstatic_field(Deoptimization::UnrollBlock, _register_block,                       intptr_t*)                             \
 923   nonstatic_field(Deoptimization::UnrollBlock, _return_type,                          BasicType)                             \
 924   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                         intptr_t)                              \
 925   nonstatic_field(Deoptimization::UnrollBlock, _caller_actual_parameters,             int)                                   \
 926                                                                                                                                      \
 927   /********************************/                                                                                                 \
 928   /* JavaCalls (NOTE: incomplete) */                                                                                                 \
 929   /********************************/                                                                                                 \
 930                                                                                                                                      \
 931   nonstatic_field(JavaCallWrapper,             _anchor,                                       JavaFrameAnchor)                       \
 932   /********************************/                                                                                                 \
 933   /* JavaFrameAnchor (NOTE: incomplete) */                                                                                           \
 934   /********************************/                                                                                                 \
 935   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 936   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 937                                                                                                                                      \
 938   /******************************/                                                                                                   \
 939   /* Threads (NOTE: incomplete) */                                                                                                   \
 940   /******************************/                                                                                                   \
 941                                                                                                                                      \
 942      static_field(Threads,                     _thread_list,                                  JavaThread*)                           \
 943      static_field(Threads,                     _number_of_threads,                            int)                                   \
 944      static_field(Threads,                     _number_of_non_daemon_threads,                 int)                                   \
 945      static_field(Threads,                     _return_code,                                  int)                                   \
 946                                                                                                                                      \
 947   nonstatic_field(ThreadShadow,                _pending_exception,                            oop)                                   \
 948   nonstatic_field(ThreadShadow,                _exception_file,                               const char*)                           \
 949   nonstatic_field(ThreadShadow,                _exception_line,                               int)                                   \
 950    volatile_nonstatic_field(Thread,            _suspend_flags,                                uint32_t)                              \
 951   nonstatic_field(Thread,                      _active_handles,                               JNIHandleBlock*)                       \
 952   nonstatic_field(Thread,                      _tlab,                                         ThreadLocalAllocBuffer)                \
 953   nonstatic_field(Thread,                      _allocated_bytes,                              jlong)                                 \
 954   nonstatic_field(Thread,                      _current_pending_monitor,                      ObjectMonitor*)                        \
 955   nonstatic_field(Thread,                      _current_pending_monitor_is_from_java,         bool)                                  \
 956   nonstatic_field(Thread,                      _current_waiting_monitor,                      ObjectMonitor*)                        \
 957   nonstatic_field(NamedThread,                 _name,                                         char*)                                 \
 958   nonstatic_field(NamedThread,                 _processed_thread,                             JavaThread*)                           \
 959   nonstatic_field(JavaThread,                  _next,                                         JavaThread*)                           \
 960   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
 961   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 962   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 963   nonstatic_field(JavaThread,                  _vm_result_2,                                  Metadata*)                             \
 964   nonstatic_field(JavaThread,                  _pending_async_exception,                      oop)                                   \
 965   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 966   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 967   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
 968   nonstatic_field(JavaThread,                  _special_runtime_exit_condition,               JavaThread::AsyncRequests)             \
 969   nonstatic_field(JavaThread,                  _saved_exception_pc,                           address)                               \
 970    volatile_nonstatic_field(JavaThread,        _thread_state,                                 JavaThreadState)                       \
 971   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 972   nonstatic_field(JavaThread,                  _stack_base,                                   address)                               \
 973   nonstatic_field(JavaThread,                  _stack_size,                                   size_t)                                \
 974   nonstatic_field(JavaThread,                  _vframe_array_head,                            vframeArray*)                          \
 975   nonstatic_field(JavaThread,                  _vframe_array_last,                            vframeArray*)                          \
 976   nonstatic_field(JavaThread,                  _satb_mark_queue,                              ObjPtrQueue)                           \
 977   nonstatic_field(JavaThread,                  _dirty_card_queue,                             DirtyCardQueue)                        \
 978   nonstatic_field(Thread,                      _resource_area,                                ResourceArea*)                         \
 979   nonstatic_field(CompilerThread,              _env,                                          ciEnv*)                                \
 980                                                                                                                                      \
 981   /************/                                                                                                                     \
 982   /* OSThread */                                                                                                                     \
 983   /************/                                                                                                                     \
 984                                                                                                                                      \
 985   volatile_nonstatic_field(OSThread,           _interrupted,                                  jint)                                  \
 986                                                                                                                                      \
 987   /************************/                                                                                                         \
 988   /* OopMap and OopMapSet */                                                                                                         \
 989   /************************/                                                                                                         \
 990                                                                                                                                      \
 991   nonstatic_field(OopMap,                      _pc_offset,                                    int)                                   \
 992   nonstatic_field(OopMap,                      _omv_count,                                    int)                                   \
 993   nonstatic_field(OopMap,                      _omv_data_size,                                int)                                   \
 994   nonstatic_field(OopMap,                      _omv_data,                                     unsigned char*)                        \
 995   nonstatic_field(OopMap,                      _write_stream,                                 CompressedWriteStream*)                \
 996   nonstatic_field(OopMapSet,                   _om_count,                                     int)                                   \
 997   nonstatic_field(OopMapSet,                   _om_size,                                      int)                                   \
 998   nonstatic_field(OopMapSet,                   _om_data,                                      OopMap**)                              \
 999                                                                                                                                      \
1000   /*********************************/                                                                                                \
1001   /* JNIHandles and JNIHandleBlock */                                                                                                \
1002   /*********************************/                                                                                                \
1003      static_field(JNIHandles,                  _global_handles,                               JNIHandleBlock*)                       \
1004      static_field(JNIHandles,                  _weak_global_handles,                          JNIHandleBlock*)                       \
1005      static_field(JNIHandles,                  _deleted_handle,                               oop)                                   \
1006                                                                                                                                      \
1007   unchecked_nonstatic_field(JNIHandleBlock,    _handles,                                      JNIHandleBlock::block_size_in_oops * sizeof(Oop)) /* Note: no type */ \
1008   nonstatic_field(JNIHandleBlock,              _top,                                          int)                                   \
1009   nonstatic_field(JNIHandleBlock,              _next,                                         JNIHandleBlock*)                       \
1010                                                                                                                                      \
1011   /********************/                                                                                                             \
1012   /* CompressedStream */                                                                                                             \
1013   /********************/                                                                                                             \
1014                                                                                                                                      \
1015   nonstatic_field(CompressedStream,            _buffer,                                       u_char*)                               \
1016   nonstatic_field(CompressedStream,            _position,                                     int)                                   \
1017                                                                                                                                      \
1018   /*********************************/                                                                                                \
1019   /* VMRegImpl (NOTE: incomplete) */                                                                                                 \
1020   /*********************************/                                                                                                \
1021                                                                                                                                      \
1022      static_field(VMRegImpl,                   regName[0],                                    const char*)                           \
1023      static_field(VMRegImpl,                   stack0,                                        VMReg)                                 \
1024                                                                                                                                      \
1025   /*******************************/                                                                                                  \
1026   /* Runtime1 (NOTE: incomplete) */                                                                                                  \
1027   /*******************************/                                                                                                  \
1028                                                                                                                                      \
1029   unchecked_c1_static_field(Runtime1,          _blobs,                                 sizeof(Runtime1::_blobs)) /* NOTE: no type */ \
1030                                                                                                                                      \
1031   /**************/                                                                                                                   \
1032   /* allocation */                                                                                                                   \
1033   /**************/                                                                                                                   \
1034                                                                                                                                      \
1035   nonstatic_field(Chunk, _next, Chunk*)                                                                                              \
1036   nonstatic_field(Chunk, _len, const size_t)                                                                                         \
1037                                                                                                                                      \
1038   nonstatic_field(Arena, _first, Chunk*)                                                                                             \
1039   nonstatic_field(Arena, _chunk, Chunk*)                                                                                             \
1040   nonstatic_field(Arena, _hwm, char*)                                                                                                \
1041   nonstatic_field(Arena, _max, char*)                                                                                                \
1042                                                                                                                                      \
1043   /************/                                                                                                                     \
1044   /* CI */                                                                                                                           \
1045   /************/                                                                                                                     \
1046                                                                                                                                      \
1047  nonstatic_field(ciEnv,               _system_dictionary_modification_counter, int)                                                  \
1048  nonstatic_field(ciEnv,               _compiler_data, void*)                                                                         \
1049  nonstatic_field(ciEnv,               _failure_reason, const char*)                                                                  \
1050  nonstatic_field(ciEnv,               _factory, ciObjectFactory*)                                                                    \
1051  nonstatic_field(ciEnv,               _dependencies, Dependencies*)                                                                  \
1052  nonstatic_field(ciEnv,               _task, CompileTask*)                                                                           \
1053  nonstatic_field(ciEnv,               _arena, Arena*)                                                                                \
1054                                                                                                                                      \
1055  nonstatic_field(ciBaseObject,    _ident, uint)                                                                                      \
1056                                                                                                                                      \
1057  nonstatic_field(ciObject,    _handle, jobject)                                                                                      \
1058  nonstatic_field(ciObject,    _klass, ciKlass*)                                                                                      \
1059                                                                                                                                      \
1060  nonstatic_field(ciMetadata,  _metadata, Metadata*)                                                                           \
1061                                                                                                                                      \
1062  nonstatic_field(ciSymbol,    _symbol, Symbol*)                                                                                      \
1063                                                                                                                                      \
1064  nonstatic_field(ciType,    _basic_type, BasicType)                                                                                  \
1065                                                                                                                                      \
1066  nonstatic_field(ciKlass,   _name, ciSymbol*)                                                                                        \
1067                                                                                                                                      \
1068  nonstatic_field(ciArrayKlass,   _dimension, jint)                                                                                   \
1069                                                                                                                                      \
1070  nonstatic_field(ciObjArrayKlass, _element_klass, ciKlass*)                                                                          \
1071  nonstatic_field(ciObjArrayKlass, _base_element_klass, ciKlass*)                                                                     \
1072                                                                                                                                      \
1073  nonstatic_field(ciInstanceKlass,   _init_state, InstanceKlass::ClassState)                                                          \
1074  nonstatic_field(ciInstanceKlass,   _is_shared,  bool)                                                                               \
1075                                                                                                                                      \
1076  nonstatic_field(ciMethod,     _interpreter_invocation_count, int)                                                                   \
1077  nonstatic_field(ciMethod,     _interpreter_throwout_count, int)                                                                     \
1078  nonstatic_field(ciMethod,     _instructions_size, int)                                                                              \
1079                                                                                                                                      \
1080  nonstatic_field(ciMethodData, _data_size, int)                                                                                      \
1081  nonstatic_field(ciMethodData, _state, u_char)                                                                                       \
1082  nonstatic_field(ciMethodData, _extra_data_size, int)                                                                                \
1083  nonstatic_field(ciMethodData, _data, intptr_t*)                                                                                     \
1084  nonstatic_field(ciMethodData, _hint_di, int)                                                                                        \
1085  nonstatic_field(ciMethodData, _eflags, intx)                                                                                        \
1086  nonstatic_field(ciMethodData, _arg_local, intx)                                                                                     \
1087  nonstatic_field(ciMethodData, _arg_stack, intx)                                                                                     \
1088  nonstatic_field(ciMethodData, _arg_returned, intx)                                                                                  \
1089  nonstatic_field(ciMethodData, _current_mileage, int)                                                                                \
1090  nonstatic_field(ciMethodData, _orig, MethodData)                                                                             \
1091                                                                                                                                      \
1092  nonstatic_field(ciField,     _holder, ciInstanceKlass*)                                                                             \
1093  nonstatic_field(ciField,     _name, ciSymbol*)                                                                                      \
1094  nonstatic_field(ciField,     _signature, ciSymbol*)                                                                                 \
1095  nonstatic_field(ciField,     _offset, int)                                                                                          \
1096  nonstatic_field(ciField,     _is_constant, bool)                                                                                    \
1097  nonstatic_field(ciField,     _constant_value, ciConstant)                                                                           \
1098                                                                                                                                      \
1099  nonstatic_field(ciObjectFactory,     _ci_metadata, GrowableArray&lt;ciMetadata*&gt;*)                                                     \
1100  nonstatic_field(ciObjectFactory,     _symbols, GrowableArray&lt;ciSymbol*&gt;*)                                                           \
1101  nonstatic_field(ciObjectFactory,     _unloaded_methods, GrowableArray&lt;ciMethod*&gt;*)                                                  \
1102                                                                                                                                      \
1103  nonstatic_field(ciConstant,     _type, BasicType)                                                                                   \
1104  nonstatic_field(ciConstant,     _value._int, jint)                                                                                  \
1105  nonstatic_field(ciConstant,     _value._long, jlong)                                                                                \
1106  nonstatic_field(ciConstant,     _value._float, jfloat)                                                                              \
1107  nonstatic_field(ciConstant,     _value._double, jdouble)                                                                            \
1108  nonstatic_field(ciConstant,     _value._object, ciObject*)                                                                          \
1109                                                                                                                                      \
1110   /************/                                                                                                                     \
1111   /* Monitors */                                                                                                                     \
1112   /************/                                                                                                                     \
1113                                                                                                                                      \
1114   volatile_nonstatic_field(ObjectMonitor,      _header,                                       markOop)                               \
1115   unchecked_nonstatic_field(ObjectMonitor,     _object,                                       sizeof(void *)) /* NOTE: no type */    \
1116   unchecked_nonstatic_field(ObjectMonitor,     _owner,                                        sizeof(void *)) /* NOTE: no type */    \
1117   volatile_nonstatic_field(ObjectMonitor,      _count,                                        intptr_t)                              \
1118   volatile_nonstatic_field(ObjectMonitor,      _waiters,                                      intptr_t)                              \
1119   volatile_nonstatic_field(ObjectMonitor,      _recursions,                                   intptr_t)                              \
1120   nonstatic_field(ObjectMonitor,               FreeNext,                                      ObjectMonitor*)                        \
1121   volatile_nonstatic_field(BasicLock,          _displaced_header,                             markOop)                               \
1122   nonstatic_field(BasicObjectLock,             _lock,                                         BasicLock)                             \
1123   nonstatic_field(BasicObjectLock,             _obj,                                          oop)                                   \
1124   static_field(ObjectSynchronizer,             gBlockList,                                    ObjectMonitor*)                        \
1125                                                                                                                                      \
1126   /*********************/                                                                                                            \
1127   /* Matcher (C2 only) */                                                                                                            \
1128   /*********************/                                                                                                            \
1129                                                                                                                                      \
1130   unchecked_c2_static_field(Matcher,           _regEncode,                          sizeof(Matcher::_regEncode)) /* NOTE: no type */ \
1131                                                                                                                                      \
1132   c2_nonstatic_field(Node,               _in,                      Node**)                                                           \
1133   c2_nonstatic_field(Node,               _out,                     Node**)                                                           \
1134   c2_nonstatic_field(Node,               _cnt,                     node_idx_t)                                                       \
1135   c2_nonstatic_field(Node,               _max,                     node_idx_t)                                                       \
1136   c2_nonstatic_field(Node,               _outcnt,                  node_idx_t)                                                       \
1137   c2_nonstatic_field(Node,               _outmax,                  node_idx_t)                                                       \
1138   c2_nonstatic_field(Node,               _idx,                     const node_idx_t)                                                 \
1139   c2_nonstatic_field(Node,               _class_id,                jushort)                                                          \
1140   c2_nonstatic_field(Node,               _flags,                   jushort)                                                          \
1141                                                                                                                                      \
1142   c2_nonstatic_field(Compile,            _root,                    RootNode*)                                                        \
1143   c2_nonstatic_field(Compile,            _unique,                  uint)                                                             \
1144   c2_nonstatic_field(Compile,            _entry_bci,               int)                                                              \
1145   c2_nonstatic_field(Compile,            _top,                     Node*)                                                            \
1146   c2_nonstatic_field(Compile,            _cfg,                     PhaseCFG*)                                                        \
1147   c2_nonstatic_field(Compile,            _regalloc,                PhaseRegAlloc*)                                                   \
1148   c2_nonstatic_field(Compile,            _method,                  ciMethod*)                                                        \
1149   c2_nonstatic_field(Compile,            _compile_id,              const int)                                                        \
1150   c2_nonstatic_field(Compile,            _save_argument_registers, const bool)                                                       \
1151   c2_nonstatic_field(Compile,            _subsume_loads,           const bool)                                                       \
1152   c2_nonstatic_field(Compile,            _do_escape_analysis,      const bool)                                                       \
1153   c2_nonstatic_field(Compile,            _eliminate_boxing,        const bool)                                                       \
1154   c2_nonstatic_field(Compile,            _ilt,                     InlineTree*)                                                      \
1155                                                                                                                                      \
1156   c2_nonstatic_field(InlineTree,         _caller_jvms,             JVMState*)                                                        \
1157   c2_nonstatic_field(InlineTree,         _method,                  ciMethod*)                                                        \
1158   c2_nonstatic_field(InlineTree,         _caller_tree,             InlineTree*)                                                      \
1159   c2_nonstatic_field(InlineTree,         _subtrees,                GrowableArray&lt;InlineTree*&gt;)                                       \
1160                                                                                                                                      \
1161   c2_nonstatic_field(OptoRegPair,        _first,                   short)                                                            \
1162   c2_nonstatic_field(OptoRegPair,        _second,                  short)                                                            \
1163                                                                                                                                      \
1164   c2_nonstatic_field(JVMState,           _caller,                  JVMState*)                                                        \
1165   c2_nonstatic_field(JVMState,           _depth,                   uint)                                                             \
1166   c2_nonstatic_field(JVMState,           _locoff,                  uint)                                                             \
1167   c2_nonstatic_field(JVMState,           _stkoff,                  uint)                                                             \
1168   c2_nonstatic_field(JVMState,           _monoff,                  uint)                                                             \
1169   c2_nonstatic_field(JVMState,           _scloff,                  uint)                                                             \
1170   c2_nonstatic_field(JVMState,           _endoff,                  uint)                                                             \
1171   c2_nonstatic_field(JVMState,           _sp,                      uint)                                                             \
1172   c2_nonstatic_field(JVMState,           _bci,                     int)                                                              \
1173   c2_nonstatic_field(JVMState,           _method,                  ciMethod*)                                                        \
1174   c2_nonstatic_field(JVMState,           _map,                     SafePointNode*)                                                   \
1175                                                                                                                                      \
1176   c2_nonstatic_field(SafePointNode,      _jvms,                    JVMState* const)                                                  \
1177                                                                                                                                      \
1178   c2_nonstatic_field(MachSafePointNode,  _jvms,                    JVMState*)                                                        \
1179   c2_nonstatic_field(MachSafePointNode,  _jvmadj,                  uint)                                                             \
1180                                                                                                                                      \
1181   c2_nonstatic_field(MachIfNode,         _prob,                    jfloat)                                                           \
1182   c2_nonstatic_field(MachIfNode,         _fcnt,                    jfloat)                                                           \
1183                                                                                                                                      \
1184   c2_nonstatic_field(CallNode,           _entry_point,             address)                                                          \
1185                                                                                                                                      \
1186   c2_nonstatic_field(CallJavaNode,       _method,                  ciMethod*)                                                        \
1187                                                                                                                                      \
1188   c2_nonstatic_field(CallRuntimeNode,    _name,                    const char*)                                                      \
1189                                                                                                                                      \
1190   c2_nonstatic_field(CallStaticJavaNode, _name,                    const char*)                                                      \
1191                                                                                                                                      \
1192   c2_nonstatic_field(MachCallJavaNode,   _method,                  ciMethod*)                                                        \
1193   c2_nonstatic_field(MachCallJavaNode,   _bci,                     int)                                                              \
1194                                                                                                                                      \
1195   c2_nonstatic_field(MachCallStaticJavaNode, _name,                const char*)                                                      \
1196                                                                                                                                      \
1197   c2_nonstatic_field(MachCallRuntimeNode,  _name,                  const char*)                                                      \
1198                                                                                                                                      \
1199   c2_nonstatic_field(PhaseCFG,           _number_of_blocks,        uint)                                                             \
1200   c2_nonstatic_field(PhaseCFG,           _blocks,                  Block_List)                                                       \
1201   c2_nonstatic_field(PhaseCFG,           _node_to_block_mapping,   Block_Array)                                                      \
1202   c2_nonstatic_field(PhaseCFG,           _root_block,              Block*)                                                           \
1203                                                                                                                                      \
1204   c2_nonstatic_field(PhaseRegAlloc,      _node_regs,               OptoRegPair*)                                                     \
1205   c2_nonstatic_field(PhaseRegAlloc,      _node_regs_max_index,     uint)                                                             \
1206   c2_nonstatic_field(PhaseRegAlloc,      _framesize,               uint)                                                             \
1207   c2_nonstatic_field(PhaseRegAlloc,      _max_reg,                 OptoReg::Name)                                                    \
1208                                                                                                                                      \
1209   c2_nonstatic_field(PhaseChaitin,       _trip_cnt,                int)                                                              \
1210   c2_nonstatic_field(PhaseChaitin,       _alternate,               int)                                                              \
1211   c2_nonstatic_field(PhaseChaitin,       _lo_degree,               uint)                                                             \
1212   c2_nonstatic_field(PhaseChaitin,       _lo_stk_degree,           uint)                                                             \
1213   c2_nonstatic_field(PhaseChaitin,       _hi_degree,               uint)                                                             \
1214   c2_nonstatic_field(PhaseChaitin,       _simplified,              uint)                                                             \
1215                                                                                                                                      \
1216   c2_nonstatic_field(Block,              _nodes,                   Node_List)                                                        \
1217   c2_nonstatic_field(Block,              _succs,                   Block_Array)                                                      \
1218   c2_nonstatic_field(Block,              _num_succs,               uint)                                                             \
1219   c2_nonstatic_field(Block,              _pre_order,               uint)                                                             \
1220   c2_nonstatic_field(Block,              _dom_depth,               uint)                                                             \
1221   c2_nonstatic_field(Block,              _idom,                    Block*)                                                           \
1222   c2_nonstatic_field(Block,              _freq,                    jfloat)                                                           \
1223                                                                                                                                      \
1224   c2_nonstatic_field(CFGElement,         _freq,                    jfloat)                                                           \
1225                                                                                                                                      \
1226   c2_nonstatic_field(Block_List,         _cnt,                     uint)                                                             \
1227                                                                                                                                      \
1228   c2_nonstatic_field(Block_Array,        _size,                    uint)                                                             \
1229   c2_nonstatic_field(Block_Array,        _blocks,                  Block**)                                                          \
1230   c2_nonstatic_field(Block_Array,        _arena,                   Arena*)                                                           \
1231                                                                                                                                      \
1232   c2_nonstatic_field(Node_List,          _cnt,                     uint)                                                             \
1233                                                                                                                                      \
1234   c2_nonstatic_field(Node_Array,         _max,                     uint)                                                             \
1235   c2_nonstatic_field(Node_Array,         _nodes,                   Node**)                                                           \
1236   c2_nonstatic_field(Node_Array,         _a,                       Arena*)                                                           \
1237                                                                                                                                      \
1238                                                                                                                                      \
1239   /*********************/                                                                                                            \
1240   /* -XX flags         */                                                                                                            \
1241   /*********************/                                                                                                            \
1242                                                                                                                                      \
1243   nonstatic_field(Flag,                        _type,                                         const char*)                           \
1244   nonstatic_field(Flag,                        _name,                                         const char*)                           \
1245   unchecked_nonstatic_field(Flag,              _addr,                                         sizeof(void*)) /* NOTE: no type */     \
1246   nonstatic_field(Flag,                        _flags,                                        Flag::Flags)                           \
1247   static_field(Flag,                           flags,                                         Flag*)                                 \
1248   static_field(Flag,                           numFlags,                                      size_t)                                \
1249                                                                                                                                      \
1250   /*************************/                                                                                                        \
1251   /* JDK / VM version info */                                                                                                        \
1252   /*************************/                                                                                                        \
1253                                                                                                                                      \
1254   static_field(Abstract_VM_Version,            _s_vm_release,                                 const char*)                           \
1255   static_field(Abstract_VM_Version,            _s_internal_vm_info_string,                    const char*)                           \
1256   static_field(Abstract_VM_Version,            _vm_major_version,                             int)                                   \
1257   static_field(Abstract_VM_Version,            _vm_minor_version,                             int)                                   \
1258   static_field(Abstract_VM_Version,            _vm_build_number,                              int)                                   \
1259   static_field(Abstract_VM_Version,            _reserve_for_allocation_prefetch,              int)                                   \
1260                                                                                                                                      \
1261   static_field(JDK_Version,                    _current,                                      JDK_Version)                           \
1262   nonstatic_field(JDK_Version,                 _partially_initialized,                        bool)                                  \
1263   nonstatic_field(JDK_Version,                 _major,                                        unsigned char)                         \
1264                                                                                                                                      \
1265   /*************************/                                                                                                        \
1266   /* JVMTI */                                                                                                                        \
1267   /*************************/                                                                                                        \
1268                                                                                                                                      \
1269   JVMTI_STRUCTS(static_field)                                                                                                        \
1270                                                                                                                                      \
1271   /*************/                                                                                                                    \
1272   /* Arguments */                                                                                                                    \
1273   /*************/                                                                                                                    \
1274                                                                                                                                      \
1275   static_field(Arguments,                      _jvm_flags_array,                              char**)                                \
1276   static_field(Arguments,                      _num_jvm_flags,                                int)                                   \
1277   static_field(Arguments,                      _jvm_args_array,                               char**)                                \
1278   static_field(Arguments,                      _num_jvm_args,                                 int)                                   \
1279   static_field(Arguments,                      _java_command,                                 char*)                                 \
1280                                                                                                                                      \
1281   /************/                                                                                                                     \
1282   /* Array&lt;T&gt; */                                                                                                                     \
1283   /************/                                                                                                                     \
1284                                                                                                                                      \
1285   nonstatic_field(Array&lt;int&gt;,                      _length,                                   int)                                   \
1286   unchecked_nonstatic_field(Array&lt;int&gt;,            _data,                                     sizeof(int))                           \
1287   unchecked_nonstatic_field(Array&lt;u1&gt;,             _data,                                     sizeof(u1))                            \
1288   unchecked_nonstatic_field(Array&lt;u2&gt;,             _data,                                     sizeof(u2))                            \
1289   unchecked_nonstatic_field(Array&lt;Method*&gt;,        _data,                                     sizeof(Method*))                       \
1290   unchecked_nonstatic_field(Array&lt;Klass*&gt;,         _data,                                     sizeof(Klass*))                        \
1291                                                                                                                                      \
1292   /*********************************/                                                                                                \
1293   /* java_lang_Class fields        */                                                                                                \
1294   /*********************************/                                                                                                \
1295                                                                                                                                      \
1296   static_field(java_lang_Class,                _klass_offset,                                 int)                                   \
1297   static_field(java_lang_Class,                _array_klass_offset,                           int)                                   \
1298   static_field(java_lang_Class,                _oop_size_offset,                              int)                                   \
1299   static_field(java_lang_Class,                _static_oop_field_count_offset,                int)                                   \
1300                                                                                                                                      \
1301   /************************/                                                                                                         \
1302   /* Miscellaneous fields */                                                                                                         \
1303   /************************/                                                                                                         \
1304                                                                                                                                      \
1305   nonstatic_field(CompileTask,                 _method,                                      Method*)                                \
1306   nonstatic_field(CompileTask,                 _osr_bci,                                     int)                                    \
1307   nonstatic_field(CompileTask,                 _comp_level,                                  int)                                    \
1308   nonstatic_field(CompileTask,                 _compile_id,                                  uint)                                   \
1309   nonstatic_field(CompileTask,                 _next,                                        CompileTask*)                           \
1310   nonstatic_field(CompileTask,                 _prev,                                        CompileTask*)                           \
1311                                                                                                                                      \
1312   nonstatic_field(vframeArray,                 _next,                                        vframeArray*)                           \
1313   nonstatic_field(vframeArray,                 _original,                                    frame)                                  \
1314   nonstatic_field(vframeArray,                 _caller,                                      frame)                                  \
1315   nonstatic_field(vframeArray,                 _frames,                                      int)                                    \
1316                                                                                                                                      \
1317   nonstatic_field(vframeArrayElement,          _frame,                                       frame)                                  \
1318   nonstatic_field(vframeArrayElement,          _bci,                                         int)                                    \
1319   nonstatic_field(vframeArrayElement,          _method,                                      Method*)                                \
1320                                                                                                                                      \
1321   nonstatic_field(PtrQueue,                    _active,                                      bool)                                   \
1322   nonstatic_field(PtrQueue,                    _buf,                                         void**)                                 \
1323   nonstatic_field(PtrQueue,                    _index,                                       size_t)                                 \
1324                                                                                                                                      \
1325   nonstatic_field(AccessFlags,                 _flags,                                       jint)                                   \
1326   nonstatic_field(elapsedTimer,                _counter,                                     jlong)                                  \
1327   nonstatic_field(elapsedTimer,                _active,                                      bool)                                   \
1328   nonstatic_field(InvocationCounter,           _counter,                                     unsigned int)                           \
1329   volatile_nonstatic_field(FreeChunk,          _size,                                        size_t)                                 \
1330   nonstatic_field(FreeChunk,                   _next,                                        FreeChunk*)                             \
1331   nonstatic_field(FreeChunk,                   _prev,                                        FreeChunk*)                             \
1332   nonstatic_field(FreeList&lt;FreeChunk&gt;,         _size,                                        size_t)                                 \
1333   nonstatic_field(FreeList&lt;Metablock&gt;,         _size,                                        size_t)                                 \
1334   nonstatic_field(FreeList&lt;FreeChunk&gt;,         _count,                                       ssize_t)                                \
1335   nonstatic_field(FreeList&lt;Metablock&gt;,         _count,                                       ssize_t)                                \
1336   nonstatic_field(MetablockTreeDictionary,     _total_size,                                  size_t)
1337 
1338 //--------------------------------------------------------------------------------
1339 // VM_TYPES
1340 //
1341 // This list must enumerate at least all of the types in the above
1342 // list. For the types in the above list, the entry below must have
1343 // exactly the same spacing since string comparisons are done in the
1344 // code which verifies the consistency of these tables (in the debug
1345 // build).
1346 //
1347 // In addition to the above types, this list is required to enumerate
1348 // the JNI's java types, which are used to indicate the size of Java
1349 // fields in this VM to the SA. Further, oop types are currently
1350 // distinguished by name (i.e., ends with "oop") over in the SA.
1351 //
1352 // The declare_toplevel_type macro should be used to declare types
1353 // which do not have a superclass.
1354 //
1355 // The declare_integer_type and declare_unsigned_integer_type macros
1356 // are required in order to properly identify C integer types over in
1357 // the SA. They should be used for any type which is otherwise opaque
1358 // and which it is necessary to coerce into an integer value. This
1359 // includes, for example, the type uintptr_t. Note that while they
1360 // will properly identify the type's size regardless of the platform,
1361 // since it is does not seem possible to deduce or check signedness at
1362 // compile time using the pointer comparison tricks, it is currently
1363 // required that the given types have the same signedness across all
1364 // platforms.
1365 //
1366 // NOTE that there are platform-specific additions to this table in
1367 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
1368 
1369 #define VM_TYPES(declare_type,                                            \
1370                  declare_toplevel_type,                                   \
1371                  declare_oop_type,                                        \
1372                  declare_integer_type,                                    \
1373                  declare_unsigned_integer_type,                           \
1374                  declare_c1_toplevel_type,                                \
1375                  declare_c2_type,                                         \
1376                  declare_c2_toplevel_type)                                \
1377                                                                           \
1378   /*************************************************************/         \
1379   /* Java primitive types -- required by the SA implementation */         \
1380   /* in order to determine the size of Java fields in this VM  */         \
1381   /* (the implementation looks up these names specifically)    */         \
1382   /* NOTE: since we fetch these sizes from the remote VM, we   */         \
1383   /* have a bootstrapping sequence during which it is not      */         \
1384   /* valid to fetch Java values from the remote process, only  */         \
1385   /* C integer values (of known size). NOTE also that we do    */         \
1386   /* NOT include "Java unsigned" types like juint here; since  */         \
1387   /* Java does not have unsigned primitive types, those can    */         \
1388   /* not be mapped directly and are considered to be C integer */         \
1389   /* types in this system (see the "other types" section,      */         \
1390   /* below.)                                                   */         \
1391   /*************************************************************/         \
1392                                                                           \
1393   declare_toplevel_type(jboolean)                                         \
1394   declare_toplevel_type(jbyte)                                            \
1395   declare_toplevel_type(jchar)                                            \
1396   declare_toplevel_type(jdouble)                                          \
1397   declare_toplevel_type(jfloat)                                           \
1398   declare_toplevel_type(jint)                                             \
1399   declare_toplevel_type(jlong)                                            \
1400   declare_toplevel_type(jshort)                                           \
1401                                                                           \
1402   /*********************************************************************/ \
1403   /* C integer types. User-defined typedefs (like "size_t" or          */ \
1404   /* "intptr_t") are guaranteed to be present with the same names over */ \
1405   /* in the SA's type database. Names like "unsigned short" are not    */ \
1406   /* guaranteed to be visible through the SA's type database lookup    */ \
1407   /* mechanism, though they will have a Type object created for them   */ \
1408   /* and are valid types for Fields.                                   */ \
1409   /*********************************************************************/ \
1410   declare_integer_type(bool)                                              \
1411   declare_integer_type(short)                                             \
1412   declare_integer_type(int)                                               \
1413   declare_integer_type(long)                                              \
1414   declare_integer_type(char)                                              \
1415   declare_unsigned_integer_type(unsigned char)                            \
1416   declare_unsigned_integer_type(volatile unsigned char)                   \
1417   declare_unsigned_integer_type(u_char)                                   \
1418   declare_unsigned_integer_type(unsigned int)                             \
1419   declare_unsigned_integer_type(uint)                                     \
1420   declare_unsigned_integer_type(unsigned short)                           \
1421   declare_unsigned_integer_type(jushort)                                  \
1422   declare_unsigned_integer_type(unsigned long)                            \
1423   /* The compiler thinks this is a different type than */                 \
1424   /* unsigned short on Win32 */                                           \
1425   declare_unsigned_integer_type(u1)                                       \
1426   declare_unsigned_integer_type(u2)                                       \
1427   declare_unsigned_integer_type(unsigned)                                 \
1428                                                                           \
1429   /*****************************/                                         \
1430   /* C primitive pointer types */                                         \
1431   /*****************************/                                         \
1432                                                                           \
1433   declare_toplevel_type(void*)                                            \
1434   declare_toplevel_type(int*)                                             \
1435   declare_toplevel_type(char*)                                            \
1436   declare_toplevel_type(char**)                                           \
1437   declare_toplevel_type(u_char*)                                          \
1438   declare_toplevel_type(unsigned char*)                                   \
1439   declare_toplevel_type(volatile unsigned char*)                          \
1440                                                                           \
1441   /*******************************************************************/   \
1442   /* Types which it will be handy to have available over in the SA   */   \
1443   /* in order to do platform-independent address -&gt; integer coercion */   \
1444   /* (note: these will be looked up by name)                         */   \
1445   /*******************************************************************/   \
1446                                                                           \
1447   declare_unsigned_integer_type(size_t)                                   \
1448   declare_integer_type(ssize_t)                                           \
1449   declare_integer_type(intx)                                              \
1450   declare_integer_type(intptr_t)                                          \
1451   declare_unsigned_integer_type(uintx)                                    \
1452   declare_unsigned_integer_type(uintptr_t)                                \
1453   declare_unsigned_integer_type(uint32_t)                                 \
1454   declare_unsigned_integer_type(uint64_t)                                 \
1455                                                                           \
1456   /******************************************/                            \
1457   /* OopDesc hierarchy (NOTE: some missing) */                            \
1458   /******************************************/                            \
1459                                                                           \
1460   declare_toplevel_type(oopDesc)                                          \
1461     declare_type(arrayOopDesc, oopDesc)                                   \
1462       declare_type(objArrayOopDesc, arrayOopDesc)                         \
1463     declare_type(instanceOopDesc, oopDesc)                                \
1464     declare_type(markOopDesc, oopDesc)                                    \
1465                                                                           \
1466   /**************************************************/                    \
1467   /* MetadataOopDesc hierarchy (NOTE: some missing) */                    \
1468   /**************************************************/                    \
1469                                                                           \
1470   declare_toplevel_type(CompiledICHolder)                                 \
1471   declare_toplevel_type(MetaspaceObj)                                     \
1472     declare_type(Metadata, MetaspaceObj)                                  \
1473     declare_type(Klass, Metadata)                                         \
1474            declare_type(ArrayKlass, Klass)                                \
1475            declare_type(ObjArrayKlass, ArrayKlass)                        \
1476            declare_type(TypeArrayKlass, ArrayKlass)                       \
1477       declare_type(InstanceKlass, Klass)                                  \
1478         declare_type(InstanceClassLoaderKlass, InstanceKlass)             \
1479         declare_type(InstanceMirrorKlass, InstanceKlass)                  \
1480         declare_type(InstanceRefKlass, InstanceKlass)                     \
1481     declare_type(ConstantPool, Metadata)                                  \
1482     declare_type(ConstantPoolCache, MetaspaceObj)                         \
1483     declare_type(MethodData, Metadata)                                    \
1484     declare_type(Method, Metadata)                                        \
1485     declare_type(MethodCounters, MetaspaceObj)                            \
1486     declare_type(ConstMethod, MetaspaceObj)                               \
1487                                                                           \
1488   declare_toplevel_type(vtableEntry)                                      \
1489                                                                           \
1490            declare_toplevel_type(Symbol)                                  \
1491            declare_toplevel_type(Symbol*)                                 \
1492   declare_toplevel_type(volatile Metadata*)                               \
1493                                                                           \
1494   declare_toplevel_type(DataLayout)                                       \
1495   declare_toplevel_type(nmethodBucket)                                    \
1496                                                                           \
1497   /********/                                                              \
1498   /* Oops */                                                              \
1499   /********/                                                              \
1500                                                                           \
1501   declare_oop_type(markOop)                                               \
1502   declare_oop_type(objArrayOop)                                           \
1503   declare_oop_type(oop)                                                   \
1504   declare_oop_type(narrowOop)                                             \
1505   declare_oop_type(typeArrayOop)                                          \
1506                                                                           \
1507   /*************************************/                                 \
1508   /* MethodOop-related data structures */                                 \
1509   /*************************************/                                 \
1510                                                                           \
1511   declare_toplevel_type(CheckedExceptionElement)                          \
1512   declare_toplevel_type(LocalVariableTableElement)                        \
1513   declare_toplevel_type(ExceptionTableElement)                            \
1514   declare_toplevel_type(MethodParametersElement)                          \
1515                                                                           \
1516   declare_toplevel_type(ClassLoaderData)                                  \
1517   declare_toplevel_type(ClassLoaderDataGraph)                             \
1518                                                                           \
1519   /******************************************/                            \
1520   /* Generation and space hierarchies       */                            \
1521   /* (needed for run-time type information) */                            \
1522   /******************************************/                            \
1523                                                                           \
1524   declare_toplevel_type(CollectedHeap)                                    \
1525            declare_type(SharedHeap,                   CollectedHeap)      \
1526            declare_type(GenCollectedHeap,             SharedHeap)         \
1527   declare_toplevel_type(Generation)                                       \
1528            declare_type(DefNewGeneration,             Generation)         \
1529            declare_type(CardGeneration,               Generation)         \
1530            declare_type(OneContigSpaceCardGeneration, CardGeneration)     \
1531            declare_type(TenuredGeneration,            OneContigSpaceCardGeneration) \
1532   declare_toplevel_type(Space)                                            \
1533   declare_toplevel_type(BitMap)                                           \
1534            declare_type(CompactibleSpace,             Space)              \
1535            declare_type(ContiguousSpace,              CompactibleSpace)   \
1536            declare_type(EdenSpace,                    ContiguousSpace)    \
1537            declare_type(OffsetTableContigSpace,       ContiguousSpace)    \
1538            declare_type(TenuredSpace,                 OffsetTableContigSpace) \
1539   declare_toplevel_type(BarrierSet)                                       \
1540            declare_type(ModRefBarrierSet,             BarrierSet)         \
1541            declare_type(CardTableModRefBS,            ModRefBarrierSet)   \
1542            declare_type(CardTableModRefBSForCTRS,     CardTableModRefBS)  \
1543   declare_toplevel_type(BarrierSet::Name)                                 \
1544   declare_toplevel_type(GenRemSet)                                        \
1545            declare_type(CardTableRS,                  GenRemSet)          \
1546   declare_toplevel_type(BlockOffsetSharedArray)                           \
1547   declare_toplevel_type(BlockOffsetTable)                                 \
1548            declare_type(BlockOffsetArray,             BlockOffsetTable)   \
1549            declare_type(BlockOffsetArrayContigSpace,  BlockOffsetArray)   \
1550            declare_type(BlockOffsetArrayNonContigSpace, BlockOffsetArray) \
1551                                                                           \
1552   /* Miscellaneous other GC types */                                      \
1553                                                                           \
1554   declare_toplevel_type(ageTable)                                         \
1555   declare_toplevel_type(Generation::StatRecord)                           \
1556   declare_toplevel_type(GenerationSpec)                                   \
1557   declare_toplevel_type(HeapWord)                                         \
1558   declare_toplevel_type(MemRegion)                                        \
1559   declare_toplevel_type(ThreadLocalAllocBuffer)                           \
1560   declare_toplevel_type(VirtualSpace)                                     \
1561   declare_toplevel_type(WaterMark)                                        \
1562   declare_toplevel_type(ObjPtrQueue)                                      \
1563   declare_toplevel_type(DirtyCardQueue)                                   \
1564                                                                           \
1565   /* Pointers to Garbage Collection types */                              \
1566                                                                           \
1567   declare_toplevel_type(BarrierSet*)                                      \
1568   declare_toplevel_type(BlockOffsetSharedArray*)                          \
1569   declare_toplevel_type(GenRemSet*)                                       \
1570   declare_toplevel_type(CardTableRS*)                                     \
1571   declare_toplevel_type(CardTableModRefBS*)                               \
1572   declare_toplevel_type(CardTableModRefBS**)                              \
1573   declare_toplevel_type(CardTableModRefBSForCTRS*)                        \
1574   declare_toplevel_type(CardTableModRefBSForCTRS**)                       \
1575   declare_toplevel_type(CollectedHeap*)                                   \
1576   declare_toplevel_type(ContiguousSpace*)                                 \
1577   declare_toplevel_type(DefNewGeneration*)                                \
1578   declare_toplevel_type(EdenSpace*)                                       \
1579   declare_toplevel_type(GenCollectedHeap*)                                \
1580   declare_toplevel_type(Generation*)                                      \
1581   declare_toplevel_type(GenerationSpec**)                                 \
1582   declare_toplevel_type(HeapWord*)                                        \
1583   declare_toplevel_type(MemRegion*)                                       \
1584   declare_toplevel_type(OffsetTableContigSpace*)                          \
1585   declare_toplevel_type(OneContigSpaceCardGeneration*)                    \
1586   declare_toplevel_type(Space*)                                           \
1587   declare_toplevel_type(ThreadLocalAllocBuffer*)                          \
1588                                                                           \
1589   /************************/                                              \
1590   /* PerfMemory - jvmstat */                                              \
1591   /************************/                                              \
1592                                                                           \
1593   declare_toplevel_type(PerfDataPrologue)                                 \
1594   declare_toplevel_type(PerfDataPrologue*)                                \
1595   declare_toplevel_type(PerfDataEntry)                                    \
1596   declare_toplevel_type(PerfMemory)                                       \
1597                                                                           \
1598   /*********************************/                                     \
1599   /* SymbolTable, SystemDictionary */                                     \
1600   /*********************************/                                     \
1601                                                                           \
1602   declare_toplevel_type(BasicHashtable&lt;mtInternal&gt;)                       \
1603     declare_type(IntptrHashtable, BasicHashtable&lt;mtInternal&gt;)             \
1604   declare_type(SymbolTable, SymbolHashtable)                              \
1605   declare_type(StringTable, StringHashtable)                              \
1606     declare_type(LoaderConstraintTable, KlassHashtable)                   \
1607     declare_type(KlassTwoOopHashtable, KlassHashtable)                    \
1608     declare_type(Dictionary, KlassTwoOopHashtable)                        \
1609     declare_type(PlaceholderTable, SymbolTwoOopHashtable)                 \
1610   declare_toplevel_type(BasicHashtableEntry&lt;mtInternal&gt;)                  \
1611   declare_type(IntptrHashtableEntry, BasicHashtableEntry&lt;mtInternal&gt;)     \
1612     declare_type(DictionaryEntry, KlassHashtableEntry)                    \
1613     declare_type(PlaceholderEntry, SymbolHashtableEntry)                  \
1614     declare_type(LoaderConstraintEntry, KlassHashtableEntry)              \
1615   declare_toplevel_type(HashtableBucket&lt;mtInternal&gt;)                      \
1616   declare_toplevel_type(SystemDictionary)                                 \
1617   declare_toplevel_type(vmSymbols)                                        \
1618   declare_toplevel_type(ProtectionDomainEntry)                            \
1619   declare_toplevel_type(ProtectionDomainCacheEntry)                       \
1620                                                                           \
1621   declare_toplevel_type(GenericGrowableArray)                             \
1622   declare_toplevel_type(GrowableArray&lt;int&gt;)                               \
1623   declare_toplevel_type(Arena)                                            \
1624     declare_type(ResourceArea, Arena)                                     \
1625   declare_toplevel_type(Chunk)                                            \
1626                                                                           \
1627   /***********************************************************/           \
1628   /* Thread hierarchy (needed for run-time type information) */           \
1629   /***********************************************************/           \
1630                                                                           \
1631   declare_toplevel_type(Threads)                                          \
1632   declare_toplevel_type(ThreadShadow)                                     \
1633            declare_type(Thread, ThreadShadow)                             \
1634            declare_type(NamedThread, Thread)                              \
1635            declare_type(WatcherThread, Thread)                            \
1636            declare_type(JavaThread, Thread)                               \
1637            declare_type(JvmtiAgentThread, JavaThread)                     \
1638            declare_type(ServiceThread, JavaThread)                        \
1639   declare_type(CompilerThread, JavaThread)                                \
1640   declare_toplevel_type(OSThread)                                         \
1641   declare_toplevel_type(JavaFrameAnchor)                                  \
1642                                                                           \
1643   /***************/                                                       \
1644   /* Interpreter */                                                       \
1645   /***************/                                                       \
1646                                                                           \
1647   declare_toplevel_type(AbstractInterpreter)                              \
1648                                                                           \
1649   /*********/                                                             \
1650   /* Stubs */                                                             \
1651   /*********/                                                             \
1652                                                                           \
1653   declare_toplevel_type(StubQueue)                                        \
1654   declare_toplevel_type(StubRoutines)                                     \
1655   declare_toplevel_type(Stub)                                             \
1656            declare_type(InterpreterCodelet, Stub)                         \
1657                                                                           \
1658   /*************/                                                         \
1659   /* JavaCalls */                                                         \
1660   /*************/                                                         \
1661                                                                           \
1662   declare_toplevel_type(JavaCallWrapper)                                  \
1663                                                                           \
1664   /*************/                                                         \
1665   /* CodeCache */                                                         \
1666   /*************/                                                         \
1667                                                                           \
1668   declare_toplevel_type(CodeCache)                                        \
1669                                                                           \
1670   /************/                                                          \
1671   /* CodeHeap */                                                          \
1672   /************/                                                          \
1673                                                                           \
1674   declare_toplevel_type(CodeHeap)                                         \
1675   declare_toplevel_type(CodeHeap*)                                        \
1676   declare_toplevel_type(HeapBlock)                                        \
1677   declare_toplevel_type(HeapBlock::Header)                                \
1678            declare_type(FreeBlock, HeapBlock)                             \
1679                                                                           \
1680   /*************************************************************/         \
1681   /* CodeBlob hierarchy (needed for run-time type information) */         \
1682   /*************************************************************/         \
1683                                                                           \
1684   declare_toplevel_type(SharedRuntime)                                    \
1685                                                                           \
1686   declare_toplevel_type(CodeBlob)                                         \
1687   declare_type(BufferBlob,               CodeBlob)                        \
1688   declare_type(AdapterBlob,              BufferBlob)                      \
1689   declare_type(MethodHandlesAdapterBlob, BufferBlob)                      \
1690   declare_type(nmethod,                  CodeBlob)                        \
1691   declare_type(RuntimeStub,              CodeBlob)                        \
1692   declare_type(SingletonBlob,            CodeBlob)                        \
1693   declare_type(SafepointBlob,            SingletonBlob)                   \
1694   declare_type(DeoptimizationBlob,       SingletonBlob)                   \
1695   declare_c2_type(ExceptionBlob,         SingletonBlob)                   \
1696   declare_c2_type(UncommonTrapBlob,      CodeBlob)                        \
1697                                                                           \
1698   /***************************************/                               \
1699   /* PcDesc and other compiled code info */                               \
1700   /***************************************/                               \
1701                                                                           \
1702   declare_toplevel_type(PcDesc)                                           \
1703   declare_toplevel_type(ExceptionCache)                                   \
1704   declare_toplevel_type(PcDescCache)                                      \
1705   declare_toplevel_type(Dependencies)                                     \
1706   declare_toplevel_type(CompileTask)                                      \
1707   declare_toplevel_type(Deoptimization)                                   \
1708   declare_toplevel_type(Deoptimization::UnrollBlock)                      \
1709                                                                           \
1710   /************************/                                              \
1711   /* OopMap and OopMapSet */                                              \
1712   /************************/                                              \
1713                                                                           \
1714   declare_toplevel_type(OopMap)                                           \
1715   declare_toplevel_type(OopMapSet)                                        \
1716                                                                           \
1717   /********************/                                                  \
1718   /* CompressedStream */                                                  \
1719   /********************/                                                  \
1720                                                                           \
1721   declare_toplevel_type(CompressedStream)                                 \
1722                                                                           \
1723   /**************/                                                        \
1724   /* VMRegImpl  */                                                        \
1725   /**************/                                                        \
1726                                                                           \
1727   declare_toplevel_type(VMRegImpl)                                        \
1728                                                                           \
1729   /*********************************/                                     \
1730   /* JNIHandles and JNIHandleBlock */                                     \
1731   /*********************************/                                     \
1732                                                                           \
1733   declare_toplevel_type(JNIHandles)                                       \
1734   declare_toplevel_type(JNIHandleBlock)                                   \
1735   declare_toplevel_type(jobject)                                          \
1736                                                                           \
1737   /**********************/                                                \
1738   /* Runtime1 (C1 only) */                                                \
1739   /**********************/                                                \
1740                                                                           \
1741   declare_c1_toplevel_type(Runtime1)                                      \
1742                                                                           \
1743   /************/                                                          \
1744   /* Monitors */                                                          \
1745   /************/                                                          \
1746                                                                           \
1747   declare_toplevel_type(ObjectMonitor)                                    \
1748   declare_toplevel_type(ObjectSynchronizer)                               \
1749   declare_toplevel_type(BasicLock)                                        \
1750   declare_toplevel_type(BasicObjectLock)                                  \
1751                                                                           \
1752   /*********************/                                                 \
1753   /* Matcher (C2 only) */                                                 \
1754   /*********************/                                                 \
1755                                                                           \
1756   declare_c2_toplevel_type(Matcher)                                       \
1757   declare_c2_toplevel_type(Compile)                                       \
1758   declare_c2_toplevel_type(InlineTree)                                    \
1759   declare_c2_toplevel_type(OptoRegPair)                                   \
1760   declare_c2_toplevel_type(JVMState)                                      \
1761   declare_c2_toplevel_type(Phase)                                         \
1762     declare_c2_type(PhaseCFG, Phase)                                      \
1763     declare_c2_type(PhaseRegAlloc, Phase)                                 \
1764     declare_c2_type(PhaseChaitin, PhaseRegAlloc)                          \
1765   declare_c2_toplevel_type(CFGElement)                                    \
1766     declare_c2_type(Block, CFGElement)                                    \
1767   declare_c2_toplevel_type(Block_Array)                                   \
1768     declare_c2_type(Block_List, Block_Array)                              \
1769   declare_c2_toplevel_type(Node_Array)                                    \
1770   declare_c2_type(Node_List, Node_Array)                                  \
1771   declare_c2_type(Unique_Node_List, Node_List)                            \
1772   declare_c2_toplevel_type(Node)                                          \
1773   declare_c2_type(AddNode, Node)                                          \
1774   declare_c2_type(AddINode, AddNode)                                      \
1775   declare_c2_type(AddLNode, AddNode)                                      \
1776   declare_c2_type(AddFNode, AddNode)                                      \
1777   declare_c2_type(AddDNode, AddNode)                                      \
1778   declare_c2_type(AddPNode, Node)                                         \
1779   declare_c2_type(OrINode, AddNode)                                       \
1780   declare_c2_type(OrLNode, AddNode)                                       \
1781   declare_c2_type(XorINode, AddNode)                                      \
1782   declare_c2_type(XorLNode, AddNode)                                      \
1783   declare_c2_type(MaxNode, AddNode)                                       \
1784   declare_c2_type(MaxINode, MaxNode)                                      \
1785   declare_c2_type(MinINode, MaxNode)                                      \
1786   declare_c2_type(StartNode, MultiNode)                                   \
1787   declare_c2_type(StartOSRNode, StartNode)                                \
1788   declare_c2_type(ParmNode, ProjNode)                                     \
1789   declare_c2_type(ReturnNode, Node)                                       \
1790   declare_c2_type(RethrowNode, Node)                                      \
1791   declare_c2_type(TailCallNode, ReturnNode)                               \
1792   declare_c2_type(TailJumpNode, ReturnNode)                               \
1793   declare_c2_type(SafePointNode, MultiNode)                               \
1794   declare_c2_type(CallNode, SafePointNode)                                \
1795   declare_c2_type(CallJavaNode, CallNode)                                 \
1796   declare_c2_type(CallStaticJavaNode, CallJavaNode)                       \
1797   declare_c2_type(CallDynamicJavaNode, CallJavaNode)                      \
1798   declare_c2_type(CallRuntimeNode, CallNode)                              \
1799   declare_c2_type(CallLeafNode, CallRuntimeNode)                          \
1800   declare_c2_type(CallLeafNoFPNode, CallLeafNode)                         \
1801   declare_c2_type(AllocateNode, CallNode)                                 \
1802   declare_c2_type(AllocateArrayNode, AllocateNode)                        \
1803   declare_c2_type(LockNode, AbstractLockNode)                             \
1804   declare_c2_type(UnlockNode, AbstractLockNode)                           \
1805   declare_c2_type(FastLockNode, CmpNode)                                  \
1806   declare_c2_type(FastUnlockNode, CmpNode)                                \
1807   declare_c2_type(RegionNode, Node)                                       \
1808   declare_c2_type(JProjNode, ProjNode)                                    \
1809   declare_c2_type(PhiNode, TypeNode)                                      \
1810   declare_c2_type(GotoNode, Node)                                         \
1811   declare_c2_type(CProjNode, ProjNode)                                    \
1812   declare_c2_type(MultiBranchNode, MultiNode)                             \
1813   declare_c2_type(IfNode, MultiBranchNode)                                \
1814   declare_c2_type(IfTrueNode, CProjNode)                                  \
1815   declare_c2_type(IfFalseNode, CProjNode)                                 \
1816   declare_c2_type(PCTableNode, MultiBranchNode)                           \
1817   declare_c2_type(JumpNode, PCTableNode)                                  \
1818   declare_c2_type(JumpProjNode, JProjNode)                                \
1819   declare_c2_type(CatchNode, PCTableNode)                                 \
1820   declare_c2_type(CatchProjNode, CProjNode)                               \
1821   declare_c2_type(CreateExNode, TypeNode)                                 \
1822   declare_c2_type(ClearArrayNode, Node)                                   \
1823   declare_c2_type(NeverBranchNode, MultiBranchNode)                       \
1824   declare_c2_type(ConNode, TypeNode)                                      \
1825   declare_c2_type(ConINode, ConNode)                                      \
1826   declare_c2_type(ConPNode, ConNode)                                      \
1827   declare_c2_type(ConNNode, ConNode)                                      \
1828   declare_c2_type(ConLNode, ConNode)                                      \
1829   declare_c2_type(ConFNode, ConNode)                                      \
1830   declare_c2_type(ConDNode, ConNode)                                      \
1831   declare_c2_type(BinaryNode, Node)                                       \
1832   declare_c2_type(CMoveNode, TypeNode)                                    \
1833   declare_c2_type(CMoveDNode, CMoveNode)                                  \
1834   declare_c2_type(CMoveFNode, CMoveNode)                                  \
1835   declare_c2_type(CMoveINode, CMoveNode)                                  \
1836   declare_c2_type(CMoveLNode, CMoveNode)                                  \
1837   declare_c2_type(CMovePNode, CMoveNode)                                  \
1838   declare_c2_type(CMoveNNode, CMoveNode)                                  \
1839   declare_c2_type(EncodePNode, TypeNode)                                  \
1840   declare_c2_type(DecodeNNode, TypeNode)                                  \
1841   declare_c2_type(EncodePKlassNode, TypeNode)                             \
1842   declare_c2_type(DecodeNKlassNode, TypeNode)                             \
1843   declare_c2_type(ConstraintCastNode, TypeNode)                           \
1844   declare_c2_type(CastIINode, ConstraintCastNode)                         \
1845   declare_c2_type(CastPPNode, ConstraintCastNode)                         \
1846   declare_c2_type(CheckCastPPNode, TypeNode)                              \
1847   declare_c2_type(Conv2BNode, Node)                                       \
1848   declare_c2_type(ConvD2FNode, Node)                                      \
1849   declare_c2_type(ConvD2INode, Node)                                      \
1850   declare_c2_type(ConvD2LNode, Node)                                      \
1851   declare_c2_type(ConvF2DNode, Node)                                      \
1852   declare_c2_type(ConvF2INode, Node)                                      \
1853   declare_c2_type(ConvF2LNode, Node)                                      \
1854   declare_c2_type(ConvI2DNode, Node)                                      \
1855   declare_c2_type(ConvI2FNode, Node)                                      \
1856   declare_c2_type(ConvI2LNode, TypeNode)                                  \
1857   declare_c2_type(ConvL2DNode, Node)                                      \
1858   declare_c2_type(ConvL2FNode, Node)                                      \
1859   declare_c2_type(ConvL2INode, Node)                                      \
1860   declare_c2_type(CastX2PNode, Node)                                      \
1861   declare_c2_type(CastP2XNode, Node)                                      \
1862   declare_c2_type(MemBarNode, MultiNode)                                  \
1863   declare_c2_type(MemBarAcquireNode, MemBarNode)                          \
1864   declare_c2_type(MemBarReleaseNode, MemBarNode)                          \
1865   declare_c2_type(MemBarVolatileNode, MemBarNode)                         \
1866   declare_c2_type(MemBarCPUOrderNode, MemBarNode)                         \
1867   declare_c2_type(InitializeNode, MemBarNode)                             \
1868   declare_c2_type(ThreadLocalNode, Node)                                  \
1869   declare_c2_type(Opaque1Node, Node)                                      \
1870   declare_c2_type(Opaque2Node, Node)                                      \
1871   declare_c2_type(PartialSubtypeCheckNode, Node)                          \
1872   declare_c2_type(MoveI2FNode, Node)                                      \
1873   declare_c2_type(MoveL2DNode, Node)                                      \
1874   declare_c2_type(MoveF2INode, Node)                                      \
1875   declare_c2_type(MoveD2LNode, Node)                                      \
1876   declare_c2_type(DivINode, Node)                                         \
1877   declare_c2_type(DivLNode, Node)                                         \
1878   declare_c2_type(DivFNode, Node)                                         \
1879   declare_c2_type(DivDNode, Node)                                         \
1880   declare_c2_type(ModINode, Node)                                         \
1881   declare_c2_type(ModLNode, Node)                                         \
1882   declare_c2_type(ModFNode, Node)                                         \
1883   declare_c2_type(ModDNode, Node)                                         \
1884   declare_c2_type(DivModNode, MultiNode)                                  \
1885   declare_c2_type(DivModINode, DivModNode)                                \
1886   declare_c2_type(DivModLNode, DivModNode)                                \
1887   declare_c2_type(BoxLockNode, Node)                                      \
1888   declare_c2_type(LoopNode, RegionNode)                                   \
1889   declare_c2_type(CountedLoopNode, LoopNode)                              \
1890   declare_c2_type(CountedLoopEndNode, IfNode)                             \
1891   declare_c2_type(MachNode, Node)                                         \
1892   declare_c2_type(MachIdealNode, MachNode)                                \
1893   declare_c2_type(MachTypeNode, MachNode)                                 \
1894   declare_c2_type(MachBreakpointNode, MachIdealNode)                      \
1895   declare_c2_type(MachUEPNode, MachIdealNode)                             \
1896   declare_c2_type(MachPrologNode, MachIdealNode)                          \
1897   declare_c2_type(MachEpilogNode, MachIdealNode)                          \
1898   declare_c2_type(MachNopNode, MachIdealNode)                             \
1899   declare_c2_type(MachSpillCopyNode, MachIdealNode)                       \
1900   declare_c2_type(MachNullCheckNode, MachIdealNode)                       \
1901   declare_c2_type(MachProjNode, ProjNode)                                 \
1902   declare_c2_type(MachIfNode, MachNode)                                   \
1903   declare_c2_type(MachFastLockNode, MachNode)                             \
1904   declare_c2_type(MachReturnNode, MachNode)                               \
1905   declare_c2_type(MachSafePointNode, MachReturnNode)                      \
1906   declare_c2_type(MachCallNode, MachSafePointNode)                        \
1907   declare_c2_type(MachCallJavaNode, MachCallNode)                         \
1908   declare_c2_type(MachCallStaticJavaNode, MachCallJavaNode)               \
1909   declare_c2_type(MachCallDynamicJavaNode, MachCallJavaNode)              \
1910   declare_c2_type(MachCallRuntimeNode, MachCallNode)                      \
1911   declare_c2_type(MachHaltNode, MachReturnNode)                           \
1912   declare_c2_type(MachTempNode, MachNode)                                 \
1913   declare_c2_type(MemNode, Node)                                          \
1914   declare_c2_type(MergeMemNode, Node)                                     \
1915   declare_c2_type(LoadNode, MemNode)                                      \
1916   declare_c2_type(LoadBNode, LoadNode)                                    \
1917   declare_c2_type(LoadUSNode, LoadNode)                                   \
1918   declare_c2_type(LoadINode, LoadNode)                                    \
1919   declare_c2_type(LoadRangeNode, LoadINode)                               \
1920   declare_c2_type(LoadLNode, LoadNode)                                    \
1921   declare_c2_type(LoadL_unalignedNode, LoadLNode)                         \
1922   declare_c2_type(LoadFNode, LoadNode)                                    \
1923   declare_c2_type(LoadDNode, LoadNode)                                    \
1924   declare_c2_type(LoadD_unalignedNode, LoadDNode)                         \
1925   declare_c2_type(LoadPNode, LoadNode)                                    \
1926   declare_c2_type(LoadNNode, LoadNode)                                    \
1927   declare_c2_type(LoadKlassNode, LoadPNode)                               \
1928   declare_c2_type(LoadNKlassNode, LoadNNode)                              \
1929   declare_c2_type(LoadSNode, LoadNode)                                    \
1930   declare_c2_type(StoreNode, MemNode)                                     \
1931   declare_c2_type(StoreBNode, StoreNode)                                  \
1932   declare_c2_type(StoreCNode, StoreNode)                                  \
1933   declare_c2_type(StoreINode, StoreNode)                                  \
1934   declare_c2_type(StoreLNode, StoreNode)                                  \
1935   declare_c2_type(StoreFNode, StoreNode)                                  \
1936   declare_c2_type(StoreDNode, StoreNode)                                  \
1937   declare_c2_type(StorePNode, StoreNode)                                  \
1938   declare_c2_type(StoreNNode, StoreNode)                                  \
1939   declare_c2_type(StoreNKlassNode, StoreNode)                             \
1940   declare_c2_type(StoreCMNode, StoreNode)                                 \
1941   declare_c2_type(LoadPLockedNode, LoadPNode)                             \
1942   declare_c2_type(SCMemProjNode, ProjNode)                                \
1943   declare_c2_type(LoadStoreNode, Node)                                    \
1944   declare_c2_type(StorePConditionalNode, LoadStoreNode)                   \
1945   declare_c2_type(StoreLConditionalNode, LoadStoreNode)                   \
1946   declare_c2_type(CompareAndSwapLNode, LoadStoreNode)                     \
1947   declare_c2_type(CompareAndSwapINode, LoadStoreNode)                     \
1948   declare_c2_type(CompareAndSwapPNode, LoadStoreNode)                     \
1949   declare_c2_type(CompareAndSwapNNode, LoadStoreNode)                     \
1950   declare_c2_type(PrefetchReadNode, Node)                                 \
1951   declare_c2_type(PrefetchWriteNode, Node)                                \
1952   declare_c2_type(MulNode, Node)                                          \
1953   declare_c2_type(MulINode, MulNode)                                      \
1954   declare_c2_type(MulLNode, MulNode)                                      \
1955   declare_c2_type(MulFNode, MulNode)                                      \
1956   declare_c2_type(MulDNode, MulNode)                                      \
1957   declare_c2_type(MulHiLNode, Node)                                       \
1958   declare_c2_type(AndINode, MulINode)                                     \
1959   declare_c2_type(AndLNode, MulLNode)                                     \
1960   declare_c2_type(LShiftINode, Node)                                      \
1961   declare_c2_type(LShiftLNode, Node)                                      \
1962   declare_c2_type(RShiftINode, Node)                                      \
1963   declare_c2_type(RShiftLNode, Node)                                      \
1964   declare_c2_type(URShiftINode, Node)                                     \
1965   declare_c2_type(URShiftLNode, Node)                                     \
1966   declare_c2_type(MultiNode, Node)                                        \
1967   declare_c2_type(ProjNode, Node)                                         \
1968   declare_c2_type(TypeNode, Node)                                         \
1969   declare_c2_type(NodeHash, StackObj)                                     \
1970   declare_c2_type(RootNode, LoopNode)                                     \
1971   declare_c2_type(HaltNode, Node)                                         \
1972   declare_c2_type(SubNode, Node)                                          \
1973   declare_c2_type(SubINode, SubNode)                                      \
1974   declare_c2_type(SubLNode, SubNode)                                      \
1975   declare_c2_type(SubFPNode, SubNode)                                     \
1976   declare_c2_type(SubFNode, SubFPNode)                                    \
1977   declare_c2_type(SubDNode, SubFPNode)                                    \
1978   declare_c2_type(CmpNode, SubNode)                                       \
1979   declare_c2_type(CmpINode, CmpNode)                                      \
1980   declare_c2_type(CmpUNode, CmpNode)                                      \
1981   declare_c2_type(CmpPNode, CmpNode)                                      \
1982   declare_c2_type(CmpNNode, CmpNode)                                      \
1983   declare_c2_type(CmpLNode, CmpNode)                                      \
1984   declare_c2_type(CmpL3Node, CmpLNode)                                    \
1985   declare_c2_type(CmpFNode, CmpNode)                                      \
1986   declare_c2_type(CmpF3Node, CmpFNode)                                    \
1987   declare_c2_type(CmpDNode, CmpNode)                                      \
1988   declare_c2_type(CmpD3Node, CmpDNode)                                    \
1989   declare_c2_type(MathExactNode, MultiNode)                               \
1990   declare_c2_type(MathExactINode, MathExactNode)                          \
1991   declare_c2_type(AddExactINode, MathExactINode)                          \
1992   declare_c2_type(AddExactLNode, MathExactLNode)                          \
1993   declare_c2_type(SubExactINode, MathExactINode)                          \
1994   declare_c2_type(SubExactLNode, MathExactLNode)                          \
1995   declare_c2_type(NegExactINode, MathExactINode)                          \
1996   declare_c2_type(MulExactINode, MathExactINode)                          \
1997   declare_c2_type(FlagsProjNode, ProjNode)                                \
1998   declare_c2_type(BoolNode, Node)                                         \
1999   declare_c2_type(AbsNode, Node)                                          \
2000   declare_c2_type(AbsINode, AbsNode)                                      \
2001   declare_c2_type(AbsFNode, AbsNode)                                      \
2002   declare_c2_type(AbsDNode, AbsNode)                                      \
2003   declare_c2_type(CmpLTMaskNode, Node)                                    \
2004   declare_c2_type(NegNode, Node)                                          \
2005   declare_c2_type(NegFNode, NegNode)                                      \
2006   declare_c2_type(NegDNode, NegNode)                                      \
2007   declare_c2_type(CosDNode, Node)                                         \
2008   declare_c2_type(SinDNode, Node)                                         \
2009   declare_c2_type(TanDNode, Node)                                         \
2010   declare_c2_type(AtanDNode, Node)                                        \
2011   declare_c2_type(SqrtDNode, Node)                                        \
2012   declare_c2_type(ExpDNode, Node)                                         \
2013   declare_c2_type(LogDNode, Node)                                         \
2014   declare_c2_type(Log10DNode, Node)                                       \
2015   declare_c2_type(PowDNode, Node)                                         \
2016   declare_c2_type(ReverseBytesINode, Node)                                \
2017   declare_c2_type(ReverseBytesLNode, Node)                                \
2018   declare_c2_type(VectorNode, Node)                                       \
2019   declare_c2_type(AddVBNode, VectorNode)                                  \
2020   declare_c2_type(AddVSNode, VectorNode)                                  \
2021   declare_c2_type(AddVINode, VectorNode)                                  \
2022   declare_c2_type(AddVLNode, VectorNode)                                  \
2023   declare_c2_type(AddVFNode, VectorNode)                                  \
2024   declare_c2_type(AddVDNode, VectorNode)                                  \
2025   declare_c2_type(SubVBNode, VectorNode)                                  \
2026   declare_c2_type(SubVSNode, VectorNode)                                  \
2027   declare_c2_type(SubVINode, VectorNode)                                  \
2028   declare_c2_type(SubVLNode, VectorNode)                                  \
2029   declare_c2_type(SubVFNode, VectorNode)                                  \
2030   declare_c2_type(SubVDNode, VectorNode)                                  \
2031   declare_c2_type(MulVSNode, VectorNode)                                  \
2032   declare_c2_type(MulVINode, VectorNode)                                  \
2033   declare_c2_type(MulVFNode, VectorNode)                                  \
2034   declare_c2_type(MulVDNode, VectorNode)                                  \
2035   declare_c2_type(DivVFNode, VectorNode)                                  \
2036   declare_c2_type(DivVDNode, VectorNode)                                  \
2037   declare_c2_type(LShiftVBNode, VectorNode)                               \
2038   declare_c2_type(LShiftVSNode, VectorNode)                               \
2039   declare_c2_type(LShiftVINode, VectorNode)                               \
2040   declare_c2_type(LShiftVLNode, VectorNode)                               \
2041   declare_c2_type(RShiftVBNode, VectorNode)                               \
2042   declare_c2_type(RShiftVSNode, VectorNode)                               \
2043   declare_c2_type(RShiftVINode, VectorNode)                               \
2044   declare_c2_type(RShiftVLNode, VectorNode)                               \
2045   declare_c2_type(URShiftVBNode, VectorNode)                              \
2046   declare_c2_type(URShiftVSNode, VectorNode)                              \
2047   declare_c2_type(URShiftVINode, VectorNode)                              \
2048   declare_c2_type(URShiftVLNode, VectorNode)                              \
2049   declare_c2_type(AndVNode, VectorNode)                                   \
2050   declare_c2_type(OrVNode, VectorNode)                                    \
2051   declare_c2_type(XorVNode, VectorNode)                                   \
2052   declare_c2_type(LoadVectorNode, LoadNode)                               \
2053   declare_c2_type(StoreVectorNode, StoreNode)                             \
2054   declare_c2_type(ReplicateBNode, VectorNode)                             \
2055   declare_c2_type(ReplicateSNode, VectorNode)                             \
2056   declare_c2_type(ReplicateINode, VectorNode)                             \
2057   declare_c2_type(ReplicateLNode, VectorNode)                             \
2058   declare_c2_type(ReplicateFNode, VectorNode)                             \
2059   declare_c2_type(ReplicateDNode, VectorNode)                             \
2060   declare_c2_type(PackNode, VectorNode)                                   \
2061   declare_c2_type(PackBNode, PackNode)                                    \
2062   declare_c2_type(PackSNode, PackNode)                                    \
2063   declare_c2_type(PackINode, PackNode)                                    \
2064   declare_c2_type(PackLNode, PackNode)                                    \
2065   declare_c2_type(PackFNode, PackNode)                                    \
2066   declare_c2_type(PackDNode, PackNode)                                    \
2067   declare_c2_type(Pack2LNode, PackNode)                                   \
2068   declare_c2_type(Pack2DNode, PackNode)                                   \
2069   declare_c2_type(ExtractNode, Node)                                      \
2070   declare_c2_type(ExtractBNode, ExtractNode)                              \
2071   declare_c2_type(ExtractUBNode, ExtractNode)                             \
2072   declare_c2_type(ExtractCNode, ExtractNode)                              \
2073   declare_c2_type(ExtractSNode, ExtractNode)                              \
2074   declare_c2_type(ExtractINode, ExtractNode)                              \
2075   declare_c2_type(ExtractLNode, ExtractNode)                              \
2076   declare_c2_type(ExtractFNode, ExtractNode)                              \
2077   declare_c2_type(ExtractDNode, ExtractNode)                              \
2078                                                                           \
2079   /*********************/                                                 \
2080   /* Adapter Blob Entries */                                              \
2081   /*********************/                                                 \
2082   declare_toplevel_type(AdapterHandlerEntry)                              \
2083   declare_toplevel_type(AdapterHandlerEntry*)                             \
2084                                                                           \
2085   /*********************/                                                 \
2086   /* CI */                                                                \
2087   /*********************/                                                 \
2088   declare_toplevel_type(ciEnv)                                            \
2089   declare_toplevel_type(ciObjectFactory)                                  \
2090   declare_toplevel_type(ciConstant)                                       \
2091   declare_toplevel_type(ciField)                                          \
2092   declare_toplevel_type(ciSymbol)                                         \
2093   declare_toplevel_type(ciBaseObject)                                     \
2094   declare_type(ciObject, ciBaseObject)                                    \
2095   declare_type(ciInstance, ciObject)                                      \
2096   declare_type(ciMetadata, ciBaseObject)                                  \
2097   declare_type(ciMethod, ciMetadata)                                      \
2098   declare_type(ciMethodData, ciMetadata)                                  \
2099   declare_type(ciType, ciMetadata)                                        \
2100   declare_type(ciKlass, ciType)                                           \
2101   declare_type(ciInstanceKlass, ciKlass)                                  \
2102   declare_type(ciArrayKlass, ciKlass)                                     \
2103   declare_type(ciTypeArrayKlass, ciArrayKlass)                            \
2104   declare_type(ciObjArrayKlass, ciArrayKlass)                             \
2105                                                                           \
2106   /********************/                                                  \
2107   /* -XX flags        */                                                  \
2108   /********************/                                                  \
2109                                                                           \
2110   declare_toplevel_type(Flag)                                             \
2111   declare_toplevel_type(Flag*)                                            \
2112                                                                           \
2113   /********************/                                                  \
2114   /* JVMTI            */                                                  \
2115   /********************/                                                  \
2116                                                                           \
2117   declare_toplevel_type(JvmtiExport)                                      \
2118                                                                           \
2119   /********************/                                                  \
2120   /* JDK/VM version   */                                                  \
2121   /********************/                                                  \
2122                                                                           \
2123   declare_toplevel_type(Abstract_VM_Version)                              \
2124   declare_toplevel_type(JDK_Version)                                      \
2125                                                                           \
2126   /*************/                                                         \
2127   /* Arguments */                                                         \
2128   /*************/                                                         \
2129                                                                           \
2130   declare_toplevel_type(Arguments)                                        \
2131                                                                           \
2132   /***************/                                                       \
2133   /* Other types */                                                       \
2134   /***************/                                                       \
2135                                                                           \
2136   /* all enum types */                                                    \
2137                                                                           \
2138    declare_integer_type(Bytecodes::Code)                                  \
2139    declare_integer_type(Generation::Name)                                 \
2140    declare_integer_type(InstanceKlass::ClassState)                        \
2141    declare_integer_type(JavaThreadState)                                  \
2142    declare_integer_type(Location::Type)                                   \
2143    declare_integer_type(Location::Where)                                  \
2144    declare_integer_type(Flag::Flags)                                      \
2145    COMPILER2_PRESENT(declare_integer_type(OptoReg::Name))                 \
2146                                                                           \
2147    declare_toplevel_type(CHeapObj&lt;mtInternal&gt;)                            \
2148             declare_type(Array&lt;int&gt;, MetaspaceObj)                        \
2149             declare_type(Array&lt;u1&gt;, MetaspaceObj)                         \
2150             declare_type(Array&lt;u2&gt;, MetaspaceObj)                         \
2151             declare_type(Array&lt;Klass*&gt;, MetaspaceObj)                     \
2152             declare_type(Array&lt;Method*&gt;, MetaspaceObj)                    \
2153                                                                           \
2154    declare_integer_type(AccessFlags)  /* FIXME: wrong type (not integer) */\
2155   declare_toplevel_type(address)      /* FIXME: should this be an integer type? */\
2156    declare_integer_type(BasicType)   /* FIXME: wrong type (not integer) */\
2157   declare_toplevel_type(BreakpointInfo)                                   \
2158   declare_toplevel_type(BreakpointInfo*)                                  \
2159   declare_toplevel_type(CodeBlob*)                                        \
2160   declare_toplevel_type(CompressedWriteStream*)                           \
2161   declare_toplevel_type(ConstantPoolCacheEntry)                           \
2162   declare_toplevel_type(elapsedTimer)                                     \
2163   declare_toplevel_type(frame)                                            \
2164   declare_toplevel_type(intptr_t*)                                        \
2165    declare_unsigned_integer_type(InvocationCounter) /* FIXME: wrong type (not integer) */ \
2166   declare_toplevel_type(JavaThread*)                                      \
2167   declare_toplevel_type(java_lang_Class)                                  \
2168   declare_integer_type(JavaThread::AsyncRequests)                         \
2169   declare_toplevel_type(jbyte*)                                           \
2170   declare_toplevel_type(jbyte**)                                          \
2171   declare_toplevel_type(jint*)                                            \
2172   declare_toplevel_type(jniIdMapBase*)                                    \
2173   declare_unsigned_integer_type(juint)                                    \
2174   declare_unsigned_integer_type(julong)                                   \
2175   declare_toplevel_type(JNIHandleBlock*)                                  \
2176   declare_toplevel_type(JNIid)                                            \
2177   declare_toplevel_type(JNIid*)                                           \
2178   declare_toplevel_type(jmethodID*)                                       \
2179   declare_toplevel_type(Mutex*)                                           \
2180   declare_toplevel_type(nmethod*)                                         \
2181   COMPILER2_PRESENT(declare_unsigned_integer_type(node_idx_t))            \
2182   declare_toplevel_type(ObjectMonitor*)                                   \
2183   declare_toplevel_type(oop*)                                             \
2184   declare_toplevel_type(OopMap**)                                         \
2185   declare_toplevel_type(OopMapCache*)                                     \
2186   declare_toplevel_type(OopMapSet*)                                       \
2187   declare_toplevel_type(VMReg)                                            \
2188   declare_toplevel_type(OSThread*)                                        \
2189    declare_integer_type(ReferenceType)                                    \
2190   declare_toplevel_type(StubQueue*)                                       \
2191   declare_toplevel_type(Thread*)                                          \
2192   declare_toplevel_type(Universe)                                         \
2193   declare_toplevel_type(os)                                               \
2194   declare_toplevel_type(vframeArray)                                      \
2195   declare_toplevel_type(vframeArrayElement)                               \
2196   declare_toplevel_type(Annotations*)                                     \
2197                                                                           \
2198   /***************/                                                       \
2199   /* Miscellaneous types */                                               \
2200   /***************/                                                       \
2201                                                                           \
2202   declare_toplevel_type(PtrQueue)                                         \
2203                                                                           \
2204   /* freelist */                                                          \
2205   declare_toplevel_type(FreeChunk*)                                       \
2206   declare_toplevel_type(Metablock*)                                       \
2207   declare_toplevel_type(FreeBlockDictionary&lt;FreeChunk&gt;*)                  \
2208   declare_toplevel_type(FreeList&lt;FreeChunk&gt;*)                             \
2209   declare_toplevel_type(FreeList&lt;FreeChunk&gt;)                              \
2210   declare_toplevel_type(FreeBlockDictionary&lt;Metablock&gt;*)                  \
2211   declare_toplevel_type(FreeList&lt;Metablock&gt;*)                             \
2212   declare_toplevel_type(FreeList&lt;Metablock&gt;)                              \
2213   declare_type(MetablockTreeDictionary, FreeBlockDictionary&lt;Metablock&gt;)
2214 
2215 
2216 //--------------------------------------------------------------------------------
2217 // VM_INT_CONSTANTS
2218 //
2219 // This table contains integer constants required over in the
2220 // serviceability agent. The "declare_constant" macro is used for all
2221 // enums, etc., while "declare_preprocessor_constant" must be used for
2222 // all #defined constants.
2223 
2224 #define VM_INT_CONSTANTS(declare_constant,                                \
2225                          declare_preprocessor_constant,                   \
2226                          declare_c1_constant,                             \
2227                          declare_c2_constant,                             \
2228                          declare_c2_preprocessor_constant)                \
2229                                                                           \
2230   /******************/                                                    \
2231   /* Useful globals */                                                    \
2232   /******************/                                                    \
2233                                                                           \
2234   declare_preprocessor_constant("ASSERT", DEBUG_ONLY(1) NOT_DEBUG(0))     \
2235                                                                           \
2236   /**************/                                                        \
2237   /* Stack bias */                                                        \
2238   /**************/                                                        \
2239                                                                           \
2240   declare_preprocessor_constant("STACK_BIAS", STACK_BIAS)                 \
2241                                                                           \
2242   /****************/                                                      \
2243   /* Object sizes */                                                      \
2244   /****************/                                                      \
2245                                                                           \
2246   declare_constant(oopSize)                                               \
2247   declare_constant(LogBytesPerWord)                                       \
2248   declare_constant(BytesPerWord)                                          \
2249   declare_constant(BytesPerLong)                                          \
2250                                                                           \
2251   declare_constant(LogKlassAlignmentInBytes)                              \
2252                                                                           \
2253   /********************************************/                          \
2254   /* Generation and Space Hierarchy Constants */                          \
2255   /********************************************/                          \
2256                                                                           \
2257   declare_constant(ageTable::table_size)                                  \
2258                                                                           \
2259   declare_constant(BarrierSet::ModRef)                                    \
2260   declare_constant(BarrierSet::CardTableModRef)                           \
2261   declare_constant(BarrierSet::CardTableExtension)                        \
2262   declare_constant(BarrierSet::G1SATBCT)                                  \
2263   declare_constant(BarrierSet::G1SATBCTLogging)                           \
2264   declare_constant(BarrierSet::Other)                                     \
2265                                                                           \
2266   declare_constant(BlockOffsetSharedArray::LogN)                          \
2267   declare_constant(BlockOffsetSharedArray::LogN_words)                    \
2268   declare_constant(BlockOffsetSharedArray::N_bytes)                       \
2269   declare_constant(BlockOffsetSharedArray::N_words)                       \
2270                                                                           \
2271   declare_constant(BlockOffsetArray::N_words)                             \
2272                                                                           \
2273   declare_constant(CardTableModRefBS::clean_card)                         \
2274   declare_constant(CardTableModRefBS::last_card)                          \
2275   declare_constant(CardTableModRefBS::dirty_card)                         \
2276   declare_constant(CardTableModRefBS::Precise)                            \
2277   declare_constant(CardTableModRefBS::ObjHeadPreciseArray)                \
2278   declare_constant(CardTableModRefBS::card_shift)                         \
2279   declare_constant(CardTableModRefBS::card_size)                          \
2280   declare_constant(CardTableModRefBS::card_size_in_words)                 \
2281                                                                           \
2282   declare_constant(CardTableRS::youngergen_card)                          \
2283                                                                           \
2284   declare_constant(CollectedHeap::Abstract)                               \
2285   declare_constant(CollectedHeap::SharedHeap)                             \
2286   declare_constant(CollectedHeap::GenCollectedHeap)                       \
2287                                                                           \
2288   declare_constant(GenCollectedHeap::max_gens)                            \
2289                                                                           \
2290   /* constants from Generation::Name enum */                              \
2291                                                                           \
2292   declare_constant(Generation::DefNew)                                    \
2293   declare_constant(Generation::MarkSweepCompact)                          \
2294   declare_constant(Generation::Other)                                     \
2295                                                                           \
2296   declare_constant(Generation::LogOfGenGrain)                             \
2297   declare_constant(Generation::GenGrain)                                  \
2298                                                                           \
2299   declare_constant(HeapWordSize)                                          \
2300   declare_constant(LogHeapWordSize)                                       \
2301                                                                           \
2302                                                                           \
2303   /************************/                                              \
2304   /* PerfMemory - jvmstat */                                              \
2305   /************************/                                              \
2306                                                                           \
2307   declare_preprocessor_constant("PERFDATA_MAJOR_VERSION", PERFDATA_MAJOR_VERSION) \
2308   declare_preprocessor_constant("PERFDATA_MINOR_VERSION", PERFDATA_MINOR_VERSION) \
2309   declare_preprocessor_constant("PERFDATA_BIG_ENDIAN", PERFDATA_BIG_ENDIAN)       \
2310   declare_preprocessor_constant("PERFDATA_LITTLE_ENDIAN", PERFDATA_LITTLE_ENDIAN) \
2311                                                                           \
2312   /***********************************/                                   \
2313   /* LoaderConstraintTable constants */                                   \
2314   /***********************************/                                   \
2315                                                                           \
2316   declare_constant(LoaderConstraintTable::_loader_constraint_size)        \
2317   declare_constant(LoaderConstraintTable::_nof_buckets)                   \
2318                                                                           \
2319   /************************************************************/          \
2320   /* HotSpot specific JVM_ACC constants from global anon enum */          \
2321   /************************************************************/          \
2322                                                                           \
2323   declare_constant(JVM_ACC_WRITTEN_FLAGS)                                 \
2324   declare_constant(JVM_ACC_MONITOR_MATCH)                                 \
2325   declare_constant(JVM_ACC_HAS_MONITOR_BYTECODES)                         \
2326   declare_constant(JVM_ACC_HAS_LOOPS)                                     \
2327   declare_constant(JVM_ACC_LOOPS_FLAG_INIT)                               \
2328   declare_constant(JVM_ACC_QUEUED)                                        \
2329   declare_constant(JVM_ACC_NOT_C2_OSR_COMPILABLE)                         \
2330   declare_constant(JVM_ACC_HAS_LINE_NUMBER_TABLE)                         \
2331   declare_constant(JVM_ACC_HAS_CHECKED_EXCEPTIONS)                        \
2332   declare_constant(JVM_ACC_HAS_JSRS)                                      \
2333   declare_constant(JVM_ACC_IS_OLD)                                        \
2334   declare_constant(JVM_ACC_IS_OBSOLETE)                                   \
2335   declare_constant(JVM_ACC_IS_PREFIXED_NATIVE)                            \
2336   declare_constant(JVM_ACC_HAS_MIRANDA_METHODS)                           \
2337   declare_constant(JVM_ACC_HAS_VANILLA_CONSTRUCTOR)                       \
2338   declare_constant(JVM_ACC_HAS_FINALIZER)                                 \
2339   declare_constant(JVM_ACC_IS_CLONEABLE)                                  \
2340   declare_constant(JVM_ACC_HAS_LOCAL_VARIABLE_TABLE)                      \
2341   declare_constant(JVM_ACC_PROMOTED_FLAGS)                                \
2342   declare_constant(JVM_ACC_FIELD_ACCESS_WATCHED)                          \
2343   declare_constant(JVM_ACC_FIELD_MODIFICATION_WATCHED)                    \
2344   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
2345   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
2346   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
2347                                                                           \
2348   declare_constant(JVM_CONSTANT_Utf8)                                     \
2349   declare_constant(JVM_CONSTANT_Unicode)                                  \
2350   declare_constant(JVM_CONSTANT_Integer)                                  \
2351   declare_constant(JVM_CONSTANT_Float)                                    \
2352   declare_constant(JVM_CONSTANT_Long)                                     \
2353   declare_constant(JVM_CONSTANT_Double)                                   \
2354   declare_constant(JVM_CONSTANT_Class)                                    \
2355   declare_constant(JVM_CONSTANT_String)                                   \
2356   declare_constant(JVM_CONSTANT_Fieldref)                                 \
2357   declare_constant(JVM_CONSTANT_Methodref)                                \
2358   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
2359   declare_constant(JVM_CONSTANT_NameAndType)                              \
2360   declare_constant(JVM_CONSTANT_MethodHandle)                             \
2361   declare_constant(JVM_CONSTANT_MethodType)                               \
2362   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \
2363   declare_constant(JVM_CONSTANT_ExternalMax)                              \
2364                                                                           \
2365   declare_constant(JVM_CONSTANT_Invalid)                                  \
2366   declare_constant(JVM_CONSTANT_InternalMin)                              \
2367   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
2368   declare_constant(JVM_CONSTANT_ClassIndex)                               \
2369   declare_constant(JVM_CONSTANT_StringIndex)                              \
2370   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
2371   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
2372   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
2373   declare_constant(JVM_CONSTANT_InternalMax)                              \
2374                                                                           \
2375   /*****************************/                                         \
2376   /* Thread::SuspendFlags enum */                                         \
2377   /*****************************/                                         \
2378                                                                           \
2379   declare_constant(Thread::_external_suspend)                             \
2380   declare_constant(Thread::_ext_suspended)                                \
2381   declare_constant(Thread::_has_async_exception)                          \
2382                                                                           \
2383   /*******************/                                                   \
2384   /* JavaThreadState */                                                   \
2385   /*******************/                                                   \
2386                                                                           \
2387   declare_constant(_thread_uninitialized)                                 \
2388   declare_constant(_thread_new)                                           \
2389   declare_constant(_thread_new_trans)                                     \
2390   declare_constant(_thread_in_native)                                     \
2391   declare_constant(_thread_in_native_trans)                               \
2392   declare_constant(_thread_in_vm)                                         \
2393   declare_constant(_thread_in_vm_trans)                                   \
2394   declare_constant(_thread_in_Java)                                       \
2395   declare_constant(_thread_in_Java_trans)                                 \
2396   declare_constant(_thread_blocked)                                       \
2397   declare_constant(_thread_blocked_trans)                                 \
2398                                                                           \
2399   /******************************/                                        \
2400   /* Klass misc. enum constants */                                        \
2401   /******************************/                                        \
2402                                                                           \
2403   declare_constant(Klass::_primary_super_limit)                           \
2404   declare_constant(Klass::_lh_neutral_value)                              \
2405   declare_constant(Klass::_lh_instance_slow_path_bit)                     \
2406   declare_constant(Klass::_lh_log2_element_size_shift)                    \
2407   declare_constant(Klass::_lh_log2_element_size_mask)                     \
2408   declare_constant(Klass::_lh_element_type_shift)                         \
2409   declare_constant(Klass::_lh_element_type_mask)                          \
2410   declare_constant(Klass::_lh_header_size_shift)                          \
2411   declare_constant(Klass::_lh_header_size_mask)                           \
2412   declare_constant(Klass::_lh_array_tag_shift)                            \
2413   declare_constant(Klass::_lh_array_tag_type_value)                       \
2414   declare_constant(Klass::_lh_array_tag_obj_value)                        \
2415                                                                           \
2416   /********************************/                                      \
2417   /* ConstMethod anon-enum */                                             \
2418   /********************************/                                      \
2419                                                                           \
2420   declare_constant(Method::_jfr_towrite)                                  \
2421   declare_constant(Method::_caller_sensitive)                             \
2422   declare_constant(Method::_force_inline)                                 \
2423   declare_constant(Method::_dont_inline)                                  \
2424   declare_constant(Method::_hidden)                                       \
2425                                                                           \
2426   declare_constant(ConstMethod::_has_linenumber_table)                    \
2427   declare_constant(ConstMethod::_has_checked_exceptions)                  \
2428   declare_constant(ConstMethod::_has_localvariable_table)                 \
2429   declare_constant(ConstMethod::_has_exception_table)                     \
2430   declare_constant(ConstMethod::_has_generic_signature)                   \
2431   declare_constant(ConstMethod::_has_method_parameters)                   \
2432   declare_constant(ConstMethod::_has_method_annotations)                  \
2433   declare_constant(ConstMethod::_has_parameter_annotations)               \
2434   declare_constant(ConstMethod::_has_default_annotations)                 \
2435   declare_constant(ConstMethod::_has_type_annotations)                    \
2436                                                                           \
2437   /**************/                                                        \
2438   /* DataLayout */                                                        \
2439   /**************/                                                        \
2440                                                                           \
2441   declare_constant(DataLayout::cell_size)                                 \
2442   declare_constant(DataLayout::no_tag)                                    \
2443   declare_constant(DataLayout::bit_data_tag)                              \
2444   declare_constant(DataLayout::counter_data_tag)                          \
2445   declare_constant(DataLayout::jump_data_tag)                             \
2446   declare_constant(DataLayout::receiver_type_data_tag)                    \
2447   declare_constant(DataLayout::virtual_call_data_tag)                     \
2448   declare_constant(DataLayout::ret_data_tag)                              \
2449   declare_constant(DataLayout::branch_data_tag)                           \
2450   declare_constant(DataLayout::multi_branch_data_tag)                     \
2451   declare_constant(DataLayout::arg_info_data_tag)                         \
2452   declare_constant(DataLayout::call_type_data_tag)                        \
2453   declare_constant(DataLayout::virtual_call_type_data_tag)                \
2454   declare_constant(DataLayout::parameters_type_data_tag)                  \
2455                                                                           \
2456   /*************************************/                                 \
2457   /* InstanceKlass enum                */                                 \
2458   /*************************************/                                 \
2459                                                                           \
2460                                                                           \
2461   /*************************************/                                 \
2462   /* FieldInfo FieldOffset enum        */                                 \
2463   /*************************************/                                 \
2464                                                                           \
2465   declare_constant(FieldInfo::access_flags_offset)                        \
2466   declare_constant(FieldInfo::name_index_offset)                          \
2467   declare_constant(FieldInfo::signature_index_offset)                     \
2468   declare_constant(FieldInfo::initval_index_offset)                       \
2469   declare_constant(FieldInfo::low_packed_offset)                          \
2470   declare_constant(FieldInfo::high_packed_offset)                         \
2471   declare_constant(FieldInfo::field_slots)                                \
2472                                                                           \
2473   /*************************************/                                 \
2474   /* FieldInfo tag constants           */                                 \
2475   /*************************************/                                 \
2476                                                                           \
2477   declare_preprocessor_constant("FIELDINFO_TAG_SIZE", FIELDINFO_TAG_SIZE) \
2478   declare_preprocessor_constant("FIELDINFO_TAG_MASK", FIELDINFO_TAG_MASK) \
2479   declare_preprocessor_constant("FIELDINFO_TAG_OFFSET", FIELDINFO_TAG_OFFSET) \
2480                                                                           \
2481   /************************************************/                      \
2482   /* InstanceKlass InnerClassAttributeOffset enum */                      \
2483   /************************************************/                      \
2484                                                                           \
2485   declare_constant(InstanceKlass::inner_class_inner_class_info_offset)    \
2486   declare_constant(InstanceKlass::inner_class_outer_class_info_offset)    \
2487   declare_constant(InstanceKlass::inner_class_inner_name_offset)          \
2488   declare_constant(InstanceKlass::inner_class_access_flags_offset)        \
2489   declare_constant(InstanceKlass::inner_class_next_offset)                \
2490                                                                           \
2491   /*********************************/                                     \
2492   /* InstanceKlass ClassState enum */                                     \
2493   /*********************************/                                     \
2494                                                                           \
2495   declare_constant(InstanceKlass::allocated)                              \
2496   declare_constant(InstanceKlass::loaded)                                 \
2497   declare_constant(InstanceKlass::linked)                                 \
2498   declare_constant(InstanceKlass::being_initialized)                      \
2499   declare_constant(InstanceKlass::fully_initialized)                      \
2500   declare_constant(InstanceKlass::initialization_error)                   \
2501                                                                           \
2502   /*********************************/                                     \
2503   /* Symbol* - symbol max length */                                       \
2504   /*********************************/                                     \
2505                                                                           \
2506   declare_constant(Symbol::max_symbol_length)                             \
2507                                                                           \
2508   /***********************************************/                       \
2509   /* ConstantPool* layout enum for InvokeDynamic */                       \
2510   /***********************************************/                       \
2511                                                                           \
2512   declare_constant(ConstantPool::_indy_bsm_offset)                        \
2513   declare_constant(ConstantPool::_indy_argc_offset)                       \
2514   declare_constant(ConstantPool::_indy_argv_offset)                       \
2515   declare_constant(ConstantPool::CPCACHE_INDEX_TAG)                       \
2516                                                                           \
2517   /********************************/                                      \
2518   /* ConstantPoolCacheEntry enums */                                      \
2519   /********************************/                                      \
2520                                                                           \
2521   declare_constant(ConstantPoolCacheEntry::is_volatile_shift)             \
2522   declare_constant(ConstantPoolCacheEntry::is_final_shift)                \
2523   declare_constant(ConstantPoolCacheEntry::is_forced_virtual_shift)       \
2524   declare_constant(ConstantPoolCacheEntry::is_vfinal_shift)               \
2525   declare_constant(ConstantPoolCacheEntry::is_field_entry_shift)          \
2526   declare_constant(ConstantPoolCacheEntry::tos_state_shift)               \
2527                                                                           \
2528   /***************************************/                               \
2529   /* java_lang_Thread::ThreadStatus enum */                               \
2530   /***************************************/                               \
2531                                                                           \
2532   declare_constant(java_lang_Thread::NEW)                                 \
2533   declare_constant(java_lang_Thread::RUNNABLE)                            \
2534   declare_constant(java_lang_Thread::SLEEPING)                            \
2535   declare_constant(java_lang_Thread::IN_OBJECT_WAIT)                      \
2536   declare_constant(java_lang_Thread::IN_OBJECT_WAIT_TIMED)                \
2537   declare_constant(java_lang_Thread::PARKED)                              \
2538   declare_constant(java_lang_Thread::PARKED_TIMED)                        \
2539   declare_constant(java_lang_Thread::BLOCKED_ON_MONITOR_ENTER)            \
2540   declare_constant(java_lang_Thread::TERMINATED)                          \
2541                                                                           \
2542   /******************************/                                        \
2543   /* Debug info                 */                                        \
2544   /******************************/                                        \
2545                                                                           \
2546   declare_constant(Location::OFFSET_MASK)                                 \
2547   declare_constant(Location::OFFSET_SHIFT)                                \
2548   declare_constant(Location::TYPE_MASK)                                   \
2549   declare_constant(Location::TYPE_SHIFT)                                  \
2550   declare_constant(Location::WHERE_MASK)                                  \
2551   declare_constant(Location::WHERE_SHIFT)                                 \
2552                                                                           \
2553   /* constants from Location::Type enum  */                               \
2554                                                                           \
2555   declare_constant(Location::normal)                                      \
2556   declare_constant(Location::oop)                                         \
2557   declare_constant(Location::narrowoop)                                   \
2558   declare_constant(Location::int_in_long)                                 \
2559   declare_constant(Location::lng)                                         \
2560   declare_constant(Location::float_in_dbl)                                \
2561   declare_constant(Location::dbl)                                         \
2562   declare_constant(Location::addr)                                        \
2563   declare_constant(Location::invalid)                                     \
2564                                                                           \
2565   /* constants from Location::Where enum */                               \
2566                                                                           \
2567   declare_constant(Location::on_stack)                                    \
2568   declare_constant(Location::in_register)                                 \
2569                                                                           \
2570   declare_constant(Deoptimization::Reason_many)                           \
2571   declare_constant(Deoptimization::Reason_none)                           \
2572   declare_constant(Deoptimization::Reason_null_check)                     \
2573   declare_constant(Deoptimization::Reason_null_assert)                    \
2574   declare_constant(Deoptimization::Reason_range_check)                    \
2575   declare_constant(Deoptimization::Reason_class_check)                    \
2576   declare_constant(Deoptimization::Reason_array_check)                    \
2577   declare_constant(Deoptimization::Reason_intrinsic)                      \
2578   declare_constant(Deoptimization::Reason_bimorphic)                      \
2579   declare_constant(Deoptimization::Reason_unloaded)                       \
2580   declare_constant(Deoptimization::Reason_uninitialized)                  \
2581   declare_constant(Deoptimization::Reason_unreached)                      \
2582   declare_constant(Deoptimization::Reason_unhandled)                      \
2583   declare_constant(Deoptimization::Reason_constraint)                     \
2584   declare_constant(Deoptimization::Reason_div0_check)                     \
2585   declare_constant(Deoptimization::Reason_age)                            \
2586   declare_constant(Deoptimization::Reason_predicate)                      \
2587   declare_constant(Deoptimization::Reason_loop_limit_check)               \
2588   declare_constant(Deoptimization::Reason_LIMIT)                          \
2589   declare_constant(Deoptimization::Reason_RECORDED_LIMIT)                 \
2590                                                                           \
2591   declare_constant(Deoptimization::Action_none)                           \
2592   declare_constant(Deoptimization::Action_maybe_recompile)                \
2593   declare_constant(Deoptimization::Action_reinterpret)                    \
2594   declare_constant(Deoptimization::Action_make_not_entrant)               \
2595   declare_constant(Deoptimization::Action_make_not_compilable)            \
2596   declare_constant(Deoptimization::Action_LIMIT)                          \
2597                                                                           \
2598   declare_constant(Deoptimization::Unpack_deopt)                          \
2599   declare_constant(Deoptimization::Unpack_exception)                      \
2600   declare_constant(Deoptimization::Unpack_uncommon_trap)                  \
2601   declare_constant(Deoptimization::Unpack_reexecute)                      \
2602                                                                           \
2603   declare_constant(Deoptimization::_action_bits)                          \
2604   declare_constant(Deoptimization::_reason_bits)                          \
2605   declare_constant(Deoptimization::_debug_id_bits)                        \
2606   declare_constant(Deoptimization::_action_shift)                         \
2607   declare_constant(Deoptimization::_reason_shift)                         \
2608   declare_constant(Deoptimization::_debug_id_shift)                       \
2609                                                                           \
2610   /*********************/                                                 \
2611   /* Matcher (C2 only) */                                                 \
2612   /*********************/                                                 \
2613                                                                           \
2614   declare_c2_preprocessor_constant("Matcher::interpreter_frame_pointer_reg", Matcher::interpreter_frame_pointer_reg()) \
2615                                                                           \
2616   /*********************************************/                         \
2617   /* MethodCompilation (globalDefinitions.hpp) */                         \
2618   /*********************************************/                         \
2619                                                                           \
2620   declare_constant(InvocationEntryBci)                                    \
2621   declare_constant(InvalidOSREntryBci)                                    \
2622                                                                           \
2623   /*************/                                                         \
2624   /* CompLevel */                                                         \
2625   /*************/                                                         \
2626                                                                           \
2627   declare_constant(CompLevel_any)                                         \
2628   declare_constant(CompLevel_all)                                         \
2629   declare_constant(CompLevel_none)                                        \
2630   declare_constant(CompLevel_simple)                                      \
2631   declare_constant(CompLevel_limited_profile)                             \
2632   declare_constant(CompLevel_full_profile)                                \
2633   declare_constant(CompLevel_full_optimization)                           \
2634                                                                           \
2635   /***************/                                                       \
2636   /* OopMapValue */                                                       \
2637   /***************/                                                       \
2638                                                                           \
2639   declare_constant(OopMapValue::type_bits)                                \
2640   declare_constant(OopMapValue::register_bits)                            \
2641   declare_constant(OopMapValue::type_shift)                               \
2642   declare_constant(OopMapValue::register_shift)                           \
2643   declare_constant(OopMapValue::type_mask)                                \
2644   declare_constant(OopMapValue::type_mask_in_place)                       \
2645   declare_constant(OopMapValue::register_mask)                            \
2646   declare_constant(OopMapValue::register_mask_in_place)                   \
2647   declare_constant(OopMapValue::unused_value)                             \
2648   declare_constant(OopMapValue::oop_value)                                \
2649   declare_constant(OopMapValue::narrowoop_value)                          \
2650   declare_constant(OopMapValue::callee_saved_value)                       \
2651   declare_constant(OopMapValue::derived_oop_value)                        \
2652                                                                           \
2653   /******************/                                                    \
2654   /* JNIHandleBlock */                                                    \
2655   /******************/                                                    \
2656                                                                           \
2657   declare_constant(JNIHandleBlock::block_size_in_oops)                    \
2658                                                                           \
2659   /**********************/                                                \
2660   /* ObjectSynchronizer */                                                \
2661   /**********************/                                                \
2662                                                                           \
2663   declare_constant(ObjectSynchronizer::_BLOCKSIZE)                        \
2664                                                                           \
2665   /**********************/                                                \
2666   /* PcDesc             */                                                \
2667   /**********************/                                                \
2668                                                                           \
2669   declare_constant(PcDesc::PCDESC_reexecute)                              \
2670   declare_constant(PcDesc::PCDESC_is_method_handle_invoke)                \
2671   declare_constant(PcDesc::PCDESC_return_oop)                             \
2672                                                                           \
2673   /**********************/                                                \
2674   /* frame              */                                                \
2675   /**********************/                                                \
2676                                                                           \
2677   NOT_ZERO(X86_ONLY(declare_constant(frame::entry_frame_call_wrapper_offset)))      \
2678   declare_constant(frame::pc_return_offset)                               \
2679                                                                           \
2680   /*************/                                                         \
2681   /* vmSymbols */                                                         \
2682   /*************/                                                         \
2683                                                                           \
2684   declare_constant(vmSymbols::FIRST_SID)                                  \
2685   declare_constant(vmSymbols::SID_LIMIT)                                  \
2686                                                                           \
2687   /****************/                                                      \
2688   /* vmIntrinsics */                                                      \
2689   /****************/                                                      \
2690                                                                           \
2691   declare_constant(vmIntrinsics::_invokeBasic)                            \
2692   declare_constant(vmIntrinsics::_linkToVirtual)                          \
2693   declare_constant(vmIntrinsics::_linkToStatic)                           \
2694   declare_constant(vmIntrinsics::_linkToSpecial)                          \
2695   declare_constant(vmIntrinsics::_linkToInterface)                        \
2696                                                                           \
2697   /********************************/                                      \
2698   /* Calling convention constants */                                      \
2699   /********************************/                                      \
2700                                                                           \
2701   declare_constant(RegisterImpl::number_of_registers)                     \
2702   declare_constant(ConcreteRegisterImpl::number_of_registers)             \
2703   declare_preprocessor_constant("REG_COUNT", REG_COUNT)                \
2704   declare_c2_preprocessor_constant("SAVED_ON_ENTRY_REG_COUNT", SAVED_ON_ENTRY_REG_COUNT) \
2705   declare_c2_preprocessor_constant("C_SAVED_ON_ENTRY_REG_COUNT", C_SAVED_ON_ENTRY_REG_COUNT)
2706 
2707 
2708 //--------------------------------------------------------------------------------
2709 // VM_LONG_CONSTANTS
2710 //
2711 // This table contains long constants required over in the
2712 // serviceability agent. The "declare_constant" macro is used for all
2713 // enums, etc., while "declare_preprocessor_constant" must be used for
2714 // all #defined constants.
2715 
2716 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
2717                                                                           \
2718   /*********************/                                                 \
2719   /* MarkOop constants */                                                 \
2720   /*********************/                                                 \
2721                                                                           \
2722   /* Note: some of these are declared as long constants just for */       \
2723   /* consistency. The mask constants are the only ones requiring */       \
2724   /* 64 bits (on 64-bit platforms). */                                    \
2725                                                                           \
2726   declare_constant(markOopDesc::age_bits)                                 \
2727   declare_constant(markOopDesc::lock_bits)                                \
2728   declare_constant(markOopDesc::biased_lock_bits)                         \
2729   declare_constant(markOopDesc::max_hash_bits)                            \
2730   declare_constant(markOopDesc::hash_bits)                                \
2731                                                                           \
2732   declare_constant(markOopDesc::lock_shift)                               \
2733   declare_constant(markOopDesc::biased_lock_shift)                        \
2734   declare_constant(markOopDesc::age_shift)                                \
2735   declare_constant(markOopDesc::hash_shift)                               \
2736                                                                           \
2737   declare_constant(markOopDesc::lock_mask)                                \
2738   declare_constant(markOopDesc::lock_mask_in_place)                       \
2739   declare_constant(markOopDesc::biased_lock_mask)                         \
2740   declare_constant(markOopDesc::biased_lock_mask_in_place)                \
2741   declare_constant(markOopDesc::biased_lock_bit_in_place)                 \
2742   declare_constant(markOopDesc::age_mask)                                 \
2743   declare_constant(markOopDesc::age_mask_in_place)                        \
2744   declare_constant(markOopDesc::epoch_mask)                               \
2745   declare_constant(markOopDesc::epoch_mask_in_place)                      \
2746   declare_constant(markOopDesc::hash_mask)                                \
2747   declare_constant(markOopDesc::hash_mask_in_place)                       \
2748   declare_constant(markOopDesc::biased_lock_alignment)                    \
2749                                                                           \
2750   declare_constant(markOopDesc::locked_value)                             \
2751   declare_constant(markOopDesc::unlocked_value)                           \
2752   declare_constant(markOopDesc::monitor_value)                            \
2753   declare_constant(markOopDesc::marked_value)                             \
2754   declare_constant(markOopDesc::biased_lock_pattern)                      \
2755                                                                           \
2756   declare_constant(markOopDesc::no_hash)                                  \
2757   declare_constant(markOopDesc::no_hash_in_place)                         \
2758   declare_constant(markOopDesc::no_lock_in_place)                         \
2759   declare_constant(markOopDesc::max_age)                                  \
2760                                                                           \
2761   /* Constants in markOop used by CMS. */                                 \
2762   declare_constant(markOopDesc::cms_shift)                                \
2763   declare_constant(markOopDesc::cms_mask)                                 \
2764   declare_constant(markOopDesc::size_shift)
2765 
2766 
2767 //--------------------------------------------------------------------------------
2768 // Macros operating on the above lists
2769 //--------------------------------------------------------------------------------
2770 
2771 // This utility macro quotes the passed string
2772 #define QUOTE(x) #x
2773 
2774 //--------------------------------------------------------------------------------
2775 // VMStructEntry macros
2776 //
2777 
2778 // This macro generates a VMStructEntry line for a nonstatic field
2779 #define GENERATE_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)              \
2780  { QUOTE(typeName), QUOTE(fieldName), QUOTE(type), 0, cast_uint64_t(offset_of(typeName, fieldName)), NULL },
2781 
2782 // This macro generates a VMStructEntry line for a static field
2783 #define GENERATE_STATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)                 \
2784  { QUOTE(typeName), QUOTE(fieldName), QUOTE(type), 1, 0, &amp;typeName::fieldName },
2785 
2786 // This macro generates a VMStructEntry line for an unchecked
2787 // nonstatic field, in which the size of the type is also specified.
2788 // The type string is given as NULL, indicating an "opaque" type.
2789 #define GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, size)    \
2790   { QUOTE(typeName), QUOTE(fieldName), NULL, 0, cast_uint64_t(offset_of(typeName, fieldName)), NULL },
2791 
2792 // This macro generates a VMStructEntry line for an unchecked
2793 // static field, in which the size of the type is also specified.
2794 // The type string is given as NULL, indicating an "opaque" type.
2795 #define GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(typeName, fieldName, size)       \
2796  { QUOTE(typeName), QUOTE(fieldName), NULL, 1, 0, (void*) &amp;typeName::fieldName },
2797 
2798 // This macro generates the sentinel value indicating the end of the list
2799 #define GENERATE_VM_STRUCT_LAST_ENTRY() \
2800  { NULL, NULL, NULL, 0, 0, NULL }
2801 
2802 // This macro checks the type of a VMStructEntry by comparing pointer types
2803 #define CHECK_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)                 \
2804  {typeName *dummyObj = NULL; type* dummy = &amp;dummyObj-&gt;fieldName;                   \
2805   assert(offset_of(typeName, fieldName) &lt; sizeof(typeName), "Illegal nonstatic struct entry, field offset too large"); }
2806 
2807 // This macro checks the type of a volatile VMStructEntry by comparing pointer types
2808 #define CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)        \
2809  {typedef type dummyvtype; typeName *dummyObj = NULL; volatile dummyvtype* dummy = &amp;dummyObj-&gt;fieldName; }
2810 
2811 // This macro checks the type of a VMStructEntry by comparing pointer types
2812 #define CHECK_STATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)                    \
2813  {type* dummy = &amp;typeName::fieldName; }
2814 
2815 // This macro ensures the type of a field and its containing type are
2816 // present in the type table. The assertion string is shorter than
2817 // preferable because (incredibly) of a bug in Solstice NFS client
2818 // which seems to prevent very long lines from compiling. This assertion
2819 // means that an entry in VMStructs::localHotSpotVMStructs[] was not
2820 // found in VMStructs::localHotSpotVMTypes[].
2821 #define ENSURE_FIELD_TYPE_PRESENT(typeName, fieldName, type)                       \
2822  { assert(findType(QUOTE(typeName)) != 0, "type \"" QUOTE(typeName) "\" not found in type table"); \
2823    assert(findType(QUOTE(type)) != 0, "type \"" QUOTE(type) "\" not found in type table"); }
2824 
2825 // This is a no-op macro for unchecked fields
2826 #define CHECK_NO_OP(a, b, c)
2827 
2828 //
2829 // Build-specific macros:
2830 //
2831 
2832 // Generate and check a nonstatic field in non-product builds
2833 #ifndef PRODUCT
2834 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2835 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2836 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2837 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2838 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2839 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2840 #else
2841 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2842 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2843 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)
2844 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2845 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2846 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)
2847 #endif /* PRODUCT */
2848 
2849 // Generate and check a nonstatic field in C1 builds
2850 #ifdef COMPILER1
2851 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2852 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2853 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2854 #else
2855 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2856 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2857 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)
2858 #endif /* COMPILER1 */
2859 // Generate and check a nonstatic field in C2 builds
2860 #ifdef COMPILER2
2861 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2862 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2863 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2864 #else
2865 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2866 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2867 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)
2868 #endif /* COMPILER2 */
2869 
2870 // Generate but do not check a static field in C1 builds
2871 #ifdef COMPILER1
2872 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2873 #else
2874 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2875 #endif /* COMPILER1 */
2876 
2877 // Generate but do not check a static field in C2 builds
2878 #ifdef COMPILER2
2879 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2880 #else
2881 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2882 #endif /* COMPILER2 */
2883 
2884 //--------------------------------------------------------------------------------
2885 // VMTypeEntry macros
2886 //
2887 
2888 #define GENERATE_VM_TYPE_ENTRY(type, superclass) \
2889  { QUOTE(type), QUOTE(superclass), 0, 0, 0, sizeof(type) },
2890 
2891 #define GENERATE_TOPLEVEL_VM_TYPE_ENTRY(type) \
2892  { QUOTE(type), NULL,              0, 0, 0, sizeof(type) },
2893 
2894 #define GENERATE_OOP_VM_TYPE_ENTRY(type) \
2895  { QUOTE(type), NULL,              1, 0, 0, sizeof(type) },
2896 
2897 #define GENERATE_INTEGER_VM_TYPE_ENTRY(type) \
2898  { QUOTE(type), NULL,              0, 1, 0, sizeof(type) },
2899 
2900 #define GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY(type) \
2901  { QUOTE(type), NULL,              0, 1, 1, sizeof(type) },
2902 
2903 #define GENERATE_VM_TYPE_LAST_ENTRY() \
2904  { NULL, NULL, 0, 0, 0, 0 }
2905 
2906 #define CHECK_VM_TYPE_ENTRY(type, superclass) \
2907  { type* dummyObj = NULL; superclass* dummySuperObj = dummyObj; }
2908 
2909 #define CHECK_VM_TYPE_NO_OP(a)
2910 #define CHECK_SINGLE_ARG_VM_TYPE_NO_OP(a)
2911 
2912 //
2913 // Build-specific macros:
2914 //
2915 
2916 #ifdef COMPILER1
2917 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
2918 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2919 #else
2920 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2921 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2922 #endif /* COMPILER1 */
2923 
2924 #ifdef COMPILER2
2925 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)                     GENERATE_VM_TYPE_ENTRY(a, b)
2926 # define CHECK_C2_VM_TYPE_ENTRY(a, b)                        CHECK_VM_TYPE_ENTRY(a, b)
2927 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
2928 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2929 #else
2930 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)
2931 # define CHECK_C2_VM_TYPE_ENTRY(a, b)
2932 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2933 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2934 #endif /* COMPILER2 */
2935 
2936 
2937 //--------------------------------------------------------------------------------
2938 // VMIntConstantEntry macros
2939 //
2940 
2941 #define GENERATE_VM_INT_CONSTANT_ENTRY(name) \
2942  { QUOTE(name), (int32_t) name },
2943 
2944 #define GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value) \
2945  { name, (int32_t) value },
2946 
2947 // This macro generates the sentinel value indicating the end of the list
2948 #define GENERATE_VM_INT_CONSTANT_LAST_ENTRY() \
2949  { NULL, 0 }
2950 
2951 
2952 // Generate an int constant for a C1 build
2953 #ifdef COMPILER1
2954 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)  GENERATE_VM_INT_CONSTANT_ENTRY(name)
2955 #else
2956 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)
2957 #endif /* COMPILER1 */
2958 
2959 // Generate an int constant for a C2 build
2960 #ifdef COMPILER2
2961 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)                      GENERATE_VM_INT_CONSTANT_ENTRY(name)
2962 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)  GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
2963 #else
2964 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)
2965 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
2966 #endif /* COMPILER1 */
2967 
2968 //--------------------------------------------------------------------------------
2969 // VMLongConstantEntry macros
2970 //
2971 
2972 #define GENERATE_VM_LONG_CONSTANT_ENTRY(name) \
2973   { QUOTE(name), cast_uint64_t(name) },
2974 
2975 #define GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value) \
2976   { name, cast_uint64_t(value) },
2977 
2978 // This macro generates the sentinel value indicating the end of the list
2979 #define GENERATE_VM_LONG_CONSTANT_LAST_ENTRY() \
2980  { NULL, 0 }
2981 
2982 // Generate a long constant for a C1 build
2983 #ifdef COMPILER1
2984 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)  GENERATE_VM_LONG_CONSTANT_ENTRY(name)
2985 #else
2986 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)
2987 #endif /* COMPILER1 */
2988 
2989 // Generate a long constant for a C2 build
2990 #ifdef COMPILER2
2991 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)                     GENERATE_VM_LONG_CONSTANT_ENTRY(name)
2992 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value) GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
2993 #else
2994 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)
2995 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
2996 #endif /* COMPILER1 */
2997 
2998 //
2999 // Instantiation of VMStructEntries, VMTypeEntries and VMIntConstantEntries
3000 //
3001 
3002 // These initializers are allowed to access private fields in classes
3003 // as long as class VMStructs is a friend
3004 VMStructEntry VMStructs::localHotSpotVMStructs[] = {
3005 
3006   VM_STRUCTS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3007              GENERATE_STATIC_VM_STRUCT_ENTRY,
3008              GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3009              GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3010              GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3011              GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY,
3012              GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3013              GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3014              GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3015 
3016 #ifdef GRAAL
3017    VM_STRUCTS_GRAAL(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3018                     GENERATE_STATIC_VM_STRUCT_ENTRY)
3019 #endif
3020 
3021 #if INCLUDE_ALL_GCS
3022   VM_STRUCTS_PARALLELGC(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3023                         GENERATE_STATIC_VM_STRUCT_ENTRY)
3024 
3025   VM_STRUCTS_CMS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3026                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3027                  GENERATE_STATIC_VM_STRUCT_ENTRY)
3028 
3029   VM_STRUCTS_G1(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3030                 GENERATE_STATIC_VM_STRUCT_ENTRY)
3031 #endif // INCLUDE_ALL_GCS
3032 
3033   VM_STRUCTS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3034                  GENERATE_STATIC_VM_STRUCT_ENTRY,
3035                  GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3036                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3037                  GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3038                  GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3039                  GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3040                  GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3041 
3042   VM_STRUCTS_GPU_HSAIL(GENERATE_NONSTATIC_VM_STRUCT_ENTRY)
3043           
3044   VM_STRUCTS_OS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3045                     GENERATE_STATIC_VM_STRUCT_ENTRY,
3046                     GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3047                     GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3048                     GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3049                     GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3050                     GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3051                     GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3052 
3053   GENERATE_VM_STRUCT_LAST_ENTRY()
3054 };
3055 
3056 VMTypeEntry VMStructs::localHotSpotVMTypes[] = {
3057 
3058   VM_TYPES(GENERATE_VM_TYPE_ENTRY,
3059            GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3060            GENERATE_OOP_VM_TYPE_ENTRY,
3061            GENERATE_INTEGER_VM_TYPE_ENTRY,
3062            GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3063            GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3064            GENERATE_C2_VM_TYPE_ENTRY,
3065            GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3066 
3067 #ifdef GRAAL
3068   VM_TYPES_GRAAL(GENERATE_VM_TYPE_ENTRY,
3069                  GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3070 #endif
3071 
3072 #if INCLUDE_ALL_GCS
3073   VM_TYPES_PARALLELGC(GENERATE_VM_TYPE_ENTRY,
3074                       GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3075 
3076   VM_TYPES_CMS(GENERATE_VM_TYPE_ENTRY,
3077                GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3078 
3079   VM_TYPES_PARNEW(GENERATE_VM_TYPE_ENTRY)
3080 
3081   VM_TYPES_G1(GENERATE_VM_TYPE_ENTRY,
3082               GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3083 #endif // INCLUDE_ALL_GCS
3084 
3085   VM_TYPES_CPU(GENERATE_VM_TYPE_ENTRY,
3086                GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3087                GENERATE_OOP_VM_TYPE_ENTRY,
3088                GENERATE_INTEGER_VM_TYPE_ENTRY,
3089                GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3090                GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3091                GENERATE_C2_VM_TYPE_ENTRY,
3092                GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3093 
3094   VM_TYPES_GPU_HSAIL(GENERATE_VM_TYPE_ENTRY,
3095                GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3096 
3097   VM_TYPES_OS_CPU(GENERATE_VM_TYPE_ENTRY,
3098                   GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3099                   GENERATE_OOP_VM_TYPE_ENTRY,
3100                   GENERATE_INTEGER_VM_TYPE_ENTRY,
3101                   GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3102                   GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3103                   GENERATE_C2_VM_TYPE_ENTRY,
3104                   GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3105 
3106   GENERATE_VM_TYPE_LAST_ENTRY()
3107 };
3108 
3109 VMIntConstantEntry VMStructs::localHotSpotVMIntConstants[] = {
3110 
3111   VM_INT_CONSTANTS(GENERATE_VM_INT_CONSTANT_ENTRY,
3112                    GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3113                    GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3114                    GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3115                    GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3116 
3117 #ifdef GRAAL
3118   VM_INT_CONSTANTS_GRAAL(GENERATE_VM_INT_CONSTANT_ENTRY,
3119                          GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3120 #endif
3121 
3122 #if INCLUDE_ALL_GCS
3123   VM_INT_CONSTANTS_CMS(GENERATE_VM_INT_CONSTANT_ENTRY)
3124 
3125   VM_INT_CONSTANTS_PARNEW(GENERATE_VM_INT_CONSTANT_ENTRY)
3126 #endif // INCLUDE_ALL_GCS
3127 
3128   VM_INT_CONSTANTS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
3129                        GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3130                        GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3131                        GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3132                        GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3133 
3134   VM_INT_CONSTANTS_OS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
3135                           GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3136                           GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3137                           GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3138                           GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3139 
3140   GENERATE_VM_INT_CONSTANT_LAST_ENTRY()
3141 };
3142 
3143 VMLongConstantEntry VMStructs::localHotSpotVMLongConstants[] = {
3144 
3145   VM_LONG_CONSTANTS(GENERATE_VM_LONG_CONSTANT_ENTRY,
3146                     GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3147                     GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3148                     GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3149                     GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3150 
3151   VM_LONG_CONSTANTS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
3152                         GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3153                         GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3154                         GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3155                         GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3156 
3157   VM_LONG_CONSTANTS_OS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
3158                            GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3159                            GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3160                            GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3161                            GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3162 
3163   GENERATE_VM_LONG_CONSTANT_LAST_ENTRY()
3164 };
3165 
3166 // This is used both to check the types of referenced fields and, in
3167 // debug builds, to ensure that all of the field types are present.
3168 void
3169 VMStructs::init() {
3170   VM_STRUCTS(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3171              CHECK_STATIC_VM_STRUCT_ENTRY,
3172              CHECK_NO_OP,
3173              CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3174              CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3175              CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY,
3176              CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3177              CHECK_NO_OP,
3178              CHECK_NO_OP);
3179 
3180 #if INCLUDE_ALL_GCS
3181   VM_STRUCTS_PARALLELGC(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3182              CHECK_STATIC_VM_STRUCT_ENTRY);
3183 
3184   VM_STRUCTS_CMS(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3185              CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3186              CHECK_STATIC_VM_STRUCT_ENTRY);
3187 
3188   VM_STRUCTS_G1(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3189                 CHECK_STATIC_VM_STRUCT_ENTRY);
3190 #endif // INCLUDE_ALL_GCS
3191 
3192   VM_STRUCTS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3193                  CHECK_STATIC_VM_STRUCT_ENTRY,
3194                  CHECK_NO_OP,
3195                  CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3196                  CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3197                  CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3198                  CHECK_NO_OP,
3199                  CHECK_NO_OP);
3200 
3201   VM_STRUCTS_GPU_HSAIL(CHECK_NONSTATIC_VM_STRUCT_ENTRY);
3202 
3203   VM_STRUCTS_OS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3204                     CHECK_STATIC_VM_STRUCT_ENTRY,
3205                     CHECK_NO_OP,
3206                     CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3207                     CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3208                     CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3209                     CHECK_NO_OP,
3210                     CHECK_NO_OP);
3211 
3212   VM_TYPES(CHECK_VM_TYPE_ENTRY,
3213            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3214            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3215            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3216            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3217            CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3218            CHECK_C2_VM_TYPE_ENTRY,
3219            CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3220 
3221 #if INCLUDE_ALL_GCS
3222   VM_TYPES_PARALLELGC(CHECK_VM_TYPE_ENTRY,
3223                       CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3224 
3225   VM_TYPES_CMS(CHECK_VM_TYPE_ENTRY,
3226                CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3227 
3228   VM_TYPES_PARNEW(CHECK_VM_TYPE_ENTRY)
3229 
3230   VM_TYPES_G1(CHECK_VM_TYPE_ENTRY,
3231               CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3232 #endif // INCLUDE_ALL_GCS
3233 
3234   VM_TYPES_CPU(CHECK_VM_TYPE_ENTRY,
3235                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3236                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3237                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3238                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3239                CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3240                CHECK_C2_VM_TYPE_ENTRY,
3241                CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3242 
3243   VM_TYPES_GPU_HSAIL(CHECK_VM_TYPE_ENTRY,
3244                CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3245 
3246   VM_TYPES_OS_CPU(CHECK_VM_TYPE_ENTRY,
3247                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3248                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3249                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3250                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3251                   CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3252                   CHECK_C2_VM_TYPE_ENTRY,
3253                   CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3254 
3255   //
3256   // Split VM_STRUCTS() invocation into two parts to allow MS VC++ 6.0
3257   // to build with the source mounted over SNC3.2. Symptom was that
3258   // debug build failed with an internal compiler error. Has been seen
3259   // mounting sources from Solaris 2.6 and 2.7 hosts, but so far not
3260   // 2.8 hosts. Appears to occur because line is too long.
3261   //
3262   // If an assertion failure is triggered here it means that an entry
3263   // in VMStructs::localHotSpotVMStructs[] was not found in
3264   // VMStructs::localHotSpotVMTypes[]. (The assertion itself had to be
3265   // made less descriptive because of this above bug -- see the
3266   // definition of ENSURE_FIELD_TYPE_PRESENT.)
3267   //
3268   // NOTE: taken out because this was just not working on everyone's
3269   // Solstice NFS setup. If everyone switches to local workspaces on
3270   // Win32, we can put this back in.
3271 #ifndef _WINDOWS
3272   debug_only(VM_STRUCTS(ENSURE_FIELD_TYPE_PRESENT,
3273                         CHECK_NO_OP,
3274                         CHECK_NO_OP,
3275                         CHECK_NO_OP,
3276                         CHECK_NO_OP,
3277                         CHECK_NO_OP,
3278                         CHECK_NO_OP,
3279                         CHECK_NO_OP,
3280                         CHECK_NO_OP));
3281   debug_only(VM_STRUCTS(CHECK_NO_OP,
3282                         ENSURE_FIELD_TYPE_PRESENT,
3283                         CHECK_NO_OP,
3284                         ENSURE_FIELD_TYPE_PRESENT,
3285                         ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3286                         ENSURE_C1_FIELD_TYPE_PRESENT,
3287                         ENSURE_C2_FIELD_TYPE_PRESENT,
3288                         CHECK_NO_OP,
3289                         CHECK_NO_OP));
3290 #if INCLUDE_ALL_GCS
3291   debug_only(VM_STRUCTS_PARALLELGC(ENSURE_FIELD_TYPE_PRESENT,
3292                                    ENSURE_FIELD_TYPE_PRESENT));
3293   debug_only(VM_STRUCTS_CMS(ENSURE_FIELD_TYPE_PRESENT,
3294                             ENSURE_FIELD_TYPE_PRESENT,
3295                             ENSURE_FIELD_TYPE_PRESENT));
3296   debug_only(VM_STRUCTS_G1(ENSURE_FIELD_TYPE_PRESENT,
3297                            ENSURE_FIELD_TYPE_PRESENT));
3298 #endif // INCLUDE_ALL_GCS
3299   debug_only(VM_STRUCTS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3300                             ENSURE_FIELD_TYPE_PRESENT,
3301                             CHECK_NO_OP,
3302                             ENSURE_FIELD_TYPE_PRESENT,
3303                             ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3304                             ENSURE_C2_FIELD_TYPE_PRESENT,
3305                             CHECK_NO_OP,
3306                             CHECK_NO_OP));
3307   debug_only(VM_STRUCTS_OS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3308                                ENSURE_FIELD_TYPE_PRESENT,
3309                                CHECK_NO_OP,
3310                                ENSURE_FIELD_TYPE_PRESENT,
3311                                ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3312                                ENSURE_C2_FIELD_TYPE_PRESENT,
3313                                CHECK_NO_OP,
3314                                CHECK_NO_OP));
3315 #endif
3316 }
3317 
3318 extern "C" {
3319 
3320 // see comments on cast_uint64_t at the top of this file
3321 #define ASSIGN_CONST_TO_64BIT_VAR(var, expr) \
3322     JNIEXPORT uint64_t var = cast_uint64_t(expr);
3323 #define ASSIGN_OFFSET_TO_64BIT_VAR(var, type, field)   \
3324   ASSIGN_CONST_TO_64BIT_VAR(var, offset_of(type, field))
3325 #define ASSIGN_STRIDE_TO_64BIT_VAR(var, array) \
3326   ASSIGN_CONST_TO_64BIT_VAR(var, (char*)&amp;array[1] - (char*)&amp;array[0])
3327 
3328 JNIEXPORT VMStructEntry* gHotSpotVMStructs                 = VMStructs::localHotSpotVMStructs;
3329 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMStructEntryTypeNameOffset,  VMStructEntry, typeName);
3330 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMStructEntryFieldNameOffset, VMStructEntry, fieldName);
3331 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMStructEntryTypeStringOffset, VMStructEntry, typeString);
3332 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMStructEntryIsStaticOffset, VMStructEntry, isStatic);
3333 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMStructEntryOffsetOffset, VMStructEntry, offset);
3334 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMStructEntryAddressOffset, VMStructEntry, address);
3335 ASSIGN_STRIDE_TO_64BIT_VAR(gHotSpotVMStructEntryArrayStride, gHotSpotVMStructs);
3336 JNIEXPORT VMTypeEntry*   gHotSpotVMTypes                   = VMStructs::localHotSpotVMTypes;
3337 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMTypeEntryTypeNameOffset, VMTypeEntry, typeName);
3338 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMTypeEntrySuperclassNameOffset, VMTypeEntry, superclassName);
3339 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMTypeEntryIsOopTypeOffset, VMTypeEntry, isOopType);
3340 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMTypeEntryIsIntegerTypeOffset, VMTypeEntry, isIntegerType);
3341 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMTypeEntryIsUnsignedOffset, VMTypeEntry, isUnsigned);
3342 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMTypeEntrySizeOffset, VMTypeEntry, size);
3343 ASSIGN_STRIDE_TO_64BIT_VAR(gHotSpotVMTypeEntryArrayStride,gHotSpotVMTypes);
3344 JNIEXPORT VMIntConstantEntry* gHotSpotVMIntConstants       = VMStructs::localHotSpotVMIntConstants;
3345 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMIntConstantEntryNameOffset, VMIntConstantEntry, name);
3346 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMIntConstantEntryValueOffset, VMIntConstantEntry, value);
3347 ASSIGN_STRIDE_TO_64BIT_VAR(gHotSpotVMIntConstantEntryArrayStride, gHotSpotVMIntConstants);
3348 JNIEXPORT VMLongConstantEntry* gHotSpotVMLongConstants     = VMStructs::localHotSpotVMLongConstants;
3349 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMLongConstantEntryNameOffset, VMLongConstantEntry, name);
3350 ASSIGN_OFFSET_TO_64BIT_VAR(gHotSpotVMLongConstantEntryValueOffset, VMLongConstantEntry, value);
3351 ASSIGN_STRIDE_TO_64BIT_VAR(gHotSpotVMLongConstantEntryArrayStride, gHotSpotVMLongConstants);
3352 }
3353 
3354 #ifdef ASSERT
3355 static int recursiveFindType(VMTypeEntry* origtypes, const char* typeName, bool isRecurse) {
3356   {
3357     VMTypeEntry* types = origtypes;
3358     while (types-&gt;typeName != NULL) {
3359       if (strcmp(typeName, types-&gt;typeName) == 0) {
3360         // Found it
3361         return 1;
3362       }
3363       ++types;
3364     }
3365   }
3366   // Search for the base type by peeling off const and *
3367   size_t len = strlen(typeName);
3368   if (typeName[len-1] == '*') {
3369     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3370     strncpy(s, typeName, len - 1);
3371     s[len-1] = '\0';
3372     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3373     if (recursiveFindType(origtypes, s, true) == 1) {
3374       FREE_C_HEAP_ARRAY(char, s, mtInternal);
3375       return 1;
3376     }
3377     FREE_C_HEAP_ARRAY(char, s, mtInternal);
3378   }
3379   const char* start = NULL;
3380   if (strstr(typeName, "GrowableArray&lt;") == typeName) {
3381     start = typeName + strlen("GrowableArray&lt;");
3382   } else if (strstr(typeName, "Array&lt;") == typeName) {
3383     start = typeName + strlen("Array&lt;");
3384   }
3385   if (start != NULL) {
3386     const char * end = strrchr(typeName, '&gt;');
3387     int len = end - start + 1;
3388     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3389     strncpy(s, start, len - 1);
3390     s[len-1] = '\0';
3391     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3392     if (recursiveFindType(origtypes, s, true) == 1) {
3393       FREE_C_HEAP_ARRAY(char, s, mtInternal);
3394       return 1;
3395     }
3396     FREE_C_HEAP_ARRAY(char, s, mtInternal);
3397   }
3398   if (strstr(typeName, "const ") == typeName) {
3399     const char * s = typeName + strlen("const ");
3400     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3401     if (recursiveFindType(origtypes, s, true) == 1) {
3402       return 1;
3403     }
3404   }
3405   if (strstr(typeName, " const") == typeName + len - 6) {
3406     char * s = strdup(typeName);
3407     s[len - 6] = '\0';
3408     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3409     if (recursiveFindType(origtypes, s, true) == 1) {
3410       free(s);
3411       return 1;
3412     }
3413     free(s);
3414   }
3415   if (!isRecurse) {
3416     tty-&gt;print_cr("type \"%s\" not found", typeName);
3417   }
3418   return 0;
3419 }
3420 
3421 
3422 int
3423 VMStructs::findType(const char* typeName) {
3424   VMTypeEntry* types = gHotSpotVMTypes;
3425 
3426   return recursiveFindType(types, typeName, false);
3427 }
3428 #endif
3429 
3430 void vmStructs_init() {
3431   debug_only(VMStructs::init());
3432 }
3433 
3434 #ifndef PRODUCT
3435 void VMStructs::test() {
3436   // Make sure last entry in the each array is indeed the correct end marker.
3437   // The reason why these are static is to make sure they are zero initialized.
3438   // Putting them on the stack will leave some garbage in the padding of some fields.
3439   static VMStructEntry struct_last_entry = GENERATE_VM_STRUCT_LAST_ENTRY();
3440   assert(memcmp(&amp;localHotSpotVMStructs[(sizeof(localHotSpotVMStructs) / sizeof(VMStructEntry)) - 1],
3441                 &amp;struct_last_entry,
3442                 sizeof(VMStructEntry)) == 0, "Incorrect last entry in localHotSpotVMStructs");
3443 
3444   static VMTypeEntry type_last_entry = GENERATE_VM_TYPE_LAST_ENTRY();
3445   assert(memcmp(&amp;localHotSpotVMTypes[sizeof(localHotSpotVMTypes) / sizeof(VMTypeEntry) - 1],
3446                 &amp;type_last_entry,
3447                 sizeof(VMTypeEntry)) == 0, "Incorrect last entry in localHotSpotVMTypes");
3448 
3449   static VMIntConstantEntry int_last_entry = GENERATE_VM_INT_CONSTANT_LAST_ENTRY();
3450   assert(memcmp(&amp;localHotSpotVMIntConstants[sizeof(localHotSpotVMIntConstants) / sizeof(VMIntConstantEntry) - 1],
3451                 &amp;int_last_entry,
3452                 sizeof(VMIntConstantEntry)) == 0, "Incorrect last entry in localHotSpotVMIntConstants");
3453 
3454   static VMLongConstantEntry long_last_entry = GENERATE_VM_LONG_CONSTANT_LAST_ENTRY();
3455   assert(memcmp(&amp;localHotSpotVMLongConstants[sizeof(localHotSpotVMLongConstants) / sizeof(VMLongConstantEntry) - 1],
3456                 &amp;long_last_entry,
3457                 sizeof(VMLongConstantEntry)) == 0, "Incorrect last entry in localHotSpotVMLongConstants");
3458 
3459 
3460   // Check for duplicate entries in type array
3461   for (int i = 0; localHotSpotVMTypes[i].typeName != NULL; i++) {
3462     for (int j = i + 1; localHotSpotVMTypes[j].typeName != NULL; j++) {
3463       if (strcmp(localHotSpotVMTypes[i].typeName, localHotSpotVMTypes[j].typeName) == 0) {
3464         tty-&gt;print_cr("Duplicate entries for '%s'", localHotSpotVMTypes[i].typeName);
3465         assert(false, "Duplicate types in localHotSpotVMTypes array");
3466       }
3467     }
3468   }
3469 }
3470 #endif
</pre></body></html>
