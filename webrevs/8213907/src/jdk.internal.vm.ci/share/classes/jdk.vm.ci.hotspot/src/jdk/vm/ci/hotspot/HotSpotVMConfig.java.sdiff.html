<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta charset="utf-8">
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
a.print { font-size: x-small; }

</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>open Sdiff src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot </title>
</head><body id="SUNWwebrev">
<center><a href='../../../../../../../../../../src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/HotSpotResolvedObjectTypeImpl.java.sdiff.html' target='_top'>&lt prev</a> <a href='../../../../../../../../../../index.html' target='_top'>index</a> <a href='../../../../../../../../../../test/hotspot/jtreg/compiler/jvmci/jdk.vm.ci.runtime.test/src/jdk/vm/ci/runtime/test/TestResolvedJavaField.java.sdiff.html' target='_top'>next &gt</a></center>
<h2>src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/HotSpotVMConfig.java</h2>
<a class="print" href="javascript:print()">Print this page</a>
<pre></pre>

<table><tr valign="top">
<td><pre>

</pre><hr></hr><pre>
  77     final int secondarySuperCacheOffset = getFieldOffset("Klass::_secondary_super_cache", Integer.class, "Klass*");
  78 
  79     /**
  80      * The offset of the _java_mirror field (of type {@link Class}) in a Klass.
  81      */
  82     final int classMirrorHandleOffset = getFieldOffset("Klass::_java_mirror", Integer.class, "OopHandle");
  83 
  84     final int klassAccessFlagsOffset = getFieldOffset("Klass::_access_flags", Integer.class, "AccessFlags");
  85     final int klassLayoutHelperOffset = getFieldOffset("Klass::_layout_helper", Integer.class, "jint");
  86 
  87     final int klassLayoutHelperNeutralValue = getConstant("Klass::_lh_neutral_value", Integer.class);
  88     final int klassLayoutHelperInstanceSlowPathBit = getConstant("Klass::_lh_instance_slow_path_bit", Integer.class);
  89 
  90     final int vtableEntrySize = getFieldValue("CompilerToVM::Data::sizeof_vtableEntry", Integer.class, "int");
  91     final int vtableEntryMethodOffset = getFieldOffset("vtableEntry::_method", Integer.class, "Method*");
  92 
  93     final int instanceKlassSourceFileNameIndexOffset = getFieldOffset("InstanceKlass::_source_file_name_index", Integer.class, "u2");
  94     final int instanceKlassInitStateOffset = getFieldOffset("InstanceKlass::_init_state", Integer.class, "u1");
  95     final int instanceKlassConstantsOffset = getFieldOffset("InstanceKlass::_constants", Integer.class, "ConstantPool*");
  96     final int instanceKlassFieldsOffset = getFieldOffset("InstanceKlass::_fields", Integer.class, "Array&lt;u2&gt;*");

  97     final int instanceKlassMiscFlagsOffset = getFieldOffset("InstanceKlass::_misc_flags", Integer.class, "u2");
  98     final int klassVtableStartOffset = getFieldValue("CompilerToVM::Data::Klass_vtable_start_offset", Integer.class, "int");
  99     final int klassVtableLengthOffset = getFieldValue("CompilerToVM::Data::Klass_vtable_length_offset", Integer.class, "int");
 100 
 101     final int instanceKlassStateLinked = getConstant("InstanceKlass::linked", Integer.class);
 102     final int instanceKlassStateFullyInitialized = getConstant("InstanceKlass::fully_initialized", Integer.class);
 103     final int instanceKlassMiscIsUnsafeAnonymous = getConstant("InstanceKlass::_misc_is_unsafe_anonymous", Integer.class);
 104 



 105     final int arrayU1LengthOffset = getFieldOffset("Array&lt;int&gt;::_length", Integer.class, "int");
 106     final int arrayU1DataOffset = getFieldOffset("Array&lt;u1&gt;::_data", Integer.class);
 107     final int arrayU2DataOffset = getFieldOffset("Array&lt;u2&gt;::_data", Integer.class);
 108 
 109     final int fieldInfoAccessFlagsOffset = getConstant("FieldInfo::access_flags_offset", Integer.class);
 110     final int fieldInfoNameIndexOffset = getConstant("FieldInfo::name_index_offset", Integer.class);
 111     final int fieldInfoSignatureIndexOffset = getConstant("FieldInfo::signature_index_offset", Integer.class);
 112     final int fieldInfoLowPackedOffset = getConstant("FieldInfo::low_packed_offset", Integer.class);
 113     final int fieldInfoHighPackedOffset = getConstant("FieldInfo::high_packed_offset", Integer.class);
 114     final int fieldInfoFieldSlots = getConstant("FieldInfo::field_slots", Integer.class);
 115 
 116     final int fieldInfoTagSize = getConstant("FIELDINFO_TAG_SIZE", Integer.class);
 117 
 118     final int jvmAccHasFinalizer = getConstant("JVM_ACC_HAS_FINALIZER", Integer.class);
 119     final int jvmAccFieldInternal = getConstant("JVM_ACC_FIELD_INTERNAL", Integer.class);
 120     final int jvmAccFieldStable = getConstant("JVM_ACC_FIELD_STABLE", Integer.class);
 121     final int jvmAccFieldHasGenericSignature = getConstant("JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE", Integer.class);
 122     final int jvmAccIsCloneableFast = getConstant("JVM_ACC_IS_CLONEABLE_FAST", Integer.class);
 123 
 124     // These modifiers are not public in Modifier so we get them via vmStructs.

</pre><hr></hr><pre>
 178 
 179     final int compLevelAdjustmentNone = getConstant("JVMCIRuntime::none", Integer.class);
 180     final int compLevelAdjustmentByHolder = getConstant("JVMCIRuntime::by_holder", Integer.class);
 181     final int compLevelAdjustmentByFullSignature = getConstant("JVMCIRuntime::by_full_signature", Integer.class);
 182 
 183     final int invocationEntryBci = getConstant("InvocationEntryBci", Integer.class);
 184 
 185     final int extraStackEntries = getFieldValue("CompilerToVM::Data::Method_extra_stack_entries", Integer.class, "int");
 186 
 187     final int constMethodConstantsOffset = getFieldOffset("ConstMethod::_constants", Integer.class, "ConstantPool*");
 188     final int constMethodFlagsOffset = getFieldOffset("ConstMethod::_flags", Integer.class, "u2");
 189     final int constMethodCodeSizeOffset = getFieldOffset("ConstMethod::_code_size", Integer.class, "u2");
 190     final int constMethodNameIndexOffset = getFieldOffset("ConstMethod::_name_index", Integer.class, "u2");
 191     final int constMethodSignatureIndexOffset = getFieldOffset("ConstMethod::_signature_index", Integer.class, "u2");
 192     final int constMethodMethodIdnumOffset = getFieldOffset("ConstMethod::_method_idnum", Integer.class, "u2");
 193     final int constMethodMaxStackOffset = getFieldOffset("ConstMethod::_max_stack", Integer.class, "u2");
 194     final int methodMaxLocalsOffset = getFieldOffset("ConstMethod::_max_locals", Integer.class, "u2");
 195 
 196     final int constMethodHasLineNumberTable = getConstant("ConstMethod::_has_linenumber_table", Integer.class);
 197     final int constMethodHasLocalVariableTable = getConstant("ConstMethod::_has_localvariable_table", Integer.class);


 198     final int constMethodHasExceptionTable = getConstant("ConstMethod::_has_exception_table", Integer.class);
 199 
 200     final int exceptionTableElementSize = getFieldValue("CompilerToVM::Data::sizeof_ExceptionTableElement", Integer.class, "int");
 201     final int exceptionTableElementStartPcOffset = getFieldOffset("ExceptionTableElement::start_pc", Integer.class, "u2");
 202     final int exceptionTableElementEndPcOffset = getFieldOffset("ExceptionTableElement::end_pc", Integer.class, "u2");
 203     final int exceptionTableElementHandlerPcOffset = getFieldOffset("ExceptionTableElement::handler_pc", Integer.class, "u2");
 204     final int exceptionTableElementCatchTypeIndexOffset = getFieldOffset("ExceptionTableElement::catch_type_index", Integer.class, "u2");
 205 
 206     final int localVariableTableElementSize = getFieldValue("CompilerToVM::Data::sizeof_LocalVariableTableElement", Integer.class, "int");
 207     final int localVariableTableElementStartBciOffset = getFieldOffset("LocalVariableTableElement::start_bci", Integer.class, "u2");
 208     final int localVariableTableElementLengthOffset = getFieldOffset("LocalVariableTableElement::length", Integer.class, "u2");
 209     final int localVariableTableElementNameCpIndexOffset = getFieldOffset("LocalVariableTableElement::name_cp_index", Integer.class, "u2");
 210     final int localVariableTableElementDescriptorCpIndexOffset = getFieldOffset("LocalVariableTableElement::descriptor_cp_index", Integer.class, "u2");
 211     final int localVariableTableElementSlotOffset = getFieldOffset("LocalVariableTableElement::slot", Integer.class, "u2");
 212 
 213     final int constantPoolSize = getFieldValue("CompilerToVM::Data::sizeof_ConstantPool", Integer.class, "int");
 214     final int constantPoolTagsOffset = getFieldOffset("ConstantPool::_tags", Integer.class, "Array&lt;u1&gt;*");
 215     final int constantPoolHolderOffset = getFieldOffset("ConstantPool::_pool_holder", Integer.class, "InstanceKlass*");
 216     final int constantPoolLengthOffset = getFieldOffset("ConstantPool::_length", Integer.class, "int");
 217     final int constantPoolFlagsOffset = getFieldOffset("ConstantPool::_flags", Integer.class, "int");

</pre><hr></hr><pre>
 227     final int jvmConstantClass = getConstant("JVM_CONSTANT_Class", Integer.class);
 228     final int jvmConstantUnresolvedClass = getConstant("JVM_CONSTANT_UnresolvedClass", Integer.class);
 229     final int jvmConstantUnresolvedClassInError = getConstant("JVM_CONSTANT_UnresolvedClassInError", Integer.class);
 230     final int jvmConstantString = getConstant("JVM_CONSTANT_String", Integer.class);
 231     final int jvmConstantFieldref = getConstant("JVM_CONSTANT_Fieldref", Integer.class);
 232     final int jvmConstantMethodref = getConstant("JVM_CONSTANT_Methodref", Integer.class);
 233     final int jvmConstantInterfaceMethodref = getConstant("JVM_CONSTANT_InterfaceMethodref", Integer.class);
 234     final int jvmConstantNameAndType = getConstant("JVM_CONSTANT_NameAndType", Integer.class);
 235     final int jvmConstantMethodHandle = getConstant("JVM_CONSTANT_MethodHandle", Integer.class);
 236     final int jvmConstantMethodHandleInError = getConstant("JVM_CONSTANT_MethodHandleInError", Integer.class);
 237     final int jvmConstantMethodType = getConstant("JVM_CONSTANT_MethodType", Integer.class);
 238     final int jvmConstantMethodTypeInError = getConstant("JVM_CONSTANT_MethodTypeInError", Integer.class);
 239     final int jvmConstantInvokeDynamic = getConstant("JVM_CONSTANT_InvokeDynamic", Integer.class);
 240 
 241     final int jvmConstantExternalMax = getConstant("JVM_CONSTANT_ExternalMax", Integer.class);
 242     final int jvmConstantInternalMin = getConstant("JVM_CONSTANT_InternalMin", Integer.class);
 243     final int jvmConstantInternalMax = getConstant("JVM_CONSTANT_InternalMax", Integer.class);
 244 
 245     final int heapWordSize = getConstant("HeapWordSize", Integer.class);
 246 
<span class="removed"> 247     final int symbolPointerSize = getFieldValue("CompilerToVM::Data::sizeof_SymbolPointer", Integer.class, "int");</span>
<span class="removed"> 248 </span>
 249     final long vmSymbolsSymbols = getFieldAddress("vmSymbols::_symbols[0]", "Symbol*");
 250     final int vmSymbolsFirstSID = getConstant("vmSymbols::FIRST_SID", Integer.class);
 251     final int vmSymbolsSIDLimit = getConstant("vmSymbols::SID_LIMIT", Integer.class);
 252 
 253     final long symbolInit = getFieldValue("CompilerToVM::Data::symbol_init", Long.class);
 254     final long symbolClinit = getFieldValue("CompilerToVM::Data::symbol_clinit", Long.class);
 255 
 256     /**
 257      * Returns the symbol in the {@code vmSymbols} table at position {@code index} as a
 258      * {@link String}.
 259      *
 260      * @param index position in the symbol table
 261      * @return the symbol at position id
 262      */
 263     String symbolAt(int index) {
 264         HotSpotJVMCIRuntime runtime = runtime();
 265         assert vmSymbolsFirstSID &lt;= index &amp;&amp; index &lt; vmSymbolsSIDLimit : "index " + index + " is out of bounds";
<span class="changed"> 266         assert symbolPointerSize == Unsafe.ADDRESS_SIZE : "the following address read is broken";</span>
<span class="changed"> 267         int offset = index * symbolPointerSize;</span>
 268         return runtime.getCompilerToVM().getSymbol(UNSAFE.getAddress(vmSymbolsSymbols + offset));
 269     }
 270 
 271     final int universeBaseVtableSize = getFieldValue("CompilerToVM::Data::Universe_base_vtable_size", Integer.class, "int");
 272 
 273     final int baseVtableLength() {
 274         return universeBaseVtableSize / (vtableEntrySize / heapWordSize);
 275     }
 276 
 277     final int klassOffset = getFieldValue("java_lang_Class::_klass_offset", Integer.class, "int");
 278 
 279     /**
 280      * The DataLayout header size is the same as the cell size.
 281      */
 282     final int dataLayoutHeaderSize = getConstant("DataLayout::cell_size", Integer.class);
 283     final int dataLayoutTagOffset = getFieldOffset("DataLayout::_header._struct._tag", Integer.class, "u1");
 284     final int dataLayoutFlagsOffset = getFieldOffset("DataLayout::_header._struct._flags", Integer.class, "u1");
 285     final int dataLayoutBCIOffset = getFieldOffset("DataLayout::_header._struct._bci", Integer.class, "u2");
 286     final int dataLayoutCellSize = getConstant("DataLayout::cell_size", Integer.class);
 287 

</pre><hr></hr>
</pre></td><td><pre>

</pre><hr></hr><pre>
  77     final int secondarySuperCacheOffset = getFieldOffset("Klass::_secondary_super_cache", Integer.class, "Klass*");
  78 
  79     /**
  80      * The offset of the _java_mirror field (of type {@link Class}) in a Klass.
  81      */
  82     final int classMirrorHandleOffset = getFieldOffset("Klass::_java_mirror", Integer.class, "OopHandle");
  83 
  84     final int klassAccessFlagsOffset = getFieldOffset("Klass::_access_flags", Integer.class, "AccessFlags");
  85     final int klassLayoutHelperOffset = getFieldOffset("Klass::_layout_helper", Integer.class, "jint");
  86 
  87     final int klassLayoutHelperNeutralValue = getConstant("Klass::_lh_neutral_value", Integer.class);
  88     final int klassLayoutHelperInstanceSlowPathBit = getConstant("Klass::_lh_instance_slow_path_bit", Integer.class);
  89 
  90     final int vtableEntrySize = getFieldValue("CompilerToVM::Data::sizeof_vtableEntry", Integer.class, "int");
  91     final int vtableEntryMethodOffset = getFieldOffset("vtableEntry::_method", Integer.class, "Method*");
  92 
  93     final int instanceKlassSourceFileNameIndexOffset = getFieldOffset("InstanceKlass::_source_file_name_index", Integer.class, "u2");
  94     final int instanceKlassInitStateOffset = getFieldOffset("InstanceKlass::_init_state", Integer.class, "u1");
  95     final int instanceKlassConstantsOffset = getFieldOffset("InstanceKlass::_constants", Integer.class, "ConstantPool*");
  96     final int instanceKlassFieldsOffset = getFieldOffset("InstanceKlass::_fields", Integer.class, "Array&lt;u2&gt;*");
<span class="new">  97     final int instanceKlassAnnotationsOffset = getFieldOffset("InstanceKlass::_annotations", Integer.class, "Annotations*");</span>
  98     final int instanceKlassMiscFlagsOffset = getFieldOffset("InstanceKlass::_misc_flags", Integer.class, "u2");
  99     final int klassVtableStartOffset = getFieldValue("CompilerToVM::Data::Klass_vtable_start_offset", Integer.class, "int");
 100     final int klassVtableLengthOffset = getFieldValue("CompilerToVM::Data::Klass_vtable_length_offset", Integer.class, "int");
 101 
 102     final int instanceKlassStateLinked = getConstant("InstanceKlass::linked", Integer.class);
 103     final int instanceKlassStateFullyInitialized = getConstant("InstanceKlass::fully_initialized", Integer.class);
 104     final int instanceKlassMiscIsUnsafeAnonymous = getConstant("InstanceKlass::_misc_is_unsafe_anonymous", Integer.class);
 105 
<span class="new"> 106     final int annotationsFieldAnnotationsOffset = getFieldOffset("Annotations::_fields_annotations", Integer.class, "Array&lt;AnnotationArray*&gt;*");</span>
<span class="new"> 107     final int fieldsAnnotationsBaseOffset = getFieldValue("CompilerToVM::Data::_fields_annotations_base_offset", Integer.class, "int");</span>
<span class="new"> 108 </span>
 109     final int arrayU1LengthOffset = getFieldOffset("Array&lt;int&gt;::_length", Integer.class, "int");
 110     final int arrayU1DataOffset = getFieldOffset("Array&lt;u1&gt;::_data", Integer.class);
 111     final int arrayU2DataOffset = getFieldOffset("Array&lt;u2&gt;::_data", Integer.class);
 112 
 113     final int fieldInfoAccessFlagsOffset = getConstant("FieldInfo::access_flags_offset", Integer.class);
 114     final int fieldInfoNameIndexOffset = getConstant("FieldInfo::name_index_offset", Integer.class);
 115     final int fieldInfoSignatureIndexOffset = getConstant("FieldInfo::signature_index_offset", Integer.class);
 116     final int fieldInfoLowPackedOffset = getConstant("FieldInfo::low_packed_offset", Integer.class);
 117     final int fieldInfoHighPackedOffset = getConstant("FieldInfo::high_packed_offset", Integer.class);
 118     final int fieldInfoFieldSlots = getConstant("FieldInfo::field_slots", Integer.class);
 119 
 120     final int fieldInfoTagSize = getConstant("FIELDINFO_TAG_SIZE", Integer.class);
 121 
 122     final int jvmAccHasFinalizer = getConstant("JVM_ACC_HAS_FINALIZER", Integer.class);
 123     final int jvmAccFieldInternal = getConstant("JVM_ACC_FIELD_INTERNAL", Integer.class);
 124     final int jvmAccFieldStable = getConstant("JVM_ACC_FIELD_STABLE", Integer.class);
 125     final int jvmAccFieldHasGenericSignature = getConstant("JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE", Integer.class);
 126     final int jvmAccIsCloneableFast = getConstant("JVM_ACC_IS_CLONEABLE_FAST", Integer.class);
 127 
 128     // These modifiers are not public in Modifier so we get them via vmStructs.

</pre><hr></hr><pre>
 182 
 183     final int compLevelAdjustmentNone = getConstant("JVMCIRuntime::none", Integer.class);
 184     final int compLevelAdjustmentByHolder = getConstant("JVMCIRuntime::by_holder", Integer.class);
 185     final int compLevelAdjustmentByFullSignature = getConstant("JVMCIRuntime::by_full_signature", Integer.class);
 186 
 187     final int invocationEntryBci = getConstant("InvocationEntryBci", Integer.class);
 188 
 189     final int extraStackEntries = getFieldValue("CompilerToVM::Data::Method_extra_stack_entries", Integer.class, "int");
 190 
 191     final int constMethodConstantsOffset = getFieldOffset("ConstMethod::_constants", Integer.class, "ConstantPool*");
 192     final int constMethodFlagsOffset = getFieldOffset("ConstMethod::_flags", Integer.class, "u2");
 193     final int constMethodCodeSizeOffset = getFieldOffset("ConstMethod::_code_size", Integer.class, "u2");
 194     final int constMethodNameIndexOffset = getFieldOffset("ConstMethod::_name_index", Integer.class, "u2");
 195     final int constMethodSignatureIndexOffset = getFieldOffset("ConstMethod::_signature_index", Integer.class, "u2");
 196     final int constMethodMethodIdnumOffset = getFieldOffset("ConstMethod::_method_idnum", Integer.class, "u2");
 197     final int constMethodMaxStackOffset = getFieldOffset("ConstMethod::_max_stack", Integer.class, "u2");
 198     final int methodMaxLocalsOffset = getFieldOffset("ConstMethod::_max_locals", Integer.class, "u2");
 199 
 200     final int constMethodHasLineNumberTable = getConstant("ConstMethod::_has_linenumber_table", Integer.class);
 201     final int constMethodHasLocalVariableTable = getConstant("ConstMethod::_has_localvariable_table", Integer.class);
<span class="new"> 202     final int constMethodHasMethodAnnotations = getConstant("ConstMethod::_has_method_annotations", Integer.class);</span>
<span class="new"> 203     final int constMethodHasParameterAnnotations = getConstant("ConstMethod::_has_parameter_annotations", Integer.class);</span>
 204     final int constMethodHasExceptionTable = getConstant("ConstMethod::_has_exception_table", Integer.class);
 205 
 206     final int exceptionTableElementSize = getFieldValue("CompilerToVM::Data::sizeof_ExceptionTableElement", Integer.class, "int");
 207     final int exceptionTableElementStartPcOffset = getFieldOffset("ExceptionTableElement::start_pc", Integer.class, "u2");
 208     final int exceptionTableElementEndPcOffset = getFieldOffset("ExceptionTableElement::end_pc", Integer.class, "u2");
 209     final int exceptionTableElementHandlerPcOffset = getFieldOffset("ExceptionTableElement::handler_pc", Integer.class, "u2");
 210     final int exceptionTableElementCatchTypeIndexOffset = getFieldOffset("ExceptionTableElement::catch_type_index", Integer.class, "u2");
 211 
 212     final int localVariableTableElementSize = getFieldValue("CompilerToVM::Data::sizeof_LocalVariableTableElement", Integer.class, "int");
 213     final int localVariableTableElementStartBciOffset = getFieldOffset("LocalVariableTableElement::start_bci", Integer.class, "u2");
 214     final int localVariableTableElementLengthOffset = getFieldOffset("LocalVariableTableElement::length", Integer.class, "u2");
 215     final int localVariableTableElementNameCpIndexOffset = getFieldOffset("LocalVariableTableElement::name_cp_index", Integer.class, "u2");
 216     final int localVariableTableElementDescriptorCpIndexOffset = getFieldOffset("LocalVariableTableElement::descriptor_cp_index", Integer.class, "u2");
 217     final int localVariableTableElementSlotOffset = getFieldOffset("LocalVariableTableElement::slot", Integer.class, "u2");
 218 
 219     final int constantPoolSize = getFieldValue("CompilerToVM::Data::sizeof_ConstantPool", Integer.class, "int");
 220     final int constantPoolTagsOffset = getFieldOffset("ConstantPool::_tags", Integer.class, "Array&lt;u1&gt;*");
 221     final int constantPoolHolderOffset = getFieldOffset("ConstantPool::_pool_holder", Integer.class, "InstanceKlass*");
 222     final int constantPoolLengthOffset = getFieldOffset("ConstantPool::_length", Integer.class, "int");
 223     final int constantPoolFlagsOffset = getFieldOffset("ConstantPool::_flags", Integer.class, "int");

</pre><hr></hr><pre>
 233     final int jvmConstantClass = getConstant("JVM_CONSTANT_Class", Integer.class);
 234     final int jvmConstantUnresolvedClass = getConstant("JVM_CONSTANT_UnresolvedClass", Integer.class);
 235     final int jvmConstantUnresolvedClassInError = getConstant("JVM_CONSTANT_UnresolvedClassInError", Integer.class);
 236     final int jvmConstantString = getConstant("JVM_CONSTANT_String", Integer.class);
 237     final int jvmConstantFieldref = getConstant("JVM_CONSTANT_Fieldref", Integer.class);
 238     final int jvmConstantMethodref = getConstant("JVM_CONSTANT_Methodref", Integer.class);
 239     final int jvmConstantInterfaceMethodref = getConstant("JVM_CONSTANT_InterfaceMethodref", Integer.class);
 240     final int jvmConstantNameAndType = getConstant("JVM_CONSTANT_NameAndType", Integer.class);
 241     final int jvmConstantMethodHandle = getConstant("JVM_CONSTANT_MethodHandle", Integer.class);
 242     final int jvmConstantMethodHandleInError = getConstant("JVM_CONSTANT_MethodHandleInError", Integer.class);
 243     final int jvmConstantMethodType = getConstant("JVM_CONSTANT_MethodType", Integer.class);
 244     final int jvmConstantMethodTypeInError = getConstant("JVM_CONSTANT_MethodTypeInError", Integer.class);
 245     final int jvmConstantInvokeDynamic = getConstant("JVM_CONSTANT_InvokeDynamic", Integer.class);
 246 
 247     final int jvmConstantExternalMax = getConstant("JVM_CONSTANT_ExternalMax", Integer.class);
 248     final int jvmConstantInternalMin = getConstant("JVM_CONSTANT_InternalMin", Integer.class);
 249     final int jvmConstantInternalMax = getConstant("JVM_CONSTANT_InternalMax", Integer.class);
 250 
 251     final int heapWordSize = getConstant("HeapWordSize", Integer.class);
 252 


 253     final long vmSymbolsSymbols = getFieldAddress("vmSymbols::_symbols[0]", "Symbol*");
 254     final int vmSymbolsFirstSID = getConstant("vmSymbols::FIRST_SID", Integer.class);
 255     final int vmSymbolsSIDLimit = getConstant("vmSymbols::SID_LIMIT", Integer.class);
 256 
 257     final long symbolInit = getFieldValue("CompilerToVM::Data::symbol_init", Long.class);
 258     final long symbolClinit = getFieldValue("CompilerToVM::Data::symbol_clinit", Long.class);
 259 
 260     /**
 261      * Returns the symbol in the {@code vmSymbols} table at position {@code index} as a
 262      * {@link String}.
 263      *
 264      * @param index position in the symbol table
 265      * @return the symbol at position id
 266      */
 267     String symbolAt(int index) {
 268         HotSpotJVMCIRuntime runtime = runtime();
 269         assert vmSymbolsFirstSID &lt;= index &amp;&amp; index &lt; vmSymbolsSIDLimit : "index " + index + " is out of bounds";
<span class="changed"> 270         int offset = index * Unsafe.ADDRESS_SIZE;</span>

 271         return runtime.getCompilerToVM().getSymbol(UNSAFE.getAddress(vmSymbolsSymbols + offset));
 272     }
 273 
 274     final int universeBaseVtableSize = getFieldValue("CompilerToVM::Data::Universe_base_vtable_size", Integer.class, "int");
 275 
 276     final int baseVtableLength() {
 277         return universeBaseVtableSize / (vtableEntrySize / heapWordSize);
 278     }
 279 
 280     final int klassOffset = getFieldValue("java_lang_Class::_klass_offset", Integer.class, "int");
 281 
 282     /**
 283      * The DataLayout header size is the same as the cell size.
 284      */
 285     final int dataLayoutHeaderSize = getConstant("DataLayout::cell_size", Integer.class);
 286     final int dataLayoutTagOffset = getFieldOffset("DataLayout::_header._struct._tag", Integer.class, "u1");
 287     final int dataLayoutFlagsOffset = getFieldOffset("DataLayout::_header._struct._flags", Integer.class, "u1");
 288     final int dataLayoutBCIOffset = getFieldOffset("DataLayout::_header._struct._bci", Integer.class, "u2");
 289     final int dataLayoutCellSize = getConstant("DataLayout::cell_size", Integer.class);
 290 

</pre><hr></hr>
</pre></td>
</tr></table>
<center><a href='../../../../../../../../../../src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/HotSpotResolvedObjectTypeImpl.java.sdiff.html' target='_top'>&lt prev</a> <a href='../../../../../../../../../../index.html' target='_top'>index</a> <a href='../../../../../../../../../../test/hotspot/jtreg/compiler/jvmci/jdk.vm.ci.runtime.test/src/jdk/vm/ci/runtime/test/TestResolvedJavaField.java.sdiff.html' target='_top'>next &gt</a></center>
</body></html>
